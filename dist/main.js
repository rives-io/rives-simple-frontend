var o0=Object.defineProperty;var E=(e,t)=>()=>(e&&(t=e(e=0)),t);var iu=(e,t)=>{for(var r in t)o0(e,r,{get:t[r],enumerable:!0})};var cp,up=E(()=>{cp="1.0.8"});var fe,Tn=E(()=>{up();fe=class e extends Error{constructor(t,r={}){let n=r.cause instanceof e?r.cause.details:r.cause?.message?r.cause.message:r.details,o=r.cause instanceof e&&r.cause.docsPath||r.docsPath,s=[t||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...o?[`Docs: https://abitype.dev${o}`]:[],...n?[`Details: ${n}`]:[],`Version: abitype@${cp}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=o,this.metaMessages=r.metaMessages,this.shortMessage=t}}});function qe(e,t){return e.exec(t)?.groups}var cu,uu,si,Jo=E(()=>{cu=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,uu=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,si=/^\(.+?\).*?$/});function ii(e){let t=e.type;if(fp.test(e.type)&&"components"in e){t="(";let r=e.components.length;for(let o=0;o<r;o++){let s=e.components[o];t+=ii(s),o<r-1&&(t+=", ")}let n=qe(fp,e.type);return t+=`)${n?.array??""}`,ii({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}var fp,pp=E(()=>{Jo();fp=/^tuple(?<array>(\[(\d*)\])*)$/});function In(e){let t="",r=e.length;for(let n=0;n<r;n++){let o=e[n];t+=ii(o),n!==r-1&&(t+=", ")}return t}var mp=E(()=>{pp()});function Ur(e){return e.type==="function"?`function ${e.name}(${In(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${In(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${In(e.inputs)})`:e.type==="error"?`error ${e.name}(${In(e.inputs)})`:e.type==="constructor"?`constructor(${In(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var dp=E(()=>{mp()});function hp(e){return lp.test(e)}function xp(e){return qe(lp,e)}function bp(e){return yp.test(e)}function gp(e){return qe(yp,e)}function vp(e){return wp.test(e)}function Ep(e){return qe(wp,e)}function nr(e){return Ap.test(e)}function Tp(e){return qe(Ap,e)}function Bp(e){return Ip.test(e)}function Pp(e){return qe(Ip,e)}function kp(e){return Sp.test(e)}function Cp(e){return qe(Sp,e)}function Rp(e){return s0.test(e)}var lp,yp,wp,Ap,Ip,Sp,s0,fu,Mp,ai,Bn=E(()=>{Jo();lp=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;yp=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;wp=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;Ap=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;Ip=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;Sp=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;s0=/^receive\(\) external payable$/;fu=new Set(["memory","indexed","storage","calldata"]),Mp=new Set(["indexed"]),ai=new Set(["calldata","memory","storage"])});var Xo,Qo,ci,ui=E(()=>{Tn();Xo=class extends fe{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},Qo=class extends fe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},ci=class extends fe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var es,ts,rs,ns,os,ss,fi=E(()=>{Tn();es=class extends fe{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}},ts=class extends fe{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},rs=class extends fe{constructor({param:t,name:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},ns=class extends fe{constructor({param:t,type:r,modifier:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},os=class extends fe{constructor({param:t,type:r,modifier:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},ss=class extends fe{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var it,is,as,pu=E(()=>{Tn();it=class extends fe{constructor({signature:t,type:r}){super(`Invalid ${r} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},is=class extends fe{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},as=class extends fe{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var cs,$p=E(()=>{Tn();cs=class extends fe{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var us,Np=E(()=>{Tn();us=class extends fe{constructor({current:t,depth:r}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function zp(e,t,r){let n="";if(r)for(let o of Object.entries(r)){if(!o)continue;let s="";for(let i of o[1])s+=`[${i.type}${i.name?`:${i.name}`:""}]`;n+=`(${o[0]}{${s}})`}return t?`${t}:${e}${n}`:e}var pi,Op=E(()=>{pi=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function fs(e,t={}){if(vp(e))return i0(e,t);if(bp(e))return a0(e,t);if(hp(e))return c0(e,t);if(Bp(e))return u0(e,t);if(kp(e))return f0(e);if(Rp(e))return{type:"receive",stateMutability:"payable"};throw new is({signature:e})}function i0(e,t={}){let r=Ep(e);if(!r)throw new it({signature:e,type:"function"});let n=Oe(r.parameters),o=[],s=n.length;for(let a=0;a<s;a++)o.push(at(n[a],{modifiers:ai,structs:t,type:"function"}));let i=[];if(r.returns){let a=Oe(r.returns),c=a.length;for(let u=0;u<c;u++)i.push(at(a[u],{modifiers:ai,structs:t,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:o,outputs:i}}function a0(e,t={}){let r=gp(e);if(!r)throw new it({signature:e,type:"event"});let n=Oe(r.parameters),o=[],s=n.length;for(let i=0;i<s;i++)o.push(at(n[i],{modifiers:Mp,structs:t,type:"event"}));return{name:r.name,type:"event",inputs:o}}function c0(e,t={}){let r=xp(e);if(!r)throw new it({signature:e,type:"error"});let n=Oe(r.parameters),o=[],s=n.length;for(let i=0;i<s;i++)o.push(at(n[i],{structs:t,type:"error"}));return{name:r.name,type:"error",inputs:o}}function u0(e,t={}){let r=Pp(e);if(!r)throw new it({signature:e,type:"constructor"});let n=Oe(r.parameters),o=[],s=n.length;for(let i=0;i<s;i++)o.push(at(n[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:o}}function f0(e){let t=Cp(e);if(!t)throw new it({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}function at(e,t){let r=zp(e,t?.type,t?.structs);if(pi.has(r))return pi.get(r);let n=si.test(e),o=qe(n?m0:p0,e);if(!o)throw new ts({param:e});if(o.name&&h0(o.name))throw new rs({param:e,name:o.name});let s=o.name?{name:o.name}:{},i=o.modifier==="indexed"?{indexed:!0}:{},a=t?.structs??{},c,u={};if(n){c="tuple";let m=Oe(o.type),p=[],d=m.length;for(let y=0;y<d;y++)p.push(at(m[y],{structs:a}));u={components:p}}else if(o.type in a)c="tuple",u={components:a[o.type]};else if(d0.test(o.type))c=`${o.type}256`;else if(c=o.type,t?.type!=="struct"&&!mu(c))throw new ci({type:c});if(o.modifier){if(!t?.modifiers?.has?.(o.modifier))throw new ns({param:e,type:t?.type,modifier:o.modifier});if(ai.has(o.modifier)&&!x0(c,!!o.array))throw new os({param:e,type:t?.type,modifier:o.modifier})}let f={type:`${c}${o.array??""}`,...s,...i,...u};return pi.set(r,f),f}function Oe(e,t=[],r="",n=0){let o=e.trim().length;for(let s=0;s<o;s++){let i=e[s],a=e.slice(s+1);switch(i){case",":return n===0?Oe(a,[...t,r.trim()]):Oe(a,t,`${r}${i}`,n);case"(":return Oe(a,t,`${r}${i}`,n+1);case")":return Oe(a,t,`${r}${i}`,n-1);default:return Oe(a,t,`${r}${i}`,n)}}if(r==="")return t;if(n!==0)throw new us({current:r,depth:n});return t.push(r.trim()),t}function mu(e){return e==="address"||e==="bool"||e==="function"||e==="string"||cu.test(e)||uu.test(e)}function h0(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||cu.test(e)||uu.test(e)||l0.test(e)}function x0(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}var p0,m0,d0,l0,Pn=E(()=>{Jo();ui();fi();pu();Np();Op();Bn();p0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,m0=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,d0=/^u?int$/;l0=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function Sn(e){let t={},r=e.length;for(let i=0;i<r;i++){let a=e[i];if(!nr(a))continue;let c=Tp(a);if(!c)throw new it({signature:a,type:"struct"});let u=c.properties.split(";"),f=[],m=u.length;for(let p=0;p<m;p++){let y=u[p].trim();if(!y)continue;let b=at(y,{type:"struct"});f.push(b)}if(!f.length)throw new as({signature:a});t[c.name]=f}let n={},o=Object.entries(t),s=o.length;for(let i=0;i<s;i++){let[a,c]=o[i];n[a]=Fp(c,t)}return n}function Fp(e,t,r=new Set){let n=[],o=e.length;for(let s=0;s<o;s++){let i=e[s];if(si.test(i.type))n.push(i);else{let c=qe(y0,i.type);if(!c?.type)throw new ss({abiParameter:i});let{array:u,type:f}=c;if(f in t){if(r.has(f))throw new cs({type:f});n.push({...i,type:`tuple${u??""}`,components:Fp(t[f]??[],t,new Set([...r,f]))})}else if(mu(f))n.push(i);else throw new Qo({type:f})}}return n}var y0,mi=E(()=>{Jo();ui();fi();pu();$p();Bn();Pn();y0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function Lr(e){let t=Sn(e),r=[],n=e.length;for(let o=0;o<n;o++){let s=e[o];nr(s)||r.push(fs(s,t))}return r}var Hp=E(()=>{Bn();mi();Pn()});function ps(e){let t;if(typeof e=="string")t=fs(e);else{let r=Sn(e),n=e.length;for(let o=0;o<n;o++){let s=e[o];if(!nr(s)){t=fs(s,r);break}}}if(!t)throw new Xo({signature:e});return t}var Up=E(()=>{ui();Bn();mi();Pn()});function di(e){let t=[];if(typeof e=="string"){let r=Oe(e),n=r.length;for(let o=0;o<n;o++)t.push(at(r[o],{modifiers:fu}))}else{let r=Sn(e),n=e.length;for(let o=0;o<n;o++){let s=e[o];if(nr(s))continue;let i=Oe(s),a=i.length;for(let c=0;c<a;c++)t.push(at(i[c],{modifiers:fu,structs:r}))}}if(t.length===0)throw new es({params:e});return t}var Lp=E(()=>{fi();Bn();mi();Pn();Pn()});var ms=E(()=>{dp();Hp();Up();Lp()});function Re(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new li(e.type);return`${e.name}(${ds(e.inputs,{includeName:t})})`}function ds(e,{includeName:t=!1}={}){return e?e.map(r=>g0(r,{includeName:t})).join(t?", ":","):""}function g0(e,{includeName:t}){return e.type.startsWith("tuple")?`(${ds(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}var _r=E(()=>{de()});function Q(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}var We=E(()=>{});function W(e){return Q(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}var ct=E(()=>{We()});var du,_p=E(()=>{du="2.24.1"});function Dp(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Dp(e.cause,t):t?null:e}var lu,g,_=E(()=>{_p();lu={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${du}`},g=class e extends Error{constructor(t,r={}){let n=r.cause instanceof e?r.cause.details:r.cause?.message?r.cause.message:r.details,o=r.cause instanceof e&&r.cause.docsPath||r.docsPath,s=lu.getDocsUrl?.({...r,docsPath:o}),i=[t||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...lu.version?[`Version: ${lu.version}`]:[]].join(`
`);super(i,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=o,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=t,this.version=du}walk(t){return Dp(this,t)}}});var hi,ls,kn,Ze,xi,yi,bi,Cn,gi,Rn,hs,or,wi,vi,Ei,ut,Et,Ai,Ti,Ii,li,de=E(()=>{_r();ct();_();hi=class extends g{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}},ls=class extends g{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}},kn=class extends g{constructor({data:t,params:r,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${ds(r,{includeName:!0})})`,`Data:   ${t} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=r,this.size=n}},Ze=class extends g{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},xi=class extends g{constructor({expectedLength:t,givenLength:r,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${t}`,`Given length: ${r}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},yi=class extends g{constructor({expectedSize:t,value:r}){super(`Size of bytes "${r}" (bytes${W(r)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},bi=class extends g{constructor({expectedLength:t,givenLength:r}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${r}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},Cn=class extends g{constructor(t,{docsPath:r}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}},gi=class extends g{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}},Rn=class extends g{constructor(t,{docsPath:r}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:r,name:"AbiEventSignatureNotFoundError"})}},hs=class extends g{constructor(t,{docsPath:r}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:r,name:"AbiEventNotFoundError"})}},or=class extends g{constructor(t,{docsPath:r}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionNotFoundError"})}},wi=class extends g{constructor(t,{docsPath:r}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:r,name:"AbiFunctionOutputsNotFoundError"})}},vi=class extends g{constructor(t,r){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Re(t.abiItem)}\`, and`,`\`${r.type}\` in \`${Re(r.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},Ei=class extends g{constructor({expectedSize:t,givenSize:r}){super(`Expected bytes${t}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}},ut=class extends g{constructor({abiItem:t,data:r,params:n,size:o}){super([`Data size of ${o} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${ds(n,{includeName:!0})})`,`Data:   ${r} (${o} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=r,this.params=n,this.size=o}},Et=class extends g{constructor({abiItem:t,param:r}){super([`Expected a topic for indexed event parameter${r.name?` "${r.name}"`:""} on event "${Re(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}},Ai=class extends g{constructor(t,{docsPath:r}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiEncodingType"})}},Ti=class extends g{constructor(t,{docsPath:r}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:r,name:"InvalidAbiDecodingType"})}},Ii=class extends g{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},li=class extends g{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var xs,ys,bs,Pi=E(()=>{_();xs=class extends g{constructor({offset:t,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}},ys=class extends g{constructor({size:t,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${t}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}},bs=class extends g{constructor({size:t,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${t} ${n} long.`,{name:"InvalidBytesLengthError"})}}});function sr(e,{dir:t,size:r=32}={}){return typeof e=="string"?_t(e,{dir:t,size:r}):w0(e,{dir:t,size:r})}function _t(e,{dir:t,size:r=32}={}){if(r===null)return e;let n=e.replace("0x","");if(n.length>r*2)throw new ys({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[t==="right"?"padEnd":"padStart"](r*2,"0")}`}function w0(e,{dir:t,size:r=32}={}){if(r===null)return e;if(e.length>r)throw new ys({size:e.length,targetSize:r,type:"bytes"});let n=new Uint8Array(r);for(let o=0;o<r;o++){let s=t==="right";n[s?o:r-o-1]=e[s?o:e.length-o-1]}return n}var Si=E(()=>{Pi()});var Mn,ki,Ci,Ri,gs=E(()=>{_();Mn=class extends g{constructor({max:t,min:r,signed:n,size:o,value:s}){super(`Number "${s}" is not in safe ${o?`${o*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${t?`(${r} to ${t})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},ki=class extends g{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},Ci=class extends g{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},Ri=class extends g{constructor({givenSize:t,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}});function we(e,{dir:t="left"}={}){let r=typeof e=="string"?e.replace("0x",""):e,n=0;for(let o=0;o<r.length-1&&r[t==="left"?o:r.length-o-1].toString()==="0";o++)n++;return r=t==="left"?r.slice(n):r.slice(0,r.length-n),typeof e=="string"?(r.length===1&&t==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}var $n=E(()=>{});function Me(e,{size:t}){if(W(e)>t)throw new Ri({givenSize:W(e),maxSize:t})}function ir(e,t){let r=typeof t=="string"?{to:t}:t,n=r.to;return n==="number"?se(e,r):n==="bigint"?re(e,r):n==="string"?hu(e,r):n==="boolean"?ws(e,r):ie(e,r)}function re(e,t={}){let{signed:r}=t;t.size&&Me(e,{size:t.size});let n=BigInt(e);if(!r)return n;let o=(e.length-2)/2,s=(1n<<BigInt(o)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(o*2,"f")}`)-1n}function ws(e,t={}){let r=e;if(t.size&&(Me(r,{size:t.size}),r=we(r)),we(r)==="0x00")return!1;if(we(r)==="0x01")return!0;throw new Ci(r)}function se(e,t={}){return Number(re(e,t))}function hu(e,t={}){let r=ie(e);return t.size&&(Me(r,{size:t.size}),r=we(r,{dir:"right"})),new TextDecoder().decode(r)}var ve=E(()=>{gs();ct();$n();le()});function N(e,t={}){return typeof e=="number"||typeof e=="bigint"?C(e,t):typeof e=="string"?ft(e,t):typeof e=="boolean"?Mi(e,t):j(e,t)}function Mi(e,t={}){let r=`0x${Number(e)}`;return typeof t.size=="number"?(Me(r,{size:t.size}),sr(r,{size:t.size})):r}function j(e,t={}){let r="";for(let o=0;o<e.length;o++)r+=v0[e[o]];let n=`0x${r}`;return typeof t.size=="number"?(Me(n,{size:t.size}),sr(n,{dir:"right",size:t.size})):n}function C(e,t={}){let{signed:r,size:n}=t,o=BigInt(e),s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let i=typeof s=="bigint"&&r?-s-1n:0;if(s&&o>s||o<i){let c=typeof e=="bigint"?"n":"";throw new Mn({max:s?`${s}${c}`:void 0,min:`${i}${c}`,signed:r,size:n,value:`${e}${c}`})}let a=`0x${(r&&o<0?(1n<<BigInt(n*8))+BigInt(o):o).toString(16)}`;return n?sr(a,{size:n}):a}function ft(e,t={}){let r=E0.encode(e);return j(r,t)}var v0,E0,H=E(()=>{gs();Si();ve();v0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));E0=new TextEncoder});function Ke(e,t={}){return typeof e=="number"||typeof e=="bigint"?I0(e,t):typeof e=="boolean"?T0(e,t):Q(e)?ie(e,t):pt(e,t)}function T0(e,t={}){let r=new Uint8Array(1);return r[0]=Number(e),typeof t.size=="number"?(Me(r,{size:t.size}),sr(r,{size:t.size})):r}function jp(e){if(e>=Dt.zero&&e<=Dt.nine)return e-Dt.zero;if(e>=Dt.A&&e<=Dt.F)return e-(Dt.A-10);if(e>=Dt.a&&e<=Dt.f)return e-(Dt.a-10)}function ie(e,t={}){let r=e;t.size&&(Me(r,{size:t.size}),r=sr(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);let o=n.length/2,s=new Uint8Array(o);for(let i=0,a=0;i<o;i++){let c=jp(n.charCodeAt(a++)),u=jp(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new g(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[i]=c*16+u}return s}function I0(e,t){let r=C(e,t);return ie(r)}function pt(e,t={}){let r=A0.encode(e);return typeof t.size=="number"?(Me(r,{size:t.size}),sr(r,{dir:"right",size:t.size})):r}var A0,Dt,le=E(()=>{_();We();Si();ve();H();A0=new TextEncoder;Dt={zero:48,nine:57,A:65,F:70,a:97,f:102}});function vs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function B0(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ar(e,...t){if(!B0(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function qp(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vs(e.outputLen),vs(e.blockLen)}function jt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function $i(e,t){ar(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}var Es=E(()=>{});function P0(e,t=!1){return t?{h:Number(e&Ni),l:Number(e>>Gp&Ni)}:{h:Number(e>>Gp&Ni)|0,l:Number(e&Ni)|0}}function Vp(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){let{h:s,l:i}=P0(e[o],t);[r[o],n[o]]=[s,i]}return[r,n]}var Ni,Gp,Wp,Zp,Kp,Yp,Jp=E(()=>{Ni=BigInt(4294967295),Gp=BigInt(32);Wp=(e,t,r)=>e<<r|t>>>32-r,Zp=(e,t,r)=>t<<r|e>>>32-r,Kp=(e,t,r)=>t<<r-32|e>>>64-r,Yp=(e,t,r)=>e<<r-32|t>>>64-r});var Dr,Xp=E(()=>{Dr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function Qp(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function zi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function mt(e,t){return e<<32-t|e>>>t}function S0(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function yu(e){for(let t=0;t<e.length;t++)e[t]=S0(e[t])}function k0(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function ur(e){return typeof e=="string"&&(e=k0(e)),ar(e),e}function em(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];ar(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let s=e[n];r.set(s,o),o+=s.length}return r}function Oi(e){let t=n=>e().update(ur(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function tm(e){let t=(n,o)=>e(o).update(ur(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function Fi(e=32){if(Dr&&typeof Dr.getRandomValues=="function")return Dr.getRandomValues(new Uint8Array(e));if(Dr&&typeof Dr.randomBytes=="function")return Dr.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}var xu,cr,jr=E(()=>{Xp();Es();xu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;cr=class{clone(){return this._cloneInto()}}});function F0(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let i=0;i<10;i++)r[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){let a=(i+8)%10,c=(i+2)%10,u=r[c],f=r[c+1],m=rm(u,f,1)^r[a],p=nm(u,f,1)^r[a+1];for(let d=0;d<50;d+=10)e[i+d]^=m,e[i+d+1]^=p}let o=e[2],s=e[3];for(let i=0;i<24;i++){let a=sm[i],c=rm(o,s,a),u=nm(o,s,a),f=om[i];o=e[f],s=e[f+1],e[f]=c,e[f+1]=u}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)r[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=z0[n],e[1]^=O0[n]}r.fill(0)}var om,sm,im,C0,As,R0,M0,$0,N0,z0,O0,rm,nm,Hi,fr,ww,vw,Ew,Aw,Tw,Ui,Iw,Bw,am,Pw,Sw,bu=E(()=>{Es();Jp();jr();om=[],sm=[],im=[],C0=BigInt(0),As=BigInt(1),R0=BigInt(2),M0=BigInt(7),$0=BigInt(256),N0=BigInt(113);for(let e=0,t=As,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],om.push(2*(5*n+r)),sm.push((e+1)*(e+2)/2%64);let o=C0;for(let s=0;s<7;s++)t=(t<<As^(t>>M0)*N0)%$0,t&R0&&(o^=As<<(As<<BigInt(s))-As);im.push(o)}[z0,O0]=Vp(im,!0),rm=(e,t,r)=>r>32?Kp(e,t,r):Wp(e,t,r),nm=(e,t,r)=>r>32?Yp(e,t,r):Zp(e,t,r);Hi=class e extends cr{constructor(t,r,n,o=!1,s=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=o,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,vs(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Qp(this.state)}keccak(){xu||yu(this.state32),F0(this.state32,this.rounds),xu||yu(this.state32),this.posOut=0,this.pos=0}update(t){jt(this);let{blockLen:r,state:n}=this;t=ur(t);let o=t.length;for(let s=0;s<o;){let i=Math.min(r-this.pos,o-s);for(let a=0;a<i;a++)n[this.pos++]^=t[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:o}=this;t[n]^=r,(r&128)!==0&&n===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){jt(this,!1),ar(t),this.finish();let r=this.state,{blockLen:n}=this;for(let o=0,s=t.length;o<s;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,s-o);t.set(r.subarray(this.posOut,this.posOut+i),o),this.posOut+=i,o+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return vs(t),this.xofInto(new Uint8Array(t))}digestInto(t){if($i(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:o,rounds:s,enableXOF:i}=this;return t||(t=new e(r,n,o,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=n,t.outputLen=o,t.enableXOF=i,t.destroyed=this.destroyed,t}},fr=(e,t,r)=>Oi(()=>new Hi(t,e,r)),ww=fr(6,144,224/8),vw=fr(6,136,256/8),Ew=fr(6,104,384/8),Aw=fr(6,72,512/8),Tw=fr(1,144,224/8),Ui=fr(1,136,256/8),Iw=fr(1,104,384/8),Bw=fr(1,72,512/8),am=(e,t,r)=>tm((n={})=>new Hi(t,e,n.dkLen===void 0?r:n.dkLen,!0)),Pw=am(31,168,128/8),Sw=am(31,136,256/8)});function K(e,t){let r=t||"hex",n=Ui(Q(e,{strict:!1})?Ke(e):e);return r==="bytes"?n:N(n)}var dt=E(()=>{bu();We();le();H()});function cm(e){return H0(e)}var H0,um=E(()=>{le();dt();H0=e=>K(Ke(e))});function fm(e){let t=!0,r="",n=0,o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&n++,a===")"&&n--,!!t){if(n===0){if(a===" "&&["event","function",""].includes(o))o="";else if(o+=a,a===")"){s=!0;break}continue}if(a===" "){e[i-1]!==","&&r!==","&&r!==",("&&(r="",t=!1);continue}o+=a,r+=a}}if(!s)throw new g("Unable to normalize signature.");return o}var pm=E(()=>{_()});var mm,dm=E(()=>{ms();pm();mm=e=>{let t=typeof e=="string"?e:Ur(e);return fm(t)}});function Li(e){return cm(mm(e))}var gu=E(()=>{um();dm()});var pr,Ts=E(()=>{gu();pr=Li});var ee,At=E(()=>{_();ee=class extends g{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var Tt,Is=E(()=>{Tt=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let r=super.get(t);return super.has(t)&&r!==void 0&&(this.delete(t),super.set(t,r)),r}set(t,r){if(super.set(t,r),this.maxSize&&this.size>this.maxSize){let n=this.keys().next().value;n&&this.delete(n)}return this}}});function qt(e,t){if(wu.has(`${e}.${t}`))return wu.get(`${e}.${t}`);let r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=K(pt(r),"bytes"),o=(t?r.substring(`${t}0x`.length):r).split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&o[i]&&(o[i]=o[i].toUpperCase()),(n[i>>1]&15)>=8&&o[i+1]&&(o[i+1]=o[i+1].toUpperCase());let s=`0x${o.join("")}`;return wu.set(`${e}.${t}`,s),s}function _i(e,t){if(!Y(e,{strict:!1}))throw new ee({address:e});return qt(e,t)}var wu,qr=E(()=>{At();le();dt();Is();lt();wu=new Tt(8192)});function Y(e,t){let{strict:r=!0}=t??{},n=`${e}.${r}`;if(vu.has(n))return vu.get(n);let o=U0.test(e)?e.toLowerCase()===e?!0:r?qt(e)===e:!0:!1;return vu.set(n,o),o}var U0,vu,lt=E(()=>{Is();qr();U0=/^0x[a-fA-F0-9]{40}$/,vu=new Tt(8192)});function $e(e){return typeof e[0]=="string"?Te(e):L0(e)}function L0(e){let t=0;for(let o of e)t+=o.length;let r=new Uint8Array(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}function Te(e){return`0x${e.reduce((t,r)=>t+r.replace("0x",""),"")}`}var Ye=E(()=>{});function Gt(e,t,r,{strict:n}={}){return Q(e,{strict:!1})?Au(e,t,r,{strict:n}):Eu(e,t,r,{strict:n})}function lm(e,t){if(typeof t=="number"&&t>0&&t>W(e)-1)throw new xs({offset:t,position:"start",size:W(e)})}function hm(e,t,r){if(typeof t=="number"&&typeof r=="number"&&W(e)!==r-t)throw new xs({offset:r,position:"end",size:W(e)})}function Eu(e,t,r,{strict:n}={}){lm(e,t);let o=e.slice(t,r);return n&&hm(o,t,r),o}function Au(e,t,r,{strict:n}={}){lm(e,t);let o=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return n&&hm(o,t,r),o}var Gr=E(()=>{Pi();We();ct()});var xm,Di,Tu=E(()=>{xm=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Di=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function Ie(e,t){if(e.length!==t.length)throw new bi({expectedLength:e.length,givenLength:t.length});let r=_0({params:e,values:t}),n=Bu(r);return n.length===0?"0x":n}function _0({params:e,values:t}){let r=[];for(let n=0;n<e.length;n++)r.push(Iu({param:e[n],value:t[n]}));return r}function Iu({param:e,value:t}){let r=ji(e.type);if(r){let[n,o]=r;return j0(t,{length:n,param:{...e,type:o}})}if(e.type==="tuple")return Z0(t,{param:e});if(e.type==="address")return D0(t);if(e.type==="bool")return G0(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){let n=e.type.startsWith("int"),[,,o="256"]=Di.exec(e.type)??[];return V0(t,{signed:n,size:Number(o)})}if(e.type.startsWith("bytes"))return q0(t,{param:e});if(e.type==="string")return W0(t);throw new Ai(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Bu(e){let t=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?t+=32:t+=W(a)}let r=[],n=[],o=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?(r.push(C(t+o,{size:32})),n.push(a),o+=W(a)):r.push(a)}return $e([...r,...n])}function D0(e){if(!Y(e))throw new ee({address:e});return{dynamic:!1,encoded:_t(e.toLowerCase())}}function j0(e,{length:t,param:r}){let n=t===null;if(!Array.isArray(e))throw new Ii(e);if(!n&&e.length!==t)throw new xi({expectedLength:t,givenLength:e.length,type:`${r.type}[${t}]`});let o=!1,s=[];for(let i=0;i<e.length;i++){let a=Iu({param:r,value:e[i]});a.dynamic&&(o=!0),s.push(a)}if(n||o){let i=Bu(s);if(n){let a=C(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?$e([a,i]):a}}if(o)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:$e(s.map(({encoded:i})=>i))}}function q0(e,{param:t}){let[,r]=t.type.split("bytes"),n=W(e);if(!r){let o=e;return n%32!==0&&(o=_t(o,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:$e([_t(C(n,{size:32})),o])}}if(n!==Number.parseInt(r))throw new yi({expectedSize:Number.parseInt(r),value:e});return{dynamic:!1,encoded:_t(e,{dir:"right"})}}function G0(e){if(typeof e!="boolean")throw new g(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:_t(Mi(e))}}function V0(e,{signed:t,size:r=256}){if(typeof r=="number"){let n=2n**(BigInt(r)-(t?1n:0n))-1n,o=t?-n-1n:0n;if(e>n||e<o)throw new Mn({max:n.toString(),min:o.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:C(e,{size:32,signed:t})}}function W0(e){let t=ft(e),r=Math.ceil(W(t)/32),n=[];for(let o=0;o<r;o++)n.push(_t(Gt(t,o*32,(o+1)*32),{dir:"right"}));return{dynamic:!0,encoded:$e([_t(C(W(t),{size:32})),...n])}}function Z0(e,{param:t}){let r=!1,n=[];for(let o=0;o<t.components.length;o++){let s=t.components[o],i=Array.isArray(e)?o:s.name,a=Iu({param:s,value:e[i]});n.push(a),a.dynamic&&(r=!0)}return{dynamic:r,encoded:r?Bu(n):$e(n.map(({encoded:o})=>o))}}function ji(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}var Vt=E(()=>{de();At();_();gs();lt();Ye();Si();ct();Gr();H();Tu()});var It,Bs=E(()=>{Gr();gu();It=e=>Gt(Li(e),0,4)});function Bt(e){let{abi:t,args:r=[],name:n}=e,o=Q(n,{strict:!1}),s=t.filter(a=>o?a.type==="function"?It(a)===n:a.type==="event"?pr(a)===n:!1:"name"in a&&a.name===n);if(s.length===0)return;if(s.length===1)return s[0];let i;for(let a of s){if(!("inputs"in a))continue;if(!r||r.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==r.length)continue;if(r.every((u,f)=>{let m="inputs"in a&&a.inputs[f];return m?Pu(u,m):!1})){if(i&&"inputs"in i&&i.inputs){let u=ym(a.inputs,i.inputs,r);if(u)throw new vi({abiItem:a,type:u[0]},{abiItem:i,type:u[1]})}i=a}}return i||s[0]}function Pu(e,t){let r=typeof e,n=t.type;switch(n){case"address":return Y(e,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in t?Object.values(t.components).every((o,s)=>Pu(Object.values(e)[s],o)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(e)&&e.every(o=>Pu(o,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ym(e,t,r){for(let n in e){let o=e[n],s=t[n];if(o.type==="tuple"&&s.type==="tuple"&&"components"in o&&"components"in s)return ym(o.components,s.components,r[n]);let i=[o.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Y(r[n],{strict:!1}):i.includes("address")&&i.includes("bytes")?Y(r[n],{strict:!1}):!1)return i}}var Nn=E(()=>{de();We();lt();Ts();Bs()});function D(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}var he=E(()=>{});function vm(e){let{abi:t,args:r,functionName:n}=e,o=t[0];if(n){let s=Bt({abi:t,args:r,name:n});if(!s)throw new or(n,{docsPath:wm});o=s}if(o.type!=="function")throw new or(void 0,{docsPath:wm});return{abi:[o],functionName:It(Re(o))}}var wm,Em=E(()=>{de();Bs();_r();Nn();wm="/docs/contract/encodeFunctionData"});function oe(e){let{args:t}=e,{abi:r,functionName:n}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:vm(e),o=r[0],s=n,i="inputs"in o&&o.inputs?Ie(o.inputs,t??[]):void 0;return Te([s,i??"0x"])}var Je=E(()=>{Ye();Vt();Em()});var Gi,Am,Tm,Vi=E(()=>{Gi={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Am={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Tm={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var Ps,zn,Wi,Su=E(()=>{_();Ps=class extends g{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},zn=class extends g{constructor({length:t,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},Wi=class extends g{constructor({count:t,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function On(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(K0);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}var K0,Zi=E(()=>{Su();K0={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Wi({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new zn({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Ps({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Ps({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}}});function Im(e,t={}){typeof t.size<"u"&&Me(e,{size:t.size});let r=j(e,t);return re(r,t)}function Bm(e,t={}){let r=e;if(typeof t.size<"u"&&(Me(r,{size:t.size}),r=we(r)),r.length>1||r[0]>1)throw new ki(r);return!!r[0]}function St(e,t={}){typeof t.size<"u"&&Me(e,{size:t.size});let r=j(e,t);return se(r,t)}function Pm(e,t={}){let r=e;return typeof t.size<"u"&&(Me(r,{size:t.size}),r=we(r,{dir:"right"})),new TextDecoder().decode(r)}var Sm=E(()=>{gs();$n();ve();H()});function Vr(e,t){let r=typeof t=="string"?ie(t):t,n=On(r);if(W(r)===0&&e.length>0)throw new Ze;if(W(t)&&W(t)<32)throw new kn({data:typeof t=="string"?t:j(t),params:e,size:W(t)});let o=0,s=[];for(let i=0;i<e.length;++i){let a=e[i];n.setPosition(o);let[c,u]=Fn(n,a,{staticPosition:0});o+=u,s.push(c)}return s}function Fn(e,t,{staticPosition:r}){let n=ji(t.type);if(n){let[o,s]=n;return J0(e,{...t,type:s},{length:o,staticPosition:r})}if(t.type==="tuple")return tx(e,t,{staticPosition:r});if(t.type==="address")return Y0(e);if(t.type==="bool")return X0(e);if(t.type.startsWith("bytes"))return Q0(e,t,{staticPosition:r});if(t.type.startsWith("uint")||t.type.startsWith("int"))return ex(e,t);if(t.type==="string")return rx(e,{staticPosition:r});throw new Ti(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function Y0(e){let t=e.readBytes(32);return[qt(j(Eu(t,-20))),32]}function J0(e,t,{length:r,staticPosition:n}){if(!r){let i=St(e.readBytes(ku)),a=n+i,c=a+km;e.setPosition(a);let u=St(e.readBytes(km)),f=Ss(t),m=0,p=[];for(let d=0;d<u;++d){e.setPosition(c+(f?d*32:m));let[y,b]=Fn(e,t,{staticPosition:c});m+=b,p.push(y)}return e.setPosition(n+32),[p,32]}if(Ss(t)){let i=St(e.readBytes(ku)),a=n+i,c=[];for(let u=0;u<r;++u){e.setPosition(a+u*32);let[f]=Fn(e,t,{staticPosition:a});c.push(f)}return e.setPosition(n+32),[c,32]}let o=0,s=[];for(let i=0;i<r;++i){let[a,c]=Fn(e,t,{staticPosition:n+o});o+=c,s.push(a)}return[s,o]}function X0(e){return[Bm(e.readBytes(32),{size:32}),32]}function Q0(e,t,{staticPosition:r}){let[n,o]=t.type.split("bytes");if(!o){let i=St(e.readBytes(32));e.setPosition(r+i);let a=St(e.readBytes(32));if(a===0)return e.setPosition(r+32),["0x",32];let c=e.readBytes(a);return e.setPosition(r+32),[j(c),32]}return[j(e.readBytes(Number.parseInt(o),32)),32]}function ex(e,t){let r=t.type.startsWith("int"),n=Number.parseInt(t.type.split("int")[1]||"256"),o=e.readBytes(32);return[n>48?Im(o,{signed:r}):St(o,{signed:r}),32]}function tx(e,t,{staticPosition:r}){let n=t.components.length===0||t.components.some(({name:i})=>!i),o=n?[]:{},s=0;if(Ss(t)){let i=St(e.readBytes(ku)),a=r+i;for(let c=0;c<t.components.length;++c){let u=t.components[c];e.setPosition(a+s);let[f,m]=Fn(e,u,{staticPosition:a});s+=m,o[n?c:u?.name]=f}return e.setPosition(r+32),[o,32]}for(let i=0;i<t.components.length;++i){let a=t.components[i],[c,u]=Fn(e,a,{staticPosition:r});o[n?i:a?.name]=c,s+=u}return[o,s]}function rx(e,{staticPosition:t}){let r=St(e.readBytes(32)),n=t+r;e.setPosition(n);let o=St(e.readBytes(32));if(o===0)return e.setPosition(t+32),["",32];let s=e.readBytes(o,32),i=Pm(we(s));return e.setPosition(t+32),[i,32]}function Ss(e){let{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(Ss);let r=ji(e.type);return!!(r&&Ss({...e,type:r[1]}))}var km,ku,Ki=E(()=>{de();qr();Zi();ct();Gr();$n();Sm();le();H();Vt();km=32,ku=32});function Yi(e){let{abi:t,data:r}=e,n=Gt(r,0,4);if(n==="0x")throw new Ze;let s=[...t||[],Am,Tm].find(i=>i.type==="error"&&n===It(Re(i)));if(!s)throw new Cn(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Vr(s.inputs,Gt(r,4)):void 0,errorName:s.name}}var Cu=E(()=>{Vi();de();Gr();Bs();Ki();_r()});var q,Ne=E(()=>{q=(e,t,r)=>JSON.stringify(e,(n,o)=>{let s=typeof o=="bigint"?o.toString():o;return typeof t=="function"?t(n,s):s},r)});function Ru({abiItem:e,args:t,includeFunctionName:r=!0,includeName:n=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${r?e.name:""}(${e.inputs.map((o,s)=>`${n&&o.name?`${o.name}: `:""}${typeof t[s]=="object"?q(t[s]):t[s]}`).join(", ")})`}var Cm=E(()=>{Ne()});var Rm,Mm,Mu=E(()=>{Rm={gwei:9,wei:18},Mm={ether:-9,wei:9}});function Ji(e,t){let r=e.toString(),n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(t,"0");let[o,s]=[r.slice(0,r.length-t),r.slice(r.length-t)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${o||"0"}${s?`.${s}`:""}`}var $u=E(()=>{});function Hn(e,t="wei"){return Ji(e,Rm[t])}var Xi=E(()=>{Mu();$u()});function xe(e,t="wei"){return Ji(e,Mm[t])}var Un=E(()=>{Mu();$u()});function $m(e){return e.reduce((t,{slot:r,value:n})=>`${t}        ${r}: ${n}
`,"")}function Nm(e){return e.reduce((t,{address:r,...n})=>{let o=`${t}    ${r}:
`;return n.nonce&&(o+=`      nonce: ${n.nonce}
`),n.balance&&(o+=`      balance: ${n.balance}
`),n.code&&(o+=`      code: ${n.code}
`),n.state&&(o+=`      state:
`,o+=$m(n.state)),n.stateDiff&&(o+=`      stateDiff:
`,o+=$m(n.stateDiff)),o},`  State Override:
`).slice(0,-1)}var Qi,ea,Nu=E(()=>{_();Qi=class extends g{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}},ea=class extends g{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function Wr(e){let t=Object.entries(e).map(([n,o])=>o===void 0||o===!1?null:[n,o]).filter(Boolean),r=t.reduce((n,[o])=>Math.max(n,o.length),0);return t.map(([n,o])=>`  ${`${n}:`.padEnd(r+1)}  ${o}`).join(`
`)}var ta,ra,na,oa,sa,Ln,_n,ia,ht=E(()=>{Xi();Un();_();ta=class extends g{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},ra=class extends g{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},na=class extends g{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Wr(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},oa=class extends g{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},sa=class extends g{constructor(t,{account:r,docsPath:n,chain:o,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:m,value:p}){let d=Wr({chain:o&&`${o?.name} (id: ${o?.id})`,from:r?.address,to:m,value:typeof p<"u"&&`${Hn(p)} ${o?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${xe(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${xe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${xe(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:n,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",d].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},Ln=class extends g{constructor({blockHash:t,blockNumber:r,blockTag:n,hash:o,index:s}){let i="Transaction";n&&s!==void 0&&(i=`Transaction at block time "${n}" at index "${s}"`),t&&s!==void 0&&(i=`Transaction at block hash "${t}" at index "${s}"`),r&&s!==void 0&&(i=`Transaction at block number "${r}" at index "${s}"`),o&&(i=`Transaction with hash "${o}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}},_n=class extends g{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},ia=class extends g{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var zm,Zr,aa=E(()=>{zm=e=>e,Zr=e=>e});var Dn,ca,Kr,ua,fa,kt,dr=E(()=>{he();Vi();Cu();_r();Cm();Nn();Xi();Un();de();_();Nu();ht();aa();Dn=class extends g{constructor(t,{account:r,docsPath:n,chain:o,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:m,value:p,stateOverride:d}){let y=r?D(r):void 0,b=Wr({from:y?.address,to:m,value:typeof p<"u"&&`${Hn(p)} ${o?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${xe(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${xe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${xe(u)} gwei`,nonce:f});d&&(b+=`
${Nm(d)}`),super(t.shortMessage,{cause:t,docsPath:n,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",b].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},ca=class extends g{constructor(t,{abi:r,args:n,contractAddress:o,docsPath:s,functionName:i,sender:a}){let c=Bt({abi:r,args:n,name:i}),u=c?Ru({abiItem:c,args:n,includeFunctionName:!1,includeName:!1}):void 0,f=c?Re(c,{includeName:!0}):void 0,m=Wr({address:o&&zm(o),function:f,args:u&&u!=="()"&&`${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:s,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],m&&"Contract Call:",m].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=r,this.args=n,this.cause=t,this.contractAddress=o,this.functionName=i,this.sender=a}},Kr=class extends g{constructor({abi:t,data:r,functionName:n,message:o}){let s,i,a,c;if(r&&r!=="0x")try{i=Yi({abi:t,data:r});let{abiItem:f,errorName:m,args:p}=i;if(m==="Error")c=p[0];else if(m==="Panic"){let[d]=p;c=Gi[d]}else{let d=f?Re(f,{includeName:!0}):void 0,y=f&&p?Ru({abiItem:f,args:p,includeFunctionName:!1,includeName:!1}):void 0;a=[d?`Error: ${d}`:"",y&&y!=="()"?`       ${[...Array(m?.length??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(f){s=f}else o&&(c=o);let u;s instanceof Cn&&(u=s.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${n}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${n}" reverted.`,{cause:s,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=r,this.reason=c,this.signature=u}},ua=class extends g{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},fa=class extends g{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},kt=class extends g{constructor({data:t,message:r}){super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}});var Xe,lr,ks,Yr=E(()=>{Ne();_();aa();Xe=class extends g{constructor({body:t,cause:r,details:n,headers:o,status:s,url:i}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${Zr(i)}`,t&&`Request body: ${q(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=o,this.status=s,this.url=i}},lr=class extends g{constructor({body:t,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${Zr(n)}`,`Request body: ${q(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}},ks=class extends g{constructor({body:t,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Zr(r)}`,`Request body: ${q(t)}`],name:"TimeoutError"})}}});var nx,Be,hr,jn,qn,Gn,Vn,Wt,Ct,Wn,Zn,Kn,xr,Jr,Yn,Xr,Jn,Xn,Qn,eo,to,pa,Cs=E(()=>{_();Yr();nx=-1,Be=class extends g{constructor(t,{code:r,docsPath:n,metaMessages:o,name:s,shortMessage:i}){super(i,{cause:t,docsPath:n,metaMessages:o||t?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||t.name,this.code=t instanceof lr?t.code:r??nx}},hr=class extends Be{constructor(t,r){super(t,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}},jn=class e extends Be{constructor(t){super(t,{code:e.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});qn=class e extends Be{constructor(t){super(t,{code:e.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});Gn=class e extends Be{constructor(t,{method:r}={}){super(t,{code:e.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}};Object.defineProperty(Gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});Vn=class e extends Be{constructor(t){super(t,{code:e.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});Wt=class e extends Be{constructor(t){super(t,{code:e.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(Wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});Ct=class e extends Be{constructor(t){super(t,{code:e.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Ct,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});Wn=class e extends Be{constructor(t){super(t,{code:e.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(Wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});Zn=class e extends Be{constructor(t){super(t,{code:e.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(Zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});Kn=class e extends Be{constructor(t){super(t,{code:e.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(Kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});xr=class e extends Be{constructor(t,{method:r}={}){super(t,{code:e.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}};Object.defineProperty(xr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});Jr=class e extends Be{constructor(t){super(t,{code:e.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(Jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});Yn=class e extends Be{constructor(t){super(t,{code:e.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(Yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});Xr=class e extends hr{constructor(t){super(t,{code:e.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(Xr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});Jn=class e extends hr{constructor(t){super(t,{code:e.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(Jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});Xn=class e extends hr{constructor(t,{method:r}={}){super(t,{code:e.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}};Object.defineProperty(Xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});Qn=class e extends hr{constructor(t){super(t,{code:e.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(Qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});eo=class e extends hr{constructor(t){super(t,{code:e.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(eo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});to=class e extends hr{constructor(t){super(t,{code:e.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(to,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});pa=class extends Be{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function sx(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),s=BigInt(4294967295),i=Number(r>>o&s),a=Number(r&s),c=n?4:0,u=n?0:4;e.setUint32(t+c,i,n),e.setUint32(t+u,a,n)}function Fm(e,t,r){return e&t^~e&r}function Hm(e,t,r){return e&t^e&r^t&r}var ma,Um=E(()=>{Es();jr();ma=class extends cr{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=zi(this.buffer)}update(t){jt(this);let{view:r,buffer:n,blockLen:o}=this;t=ur(t);let s=t.length;for(let i=0;i<s;){let a=Math.min(o-this.pos,s-i);if(a===o){let c=zi(t);for(;o<=s-i;i+=o)this.process(c,i);continue}n.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){jt(this),$i(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:s}=this,{pos:i}=this;r[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(n,0),i=0);for(let m=i;m<o;m++)r[m]=0;sx(n,o-8,BigInt(this.length*8),s),this.process(n,0);let a=zi(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<u;m++)a.setUint32(4*m,f[m],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:s,destroyed:i,pos:a}=this;return t.length=o,t.pos=a,t.finished=s,t.destroyed=i,o%r&&t.buffer.set(n),t}}});var ix,yr,br,zu,Qr,Ou=E(()=>{Um();jr();ix=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),br=new Uint32Array(64),zu=class extends ma{constructor(){super(64,32,8,!1),this.A=yr[0]|0,this.B=yr[1]|0,this.C=yr[2]|0,this.D=yr[3]|0,this.E=yr[4]|0,this.F=yr[5]|0,this.G=yr[6]|0,this.H=yr[7]|0}get(){let{A:t,B:r,C:n,D:o,E:s,F:i,G:a,H:c}=this;return[t,r,n,o,s,i,a,c]}set(t,r,n,o,s,i,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,r){for(let m=0;m<16;m++,r+=4)br[m]=t.getUint32(r,!1);for(let m=16;m<64;m++){let p=br[m-15],d=br[m-2],y=mt(p,7)^mt(p,18)^p>>>3,b=mt(d,17)^mt(d,19)^d>>>10;br[m]=b+br[m-7]+y+br[m-16]|0}let{A:n,B:o,C:s,D:i,E:a,F:c,G:u,H:f}=this;for(let m=0;m<64;m++){let p=mt(a,6)^mt(a,11)^mt(a,25),d=f+p+Fm(a,c,u)+ix[m]+br[m]|0,b=(mt(n,2)^mt(n,13)^mt(n,22))+Hm(n,o,s)|0;f=u,u=c,c=a,a=i+d|0,i=s,s=o,o=n,n=d+b|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,o,s,i,a,c,u,f)}roundClean(){br.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Qr=Oi(()=>new zu)});var da,Fu,Lm=E(()=>{Es();jr();da=class extends cr{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,qp(t);let n=ur(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,s=new Uint8Array(o);s.set(n.length>o?t.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(t){return jt(this),this.iHash.update(t),this}digestInto(t){jt(this),ar(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Fu=(e,t,r)=>new da(e,t).update(r).digest();Fu.create=(e,t)=>new da(e,t)});var ju={};iu(ju,{aInRange:()=>Rt,abool:()=>en,abytes:()=>Qe,bitGet:()=>px,bitLen:()=>_u,bitMask:()=>Ms,bitSet:()=>mx,bytesToHex:()=>tn,bytesToNumberBE:()=>Fe,bytesToNumberLE:()=>xa,concatBytes:()=>Pe,createHmacDrbg:()=>Du,ensureBytes:()=>ye,equalBytes:()=>fx,hexToBytes:()=>nn,hexToNumber:()=>Lu,inRange:()=>wr,isBytes:()=>gr,memoized:()=>ba,notImplemented:()=>lx,numberToBytesBE:()=>xt,numberToBytesLE:()=>ya,numberToHexUnpadded:()=>rn,numberToVarBytesBE:()=>ux,utf8ToBytes:()=>Rs,validateObject:()=>Mt});function gr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Qe(e){if(!gr(e))throw new Error("Uint8Array expected")}function en(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function tn(e){Qe(e);let t="";for(let r=0;r<e.length;r++)t+=cx[e[r]];return t}function rn(e){let t=e.toString(16);return t.length&1?"0"+t:t}function Lu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?la:BigInt("0x"+e)}function _m(e){if(e>=Zt._0&&e<=Zt._9)return e-Zt._0;if(e>=Zt.A&&e<=Zt.F)return e-(Zt.A-10);if(e>=Zt.a&&e<=Zt.f)return e-(Zt.a-10)}function nn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,s=0;o<r;o++,s+=2){let i=_m(e.charCodeAt(s)),a=_m(e.charCodeAt(s+1));if(i===void 0||a===void 0){let c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[o]=i*16+a}return n}function Fe(e){return Lu(tn(e))}function xa(e){return Qe(e),Lu(tn(Uint8Array.from(e).reverse()))}function xt(e,t){return nn(e.toString(16).padStart(t*2,"0"))}function ya(e,t){return xt(e,t).reverse()}function ux(e){return nn(rn(e))}function ye(e,t,r){let n;if(typeof t=="string")try{n=nn(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(gr(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n}function Pe(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];Qe(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let s=e[n];r.set(s,o),o+=s.length}return r}function fx(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function Rs(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function wr(e,t,r){return Hu(e)&&Hu(t)&&Hu(r)&&t<=e&&e<r}function Rt(e,t,r,n){if(!wr(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function _u(e){let t;for(t=0;e>la;e>>=ha,t+=1);return t}function px(e,t){return e>>BigInt(t)&ha}function mx(e,t,r){return e|(r?ha:la)<<BigInt(t)}function Du(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Uu(e),o=Uu(e),s=0,i=()=>{n.fill(1),o.fill(0),s=0},a=(...m)=>r(o,n,...m),c=(m=Uu())=>{o=a(Dm([0]),m),n=a(),m.length!==0&&(o=a(Dm([1]),m),n=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let m=0,p=[];for(;m<t;){n=a();let d=n.slice();p.push(d),m+=n.length}return Pe(...p)};return(m,p)=>{i(),c(m);let d;for(;!(d=p(u()));)c();return i(),d}}function Mt(e,t,r={}){let n=(o,s,i)=>{let a=dx[s];if(typeof a!="function")throw new Error("invalid validator function");let c=e[o];if(!(i&&c===void 0)&&!a(c,e))throw new Error("param "+String(o)+" is invalid. Expected "+s+", got "+c)};for(let[o,s]of Object.entries(t))n(o,s,!1);for(let[o,s]of Object.entries(r))n(o,s,!0);return e}function ba(e){let t=new WeakMap;return(r,...n)=>{let o=t.get(r);if(o!==void 0)return o;let s=e(r,...n);return t.set(r,s),s}}var la,ha,ax,cx,Zt,Hu,Ms,Uu,Dm,dx,lx,on=E(()=>{la=BigInt(0),ha=BigInt(1),ax=BigInt(2);cx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));Zt={_0:48,_9:57,A:65,F:70,a:97,f:102};Hu=e=>typeof e=="bigint"&&la<=e;Ms=e=>(ax<<BigInt(e-1))-ha,Uu=e=>new Uint8Array(e),Dm=e=>Uint8Array.from(e);dx={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||gr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};lx=()=>{throw new Error("not implemented")}});function pe(e,t){let r=e%t;return r>=be?r:t+r}function bx(e,t,r){if(t<be)throw new Error("invalid exponent, negatives unsupported");if(r<=be)throw new Error("invalid modulus");if(r===ae)return be;let n=ae;for(;t>be;)t&ae&&(n=n*e%r),e=e*e%r,t>>=ae;return n}function Ve(e,t,r){let n=e;for(;t-- >be;)n*=n,n%=r;return n}function ga(e,t){if(e===be)throw new Error("invert: expected non-zero number");if(t<=be)throw new Error("invert: expected positive modulus, got "+t);let r=pe(e,t),n=t,o=be,s=ae,i=ae,a=be;for(;r!==be;){let u=n/r,f=n%r,m=o-i*u,p=s-a*u;n=r,r=f,o=i,s=a,i=m,a=p}if(n!==ae)throw new Error("invert: does not exist");return pe(o,t)}function gx(e){let t=(e-ae)/sn,r,n,o;for(r=e-ae,n=0;r%sn===be;r/=sn,n++);for(o=sn;o<e&&bx(o,t,e)!==e-ae;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){let i=(e+ae)/qu;return function(c,u){let f=c.pow(u,i);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}let s=(r+ae)/sn;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,o),r),m=a.pow(c,s),p=a.pow(c,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let d=1;for(let b=a.sqr(p);d<u&&!a.eql(b,a.ONE);d++)b=a.sqr(b);let y=a.pow(f,ae<<BigInt(u-d-1));f=a.sqr(y),m=a.mul(m,y),p=a.mul(p,f),u=d}return m}}function wx(e){if(e%qu===hx){let t=(e+ae)/qu;return function(n,o){let s=n.pow(o,t);if(!n.eql(n.sqr(s),o))throw new Error("Cannot find square root");return s}}if(e%qm===jm){let t=(e-jm)/qm;return function(n,o){let s=n.mul(o,sn),i=n.pow(s,t),a=n.mul(o,i),c=n.mul(n.mul(a,sn),i),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),o))throw new Error("Cannot find square root");return u}}return e%yx,gx(e)}function wa(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=vx.reduce((n,o)=>(n[o]="function",n),t);return Mt(e,r)}function Ex(e,t,r){if(r<be)throw new Error("invalid exponent, negatives unsupported");if(r===be)return e.ONE;if(r===ae)return t;let n=e.ONE,o=t;for(;r>be;)r&ae&&(n=e.mul(n,o)),o=e.sqr(o),r>>=ae;return n}function Ax(e,t){let r=new Array(t.length),n=t.reduce((s,i,a)=>e.is0(i)?s:(r[a]=s,e.mul(s,i)),e.ONE),o=e.inv(n);return t.reduceRight((s,i,a)=>e.is0(i)?s:(r[a]=e.mul(s,r[a]),e.mul(s,i)),o),r}function Gu(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function va(e,t,r=!1,n={}){if(e<=be)throw new Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:o,nByteLength:s}=Gu(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i,a=Object.freeze({ORDER:e,isLE:r,BITS:o,BYTES:s,MASK:Ms(o),ZERO:be,ONE:ae,create:c=>pe(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return be<=c&&c<e},is0:c=>c===be,isOdd:c=>(c&ae)===ae,neg:c=>pe(-c,e),eql:(c,u)=>c===u,sqr:c=>pe(c*c,e),add:(c,u)=>pe(c+u,e),sub:(c,u)=>pe(c-u,e),mul:(c,u)=>pe(c*u,e),pow:(c,u)=>Ex(a,c,u),div:(c,u)=>pe(c*ga(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>ga(c,e),sqrt:n.sqrt||(c=>(i||(i=wx(e)),i(a,c))),invertBatch:c=>Ax(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>r?ya(c,s):xt(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?xa(c):Fe(c)}});return Object.freeze(a)}function Gm(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Vu(e){let t=Gm(e);return t+Math.ceil(t/2)}function Vm(e,t,r=!1){let n=e.length,o=Gm(t),s=Vu(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);let i=r?xa(e):Fe(e),a=pe(i,t-ae)+ae;return r?ya(a,o):xt(a,o)}var be,ae,sn,hx,qu,jm,qm,xx,yx,vx,$s=E(()=>{on();be=BigInt(0),ae=BigInt(1),sn=BigInt(2),hx=BigInt(3),qu=BigInt(4),jm=BigInt(5),qm=BigInt(8),xx=BigInt(9),yx=BigInt(16);vx=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function Wu(e,t){let r=t.negate();return e?r:t}function Zm(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Zu(e,t){Zm(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}}function Tx(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function Ix(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}function Yu(e){return Km.get(e)||1}function Ym(e,t){return{constTimeNegate:Wu,hasPrecomputes(r){return Yu(r)!==1},unsafeLadder(r,n,o=e.ZERO){let s=r;for(;n>Wm;)n&Ea&&(o=o.add(s)),s=s.double(),n>>=Ea;return o},precomputeWindow(r,n){let{windows:o,windowSize:s}=Zu(n,t),i=[],a=r,c=a;for(let u=0;u<o;u++){c=a,i.push(c);for(let f=1;f<s;f++)c=c.add(a),i.push(c);a=c.double()}return i},wNAF(r,n,o){let{windows:s,windowSize:i}=Zu(r,t),a=e.ZERO,c=e.BASE,u=BigInt(2**r-1),f=2**r,m=BigInt(r);for(let p=0;p<s;p++){let d=p*i,y=Number(o&u);o>>=m,y>i&&(y-=f,o+=Ea);let b=d,l=d+Math.abs(y)-1,h=p%2!==0,x=y<0;y===0?c=c.add(Wu(h,n[b])):a=a.add(Wu(x,n[l]))}return{p:a,f:c}},wNAFUnsafe(r,n,o,s=e.ZERO){let{windows:i,windowSize:a}=Zu(r,t),c=BigInt(2**r-1),u=2**r,f=BigInt(r);for(let m=0;m<i;m++){let p=m*a;if(o===Wm)break;let d=Number(o&c);if(o>>=f,d>a&&(d-=u,o+=Ea),d===0)continue;let y=n[p+Math.abs(d)-1];d<0&&(y=y.negate()),s=s.add(y)}return s},getPrecomputes(r,n,o){let s=Ku.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Ku.set(n,o(s))),s},wNAFCached(r,n,o){let s=Yu(r);return this.wNAF(s,this.getPrecomputes(s,r,o),n)},wNAFCachedUnsafe(r,n,o,s){let i=Yu(r);return i===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,r,o),n,s)},setWindowSize(r,n){Zm(n,t),Km.set(r,n),Ku.delete(r)}}}function Jm(e,t,r,n){if(Tx(r,e),Ix(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");let o=e.ZERO,s=_u(BigInt(r.length)),i=s>12?s-3:s>4?s-2:s?2:1,a=(1<<i)-1,c=new Array(a+1).fill(o),u=Math.floor((t.BITS-1)/i)*i,f=o;for(let m=u;m>=0;m-=i){c.fill(o);for(let d=0;d<n.length;d++){let y=n[d],b=Number(y>>BigInt(m)&BigInt(a));c[b]=c[b].add(r[d])}let p=o;for(let d=c.length-1,y=o;d>0;d--)y=y.add(c[d]),p=p.add(y);if(f=f.add(p),m!==0)for(let d=0;d<i;d++)f=f.double()}return f}function Ju(e){return wa(e.Fp),Mt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Gu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var Wm,Ea,Ku,Km,Xm=E(()=>{$s();on();Wm=BigInt(0),Ea=BigInt(1);Ku=new WeakMap,Km=new WeakMap});function Qm(e){e.lowS!==void 0&&en("lowS",e.lowS),e.prehash!==void 0&&en("prehash",e.prehash)}function Bx(e){let t=Ju(e);Mt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}function kx(e){let t=Bx(e),{Fp:r}=t,n=va(t.n,t.nBitLength),o=t.toBytes||((b,l,h)=>{let x=l.toAffine();return Pe(Uint8Array.from([4]),r.toBytes(x.x),r.toBytes(x.y))}),s=t.fromBytes||(b=>{let l=b.subarray(1),h=r.fromBytes(l.subarray(0,r.BYTES)),x=r.fromBytes(l.subarray(r.BYTES,2*r.BYTES));return{x:h,y:x}});function i(b){let{a:l,b:h}=t,x=r.sqr(b),w=r.mul(x,b);return r.add(r.add(w,r.mul(b,l)),h)}if(!r.eql(r.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(b){return wr(b,J,t.n)}function c(b){let{allowedPrivateKeyLengths:l,nByteLength:h,wrapPrivateKey:x,n:w}=t;if(l&&typeof b!="bigint"){if(gr(b)&&(b=tn(b)),typeof b!="string"||!l.includes(b.length))throw new Error("invalid private key");b=b.padStart(h*2,"0")}let v;try{v=typeof b=="bigint"?b:Fe(ye("private key",b,h))}catch{throw new Error("invalid private key, expected hex or "+h+" bytes, got "+typeof b)}return x&&(v=pe(v,w)),Rt("private key",v,J,w),v}function u(b){if(!(b instanceof p))throw new Error("ProjectivePoint expected")}let f=ba((b,l)=>{let{px:h,py:x,pz:w}=b;if(r.eql(w,r.ONE))return{x:h,y:x};let v=b.is0();l==null&&(l=v?r.ONE:r.inv(w));let I=r.mul(h,l),T=r.mul(x,l),A=r.mul(w,l);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(A,r.ONE))throw new Error("invZ was invalid");return{x:I,y:T}}),m=ba(b=>{if(b.is0()){if(t.allowInfinityPoint&&!r.is0(b.py))return;throw new Error("bad point: ZERO")}let{x:l,y:h}=b.toAffine();if(!r.isValid(l)||!r.isValid(h))throw new Error("bad point: x or y not FE");let x=r.sqr(h),w=i(l);if(!r.eql(x,w))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(l,h,x){if(this.px=l,this.py=h,this.pz=x,l==null||!r.isValid(l))throw new Error("x required");if(h==null||!r.isValid(h))throw new Error("y required");if(x==null||!r.isValid(x))throw new Error("z required");Object.freeze(this)}static fromAffine(l){let{x:h,y:x}=l||{};if(!l||!r.isValid(h)||!r.isValid(x))throw new Error("invalid affine point");if(l instanceof p)throw new Error("projective point not allowed");let w=v=>r.eql(v,r.ZERO);return w(h)&&w(x)?p.ZERO:new p(h,x,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(l){let h=r.invertBatch(l.map(x=>x.pz));return l.map((x,w)=>x.toAffine(h[w])).map(p.fromAffine)}static fromHex(l){let h=p.fromAffine(s(ye("pointHex",l)));return h.assertValidity(),h}static fromPrivateKey(l){return p.BASE.multiply(c(l))}static msm(l,h){return Jm(p,n,l,h)}_setWindowSize(l){y.setWindowSize(this,l)}assertValidity(){m(this)}hasEvenY(){let{y:l}=this.toAffine();if(r.isOdd)return!r.isOdd(l);throw new Error("Field doesn't support isOdd")}equals(l){u(l);let{px:h,py:x,pz:w}=this,{px:v,py:I,pz:T}=l,A=r.eql(r.mul(h,T),r.mul(v,w)),P=r.eql(r.mul(x,T),r.mul(I,w));return A&&P}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){let{a:l,b:h}=t,x=r.mul(h,Aa),{px:w,py:v,pz:I}=this,T=r.ZERO,A=r.ZERO,P=r.ZERO,B=r.mul(w,w),O=r.mul(v,v),z=r.mul(I,I),F=r.mul(w,v);return F=r.add(F,F),P=r.mul(w,I),P=r.add(P,P),T=r.mul(l,P),A=r.mul(x,z),A=r.add(T,A),T=r.sub(O,A),A=r.add(O,A),A=r.mul(T,A),T=r.mul(F,T),P=r.mul(x,P),z=r.mul(l,z),F=r.sub(B,z),F=r.mul(l,F),F=r.add(F,P),P=r.add(B,B),B=r.add(P,B),B=r.add(B,z),B=r.mul(B,F),A=r.add(A,B),z=r.mul(v,I),z=r.add(z,z),B=r.mul(z,F),T=r.sub(T,B),P=r.mul(z,O),P=r.add(P,P),P=r.add(P,P),new p(T,A,P)}add(l){u(l);let{px:h,py:x,pz:w}=this,{px:v,py:I,pz:T}=l,A=r.ZERO,P=r.ZERO,B=r.ZERO,O=t.a,z=r.mul(t.b,Aa),F=r.mul(h,v),X=r.mul(x,I),S=r.mul(w,T),M=r.add(h,x),R=r.add(v,I);M=r.mul(M,R),R=r.add(F,X),M=r.sub(M,R),R=r.add(h,w);let U=r.add(v,T);return R=r.mul(R,U),U=r.add(F,S),R=r.sub(R,U),U=r.add(x,w),A=r.add(I,T),U=r.mul(U,A),A=r.add(X,S),U=r.sub(U,A),B=r.mul(O,R),A=r.mul(z,S),B=r.add(A,B),A=r.sub(X,B),B=r.add(X,B),P=r.mul(A,B),X=r.add(F,F),X=r.add(X,F),S=r.mul(O,S),R=r.mul(z,R),X=r.add(X,S),S=r.sub(F,S),S=r.mul(O,S),R=r.add(R,S),F=r.mul(X,R),P=r.add(P,F),F=r.mul(U,R),A=r.mul(M,A),A=r.sub(A,F),F=r.mul(M,X),B=r.mul(U,B),B=r.add(B,F),new p(A,P,B)}subtract(l){return this.add(l.negate())}is0(){return this.equals(p.ZERO)}wNAF(l){return y.wNAFCached(this,l,p.normalizeZ)}multiplyUnsafe(l){let{endo:h,n:x}=t;Rt("scalar",l,yt,x);let w=p.ZERO;if(l===yt)return w;if(this.is0()||l===J)return this;if(!h||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,l,p.normalizeZ);let{k1neg:v,k1:I,k2neg:T,k2:A}=h.splitScalar(l),P=w,B=w,O=this;for(;I>yt||A>yt;)I&J&&(P=P.add(O)),A&J&&(B=B.add(O)),O=O.double(),I>>=J,A>>=J;return v&&(P=P.negate()),T&&(B=B.negate()),B=new p(r.mul(B.px,h.beta),B.py,B.pz),P.add(B)}multiply(l){let{endo:h,n:x}=t;Rt("scalar",l,J,x);let w,v;if(h){let{k1neg:I,k1:T,k2neg:A,k2:P}=h.splitScalar(l),{p:B,f:O}=this.wNAF(T),{p:z,f:F}=this.wNAF(P);B=y.constTimeNegate(I,B),z=y.constTimeNegate(A,z),z=new p(r.mul(z.px,h.beta),z.py,z.pz),w=B.add(z),v=O.add(F)}else{let{p:I,f:T}=this.wNAF(l);w=I,v=T}return p.normalizeZ([w,v])[0]}multiplyAndAddUnsafe(l,h,x){let w=p.BASE,v=(T,A)=>A===yt||A===J||!T.equals(w)?T.multiplyUnsafe(A):T.multiply(A),I=v(this,h).add(v(l,x));return I.is0()?void 0:I}toAffine(l){return f(this,l)}isTorsionFree(){let{h:l,isTorsionFree:h}=t;if(l===J)return!0;if(h)return h(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:l,clearCofactor:h}=t;return l===J?this:h?h(p,this):this.multiplyUnsafe(t.h)}toRawBytes(l=!0){return en("isCompressed",l),this.assertValidity(),o(p,this,l)}toHex(l=!0){return en("isCompressed",l),tn(this.toRawBytes(l))}}p.BASE=new p(t.Gx,t.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);let d=t.nBitLength,y=Ym(p,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:a}}function Cx(e){let t=Ju(e);return Mt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function td(e){let t=Cx(e),{Fp:r,n}=t,o=r.BYTES+1,s=2*r.BYTES+1;function i(S){return pe(S,n)}function a(S){return ga(S,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:m}=kx({...t,toBytes(S,M,R){let U=M.toAffine(),L=r.toBytes(U.x),$=Pe;return en("isCompressed",R),R?$(Uint8Array.from([M.hasEvenY()?2:3]),L):$(Uint8Array.from([4]),L,r.toBytes(U.y))},fromBytes(S){let M=S.length,R=S[0],U=S.subarray(1);if(M===o&&(R===2||R===3)){let L=Fe(U);if(!wr(L,J,r.ORDER))throw new Error("Point is not on curve");let $=f(L),V;try{V=r.sqrt($)}catch(je){let Ae=je instanceof Error?": "+je.message:"";throw new Error("Point is not on curve"+Ae)}let ue=(V&J)===J;return(R&1)===1!==ue&&(V=r.neg(V)),{x:L,y:V}}else if(M===s&&R===4){let L=r.fromBytes(U.subarray(0,r.BYTES)),$=r.fromBytes(U.subarray(r.BYTES,2*r.BYTES));return{x:L,y:$}}else{let L=o,$=s;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+$+", got "+M)}}}),p=S=>tn(xt(S,t.nByteLength));function d(S){let M=n>>J;return S>M}function y(S){return d(S)?i(-S):S}let b=(S,M,R)=>Fe(S.slice(M,R));class l{constructor(M,R,U){this.r=M,this.s=R,this.recovery=U,this.assertValidity()}static fromCompact(M){let R=t.nByteLength;return M=ye("compactSignature",M,R*2),new l(b(M,0,R),b(M,R,2*R))}static fromDER(M){let{r:R,s:U}=Kt.toSig(ye("DER",M));return new l(R,U)}assertValidity(){Rt("r",this.r,J,n),Rt("s",this.s,J,n)}addRecoveryBit(M){return new l(this.r,this.s,M)}recoverPublicKey(M){let{r:R,s:U,recovery:L}=this,$=T(ye("msgHash",M));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");let V=L===2||L===3?R+t.n:R;if(V>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let ue=(L&1)===0?"02":"03",ze=c.fromHex(ue+p(V)),je=a(V),Ae=i(-$*je),Lt=i(U*je),vt=c.BASE.multiplyAndAddUnsafe(ze,Ae,Lt);if(!vt)throw new Error("point at infinify");return vt.assertValidity(),vt}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new l(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return nn(this.toDERHex())}toDERHex(){return Kt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return nn(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let h={isValidPrivateKey(S){try{return u(S),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let S=Vu(t.n);return Vm(t.randomBytes(S),t.n)},precompute(S=8,M=c.BASE){return M._setWindowSize(S),M.multiply(BigInt(3)),M}};function x(S,M=!0){return c.fromPrivateKey(S).toRawBytes(M)}function w(S){let M=gr(S),R=typeof S=="string",U=(M||R)&&S.length;return M?U===o||U===s:R?U===2*o||U===2*s:S instanceof c}function v(S,M,R=!0){if(w(S))throw new Error("first arg must be private key");if(!w(M))throw new Error("second arg must be public key");return c.fromHex(M).multiply(u(S)).toRawBytes(R)}let I=t.bits2int||function(S){if(S.length>8192)throw new Error("input is too large");let M=Fe(S),R=S.length*8-t.nBitLength;return R>0?M>>BigInt(R):M},T=t.bits2int_modN||function(S){return i(I(S))},A=Ms(t.nBitLength);function P(S){return Rt("num < 2^"+t.nBitLength,S,yt,A),xt(S,t.nByteLength)}function B(S,M,R=O){if(["recovered","canonical"].some(Fr=>Fr in R))throw new Error("sign() legacy options not supported");let{hash:U,randomBytes:L}=t,{lowS:$,prehash:V,extraEntropy:ue}=R;$==null&&($=!0),S=ye("msgHash",S),Qm(R),V&&(S=ye("prehashed msgHash",U(S)));let ze=T(S),je=u(M),Ae=[P(je),P(ze)];if(ue!=null&&ue!==!1){let Fr=ue===!0?L(r.BYTES):ue;Ae.push(ye("extraEntropy",Fr))}let Lt=Pe(...Ae),vt=ze;function ou(Fr){let vn=I(Fr);if(!m(vn))return;let su=a(vn),Ko=c.BASE.multiply(vn).toAffine(),Hr=i(Ko.x);if(Hr===yt)return;let Yo=i(su*i(vt+Hr*je));if(Yo===yt)return;let En=(Ko.x===Hr?0:2)|Number(Ko.y&J),tp=Yo;return $&&d(Yo)&&(tp=y(Yo),En^=1),new l(Hr,tp,En)}return{seed:Lt,k2sig:ou}}let O={lowS:t.lowS,prehash:!1},z={lowS:t.lowS,prehash:!1};function F(S,M,R=O){let{seed:U,k2sig:L}=B(S,M,R),$=t;return Du($.hash.outputLen,$.nByteLength,$.hmac)(U,L)}c.BASE._setWindowSize(8);function X(S,M,R,U=z){let L=S;M=ye("msgHash",M),R=ye("publicKey",R);let{lowS:$,prehash:V,format:ue}=U;if(Qm(U),"strict"in U)throw new Error("options.strict was renamed to lowS");if(ue!==void 0&&ue!=="compact"&&ue!=="der")throw new Error("format must be compact or der");let ze=typeof L=="string"||gr(L),je=!ze&&!ue&&typeof L=="object"&&L!==null&&typeof L.r=="bigint"&&typeof L.s=="bigint";if(!ze&&!je)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Ae,Lt;try{if(je&&(Ae=new l(L.r,L.s)),ze){try{ue!=="compact"&&(Ae=l.fromDER(L))}catch(En){if(!(En instanceof Kt.Err))throw En}!Ae&&ue!=="der"&&(Ae=l.fromCompact(L))}Lt=c.fromHex(R)}catch{return!1}if(!Ae||$&&Ae.hasHighS())return!1;V&&(M=t.hash(M));let{r:vt,s:ou}=Ae,Fr=T(M),vn=a(ou),su=i(Fr*vn),Ko=i(vt*vn),Hr=c.BASE.multiplyAndAddUnsafe(Lt,su,Ko)?.toAffine();return Hr?i(Hr.x)===vt:!1}return{CURVE:t,getPublicKey:x,getSharedSecret:v,sign:F,verify:X,ProjectivePoint:c,Signature:l,utils:h}}function Rx(e,t){let r=e.ORDER,n=yt;for(let y=r-J;y%vr===yt;y/=vr)n+=J;let o=n,s=vr<<o-J-J,i=s*vr,a=(r-J)/i,c=(a-J)/vr,u=i-J,f=s,m=e.pow(t,a),p=e.pow(t,(a+J)/vr),d=(y,b)=>{let l=m,h=e.pow(b,u),x=e.sqr(h);x=e.mul(x,b);let w=e.mul(y,x);w=e.pow(w,c),w=e.mul(w,h),h=e.mul(w,b),x=e.mul(w,y);let v=e.mul(x,h);w=e.pow(v,f);let I=e.eql(w,e.ONE);h=e.mul(x,p),w=e.mul(v,l),x=e.cmov(h,x,I),v=e.cmov(w,v,I);for(let T=o;T>J;T--){let A=T-vr;A=vr<<A-J;let P=e.pow(v,A),B=e.eql(P,e.ONE);h=e.mul(x,l),l=e.mul(l,l),P=e.mul(v,l),x=e.cmov(h,x,B),v=e.cmov(P,v,B)}return{isValid:I,value:x}};if(e.ORDER%ed===Aa){let y=(e.ORDER-Aa)/ed,b=e.sqrt(e.neg(t));d=(l,h)=>{let x=e.sqr(h),w=e.mul(l,h);x=e.mul(x,w);let v=e.pow(x,y);v=e.mul(v,w);let I=e.mul(v,b),T=e.mul(e.sqr(v),h),A=e.eql(T,l),P=e.cmov(I,v,A);return{isValid:A,value:P}}}return d}function rd(e,t){if(wa(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let r=Rx(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let o,s,i,a,c,u,f,m;o=e.sqr(n),o=e.mul(o,t.Z),s=e.sqr(o),s=e.add(s,o),i=e.add(s,e.ONE),i=e.mul(i,t.B),a=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),a=e.mul(a,t.A),s=e.sqr(i),u=e.sqr(a),c=e.mul(u,t.A),s=e.add(s,c),s=e.mul(s,i),u=e.mul(u,a),c=e.mul(u,t.B),s=e.add(s,c),f=e.mul(o,i);let{isValid:p,value:d}=r(s,u);m=e.mul(o,n),m=e.mul(m,d),f=e.cmov(f,i,p),m=e.cmov(m,d,p);let y=e.isOdd(n)===e.isOdd(m);return m=e.cmov(e.neg(m),m,y),f=e.div(f,a),{x:f,y:m}}}var Px,Sx,Xu,Kt,yt,J,vr,Aa,ed,Qu=E(()=>{Xm();$s();on();on();({bytesToNumberBE:Px,hexToBytes:Sx}=ju),Xu=class extends Error{constructor(t=""){super(t)}},Kt={Err:Xu,_tlv:{encode:(e,t)=>{let{Err:r}=Kt;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=rn(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?rn(o.length/2|128):"";return rn(e)+s+o+t},decode(e,t){let{Err:r}=Kt,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let o=t[n++],s=!!(o&128),i=0;if(!s)i=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let u=t.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let f of u)i=i<<8|f;if(n+=c,i<128)throw new r("tlv.decode(long): not minimal encoding")}let a=t.subarray(n,n+i);if(a.length!==i)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+i)}}},_int:{encode(e){let{Err:t}=Kt;if(e<yt)throw new t("integer: negative integers are not allowed");let r=rn(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=Kt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Px(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=Kt,o=typeof e=="string"?Sx(e):e;Qe(o);let{v:s,l:i}=n.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,s),{v:u,l:f}=n.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=Kt,n=t.encode(2,r.encode(e.r)),o=t.encode(2,r.encode(e.s)),s=n+o;return t.encode(48,s)}},yt=BigInt(0),J=BigInt(1),vr=BigInt(2),Aa=BigInt(3),ed=BigInt(4)});function Mx(e){return{hash:e,hmac:(t,...r)=>Fu(e,t,em(...r)),randomBytes:Fi}}function nd(e,t){let r=n=>td({...e,...Mx(n)});return{...r(t),create:r}}var od=E(()=>{Lm();jr();Qu();});function Er(e,t){if(Ns(e),Ns(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function Nx(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function Ns(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function zx(e,t,r,n){Qe(e),Qe(t),Ns(r),t.length>255&&(t=n(Pe(Rs("H2C-OVERSIZE-DST-"),t)));let{outputLen:o,blockLen:s}=n,i=Math.ceil(r/o);if(r>65535||i>255)throw new Error("expand_message_xmd: invalid lenInBytes");let a=Pe(t,Er(t.length,1)),c=Er(0,s),u=Er(r,2),f=new Array(i),m=n(Pe(c,e,u,Er(0,1),a));f[0]=n(Pe(m,Er(1,1),a));for(let d=1;d<=i;d++){let y=[Nx(m,f[d-1]),Er(d+1,1),a];f[d]=n(Pe(...y))}return Pe(...f).slice(0,r)}function Ox(e,t,r,n,o){if(Qe(e),Qe(t),Ns(r),t.length>255){let s=Math.ceil(2*n/8);t=o.create({dkLen:s}).update(Rs("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:r}).update(e).update(Er(r,2)).update(t).update(Er(t.length,1)).digest()}function sd(e,t,r){Mt(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:o,m:s,hash:i,expand:a,DST:c}=r;Qe(e),Ns(t);let u=typeof c=="string"?Rs(c):c,f=n.toString(2).length,m=Math.ceil((f+o)/8),p=t*s*m,d;if(a==="xmd")d=zx(e,u,p,i);else if(a==="xof")d=Ox(e,u,p,o,i);else if(a==="_internal_pass")d=e;else throw new Error('expand must be "xmd" or "xof"');let y=new Array(t);for(let b=0;b<t;b++){let l=new Array(s);for(let h=0;h<s;h++){let x=m*(h+b*s),w=d.subarray(x,x+m);l[h]=pe($x(w),n)}y[b]=l}return y}function id(e,t){let r=t.map(n=>Array.from(n).reverse());return(n,o)=>{let[s,i,a,c]=r.map(u=>u.reduce((f,m)=>e.add(e.mul(f,n),m)));return n=e.div(s,i),o=e.mul(o,e.div(a,c)),{x:n,y:o}}}function ad(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,o){let s=sd(n,2,{...r,DST:r.DST,...o}),i=e.fromAffine(t(s[0])),a=e.fromAffine(t(s[1])),c=i.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,o){let s=sd(n,1,{...r,DST:r.encodeDST,...o}),i=e.fromAffine(t(s[0])).clearCofactor();return i.assertValidity(),i},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(let s of n)if(typeof s!="bigint")throw new Error("mapToCurve: expected array of bigints");let o=e.fromAffine(t(n)).clearCofactor();return o.assertValidity(),o}}}var $x,cd=E(()=>{$s();on();$x=Fe});var yd={};iu(yd,{encodeToCurve:()=>qx,hashToCurve:()=>jx,schnorr:()=>Lx,secp256k1:()=>an});function pd(e){let t=Fs,r=BigInt(3),n=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,m=Ve(f,r,t)*f%t,p=Ve(m,r,t)*f%t,d=Ve(p,Ia,t)*u%t,y=Ve(d,o,t)*d%t,b=Ve(y,s,t)*y%t,l=Ve(b,a,t)*b%t,h=Ve(l,c,t)*l%t,x=Ve(h,a,t)*b%t,w=Ve(x,r,t)*f%t,v=Ve(w,i,t)*y%t,I=Ve(v,n,t)*u%t,T=Ve(I,Ia,t);if(!Ar.eql(Ar.sqr(T),e))throw new Error("Cannot find square root");return T}function Ba(e,...t){let r=fd[e];if(r===void 0){let n=Qr(Uint8Array.from(e,o=>o.charCodeAt(0)));r=Pe(n,n),fd[e]=r}return Qr(Pe(r,...t))}function rf(e){let t=an.utils.normPrivateKeyToScalar(e),r=of.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:Os(-t),bytes:nf(r)}}function dd(e){Rt("x",e,zs,Fs);let t=ef(e*e),r=ef(t*e+BigInt(7)),n=pd(r);n%Ia!==md&&(n=ef(-n));let o=new of(e,n,zs);return o.assertValidity(),o}function ld(...e){return Os(ro(Ba("BIP0340/challenge",...e)))}function Hx(e){return rf(e).bytes}function Ux(e,t,r=Fi(32)){let n=ye("message",e),{bytes:o,scalar:s}=rf(t),i=ye("auxRand",r,32),a=tf(s^ro(Ba("BIP0340/aux",i))),c=Ba("BIP0340/nonce",a,o,n),u=Os(ro(c));if(u===md)throw new Error("sign failed: k is zero");let{bytes:f,scalar:m}=rf(u),p=ld(f,o,n),d=new Uint8Array(64);if(d.set(f,0),d.set(tf(Os(m+p*s)),32),!hd(d,n,o))throw new Error("sign: Invalid signature produced");return d}function hd(e,t,r){let n=ye("signature",e,64),o=ye("message",t),s=ye("publicKey",r,32);try{let i=dd(ro(s)),a=ro(n.subarray(0,32));if(!wr(a,zs,Fs))return!1;let c=ro(n.subarray(32,64));if(!wr(c,zs,Ta))return!1;let u=ld(tf(a),nf(i),o),f=Fx(i,c,Os(-u));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}var Fs,Ta,zs,Ia,ud,Ar,an,md,fd,nf,tf,ef,Os,of,Fx,ro,Lx,_x,Dx,xd,jx,qx,sf=E(()=>{Ou();jr();od();cd();$s();on();Qu();Fs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ta=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zs=BigInt(1),Ia=BigInt(2),ud=(e,t)=>(e+t/Ia)/t;Ar=va(Fs,void 0,void 0,{sqrt:pd}),an=nd({a:BigInt(0),b:BigInt(7),Fp:Ar,n:Ta,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Ta,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-zs*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,i=BigInt("0x100000000000000000000000000000000"),a=ud(s*e,t),c=ud(-n*e,t),u=pe(e-a*r-c*o,t),f=pe(-a*n-c*s,t),m=u>i,p=f>i;if(m&&(u=t-u),p&&(f=t-f),u>i||f>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:u,k2neg:p,k2:f}}}},Qr),md=BigInt(0),fd={};nf=e=>e.toRawBytes(!0).slice(1),tf=e=>xt(e,32),ef=e=>pe(e,Fs),Os=e=>pe(e,Ta),of=an.ProjectivePoint,Fx=(e,t,r)=>of.BASE.multiplyAndAddUnsafe(e,t,r);ro=Fe;Lx={getPublicKey:Hx,sign:Ux,verify:hd,utils:{randomPrivateKey:an.utils.randomPrivateKey,lift_x:dd,pointToBytes:nf,numberToBytesBE:xt,bytesToNumberBE:Fe,taggedHash:Ba,mod:pe}},_x=id(Ar,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),Dx=rd(Ar,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Ar.create(BigInt("-11"))}),xd=ad(an.ProjectivePoint,e=>{let{x:t,y:r}=Dx(Ar.create(e[0]));return _x(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Ar.ORDER,m:1,k:128,expand:"xmd",hash:Qr}),jx=xd.hashToCurve,qx=xd.encodeToCurve});var Yt,et,no,oo,so,io,ao,co,uo,fo,$t,tt,Tr=E(()=>{Un();_();Yt=class extends g{constructor({cause:t,message:r}={}){let n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}};Object.defineProperty(Yt,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Yt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});et=class extends g{constructor({cause:t,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${xe(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}};Object.defineProperty(et,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});no=class extends g{constructor({cause:t,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${xe(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}};Object.defineProperty(no,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});oo=class extends g{constructor({cause:t,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}};Object.defineProperty(oo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});so=class extends g{constructor({cause:t,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}};Object.defineProperty(so,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});io=class extends g{constructor({cause:t,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}};Object.defineProperty(io,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});ao=class extends g{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(ao,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});co=class extends g{constructor({cause:t,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(co,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});uo=class extends g{constructor({cause:t,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(uo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});fo=class extends g{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(fo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});$t=class extends g{constructor({cause:t,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${xe(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${xe(n)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}};Object.defineProperty($t,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});tt=class extends g{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}});function Ir(e,t){let r=(e.details||"").toLowerCase(),n=e instanceof g?e.walk(o=>o?.code===Yt.code):e;return n instanceof g?new Yt({cause:e,message:n.details}):Yt.nodeMessage.test(r)?new Yt({cause:e,message:e.details}):et.nodeMessage.test(r)?new et({cause:e,maxFeePerGas:t?.maxFeePerGas}):no.nodeMessage.test(r)?new no({cause:e,maxFeePerGas:t?.maxFeePerGas}):oo.nodeMessage.test(r)?new oo({cause:e,nonce:t?.nonce}):so.nodeMessage.test(r)?new so({cause:e,nonce:t?.nonce}):io.nodeMessage.test(r)?new io({cause:e,nonce:t?.nonce}):ao.nodeMessage.test(r)?new ao({cause:e}):co.nodeMessage.test(r)?new co({cause:e,gas:t?.gas}):uo.nodeMessage.test(r)?new uo({cause:e,gas:t?.gas}):fo.nodeMessage.test(r)?new fo({cause:e}):$t.nodeMessage.test(r)?new $t({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new tt({cause:e})}var Hs=E(()=>{_();Tr()});function Br(e,{format:t}){if(!t)return{};let r={};function n(s){let i=Object.keys(s);for(let a of i)a in e&&(r[a]=e[a]),s[a]&&typeof s[a]=="object"&&!Array.isArray(s[a])&&n(s[a])}let o=t(e||{});return n(o),r}var Us=E(()=>{});function po(e,t){return({exclude:r,format:n})=>({exclude:r,format:o=>{let s=t(o);if(r)for(let i of r)delete s[i];return{...s,...n(o)}},type:e})}var Ca=E(()=>{});function rt(e){let t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Zx(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(r=>j(r)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=C(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=C(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=C(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=C(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=C(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=C(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Wx[e.type]),typeof e.value<"u"&&(t.value=C(e.value)),t}function Zx(e){return e.map(t=>({address:t.address,r:t.r?C(BigInt(t.r)):t.r,s:t.s?C(BigInt(t.s)):t.s,chainId:C(t.chainId),nonce:C(t.nonce),...typeof t.yParity<"u"?{yParity:C(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:C(t.v)}:{}}))}var Wx,cn=E(()=>{H();Wx={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function Td(e){if(!(!e||e.length===0))return e.reduce((t,{slot:r,value:n})=>{if(r.length!==66)throw new bs({size:r.length,targetSize:66,type:"hex"});if(n.length!==66)throw new bs({size:n.length,targetSize:66,type:"hex"});return t[r]=n,t},{})}function Kx(e){let{balance:t,nonce:r,state:n,stateDiff:o,code:s}=e,i={};if(s!==void 0&&(i.code=s),t!==void 0&&(i.balance=C(t)),r!==void 0&&(i.nonce=C(r)),n!==void 0&&(i.state=Td(n)),o!==void 0){if(i.state)throw new ea;i.stateDiff=Td(o)}return i}function mo(e){if(!e)return;let t={};for(let{address:r,...n}of e){if(!Y(r,{strict:!1}))throw new ee({address:r});if(t[r])throw new Qi({address:r});t[r]=Kx(n)}return t}var Ra=E(()=>{At();Pi();Nu();lt();H()});var KE,YE,JE,XE,QE,e5,t5,r5,n5,o5,s5,i5,a5,c5,u5,f5,p5,m5,d5,l5,h5,x5,y5,b5,g5,w5,v5,E5,A5,T5,I5,B5,P5,S5,k5,C5,R5,M5,$5,N5,z5,O5,F5,H5,U5,L5,_5,D5,j5,q5,G5,V5,W5,Z5,K5,Y5,J5,X5,Q5,eA,tA,rA,nA,oA,sA,iA,aA,cA,uA,fA,pA,mA,dA,lA,hA,xA,yA,bA,gA,wA,vA,EA,AA,TA,IA,BA,PA,SA,kA,CA,RA,MA,$A,NA,zA,lo,af=E(()=>{KE=2n**(8n-1n)-1n,YE=2n**(16n-1n)-1n,JE=2n**(24n-1n)-1n,XE=2n**(32n-1n)-1n,QE=2n**(40n-1n)-1n,e5=2n**(48n-1n)-1n,t5=2n**(56n-1n)-1n,r5=2n**(64n-1n)-1n,n5=2n**(72n-1n)-1n,o5=2n**(80n-1n)-1n,s5=2n**(88n-1n)-1n,i5=2n**(96n-1n)-1n,a5=2n**(104n-1n)-1n,c5=2n**(112n-1n)-1n,u5=2n**(120n-1n)-1n,f5=2n**(128n-1n)-1n,p5=2n**(136n-1n)-1n,m5=2n**(144n-1n)-1n,d5=2n**(152n-1n)-1n,l5=2n**(160n-1n)-1n,h5=2n**(168n-1n)-1n,x5=2n**(176n-1n)-1n,y5=2n**(184n-1n)-1n,b5=2n**(192n-1n)-1n,g5=2n**(200n-1n)-1n,w5=2n**(208n-1n)-1n,v5=2n**(216n-1n)-1n,E5=2n**(224n-1n)-1n,A5=2n**(232n-1n)-1n,T5=2n**(240n-1n)-1n,I5=2n**(248n-1n)-1n,B5=2n**(256n-1n)-1n,P5=-(2n**(8n-1n)),S5=-(2n**(16n-1n)),k5=-(2n**(24n-1n)),C5=-(2n**(32n-1n)),R5=-(2n**(40n-1n)),M5=-(2n**(48n-1n)),$5=-(2n**(56n-1n)),N5=-(2n**(64n-1n)),z5=-(2n**(72n-1n)),O5=-(2n**(80n-1n)),F5=-(2n**(88n-1n)),H5=-(2n**(96n-1n)),U5=-(2n**(104n-1n)),L5=-(2n**(112n-1n)),_5=-(2n**(120n-1n)),D5=-(2n**(128n-1n)),j5=-(2n**(136n-1n)),q5=-(2n**(144n-1n)),G5=-(2n**(152n-1n)),V5=-(2n**(160n-1n)),W5=-(2n**(168n-1n)),Z5=-(2n**(176n-1n)),K5=-(2n**(184n-1n)),Y5=-(2n**(192n-1n)),J5=-(2n**(200n-1n)),X5=-(2n**(208n-1n)),Q5=-(2n**(216n-1n)),eA=-(2n**(224n-1n)),tA=-(2n**(232n-1n)),rA=-(2n**(240n-1n)),nA=-(2n**(248n-1n)),oA=-(2n**(256n-1n)),sA=2n**8n-1n,iA=2n**16n-1n,aA=2n**24n-1n,cA=2n**32n-1n,uA=2n**40n-1n,fA=2n**48n-1n,pA=2n**56n-1n,mA=2n**64n-1n,dA=2n**72n-1n,lA=2n**80n-1n,hA=2n**88n-1n,xA=2n**96n-1n,yA=2n**104n-1n,bA=2n**112n-1n,gA=2n**120n-1n,wA=2n**128n-1n,vA=2n**136n-1n,EA=2n**144n-1n,AA=2n**152n-1n,TA=2n**160n-1n,IA=2n**168n-1n,BA=2n**176n-1n,PA=2n**184n-1n,SA=2n**192n-1n,kA=2n**200n-1n,CA=2n**208n-1n,RA=2n**216n-1n,MA=2n**224n-1n,$A=2n**232n-1n,NA=2n**240n-1n,zA=2n**248n-1n,lo=2n**256n-1n});function He(e){let{account:t,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:o,to:s}=e,i=t?D(t):void 0;if(i&&!Y(i.address))throw new ee({address:i.address});if(s&&!Y(s))throw new ee({address:s});if(typeof r<"u"&&(typeof n<"u"||typeof o<"u"))throw new ta;if(n&&n>lo)throw new et({maxFeePerGas:n});if(o&&n&&o>n)throw new $t({maxFeePerGas:n,maxPriorityFeePerGas:o})}var Pr=E(()=>{he();af();At();Tr();ht();lt()});function Nt(e,t){if(!Y(e,{strict:!1}))throw new ee({address:e});if(!Y(t,{strict:!1}))throw new ee({address:t});return e.toLowerCase()===t.toLowerCase()}var Eo=E(()=>{At();lt()});function Ue(e){let{abi:t,args:r,functionName:n,data:o}=e,s=t[0];if(n){let a=Bt({abi:t,args:r,name:n});if(!a)throw new or(n,{docsPath:pf});s=a}if(s.type!=="function")throw new or(void 0,{docsPath:pf});if(!s.outputs)throw new wi(s.name,{docsPath:pf});let i=Vr(s.outputs,o);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}var pf,Cr=E(()=>{de();Ki();Nn();pf="/docs/contract/decodeFunctionResult"});var Ds,Nd,ja,zd,mf,df,lf,fn=E(()=>{Ds=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Nd=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],ja=[...Nd,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],zd=[...Nd,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],mf=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],df=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],lf=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var Od,Fd=E(()=>{Od="0x82ad56cb"});var qa,Hd,Ud,Ga=E(()=>{qa="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Hd="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Ud="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var pn,Va,Wa,js,mn,qs=E(()=>{_();pn=class extends g{constructor({blockNumber:t,chain:r,contract:n}){super(`Chain "${r.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...t&&n.blockCreated&&n.blockCreated>t?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},Va=class extends g{constructor({chain:t,currentChainId:r}){super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${t.id} \u2013 ${t.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${t.id} \u2013 ${t.name}`],name:"ChainMismatchError"})}},Wa=class extends g{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},js=class extends g{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},mn=class extends g{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function dn(e){let{abi:t,args:r,bytecode:n}=e;if(!r||r.length===0)return n;let o=t.find(i=>"type"in i&&i.type==="constructor");if(!o)throw new hi({docsPath:hf});if(!("inputs"in o))throw new ls({docsPath:hf});if(!o.inputs||o.inputs.length===0)throw new ls({docsPath:hf});let s=Ie(o.inputs,r);return Te([n,s])}var hf,Za=E(()=>{de();Ye();Vt();hf="/docs/contract/encodeDeployData"});function ot({blockNumber:e,chain:t,contract:r}){let n=t?.contracts?.[r];if(!n)throw new pn({chain:t,contract:{name:r}});if(e&&n.blockCreated&&n.blockCreated>e)throw new pn({blockNumber:e,chain:t,contract:{name:r,blockCreated:n.blockCreated}});return n.address}var ln=E(()=>{qs()});function Ka(e,{docsPath:t,...r}){let n=(()=>{let o=Ir(e,r);return o instanceof tt?e:o})();return new Dn(n,{docsPath:t,...r})}var xf=E(()=>{dr();Tr();Hs()});function Ya(){let e=()=>{},t=()=>{};return{promise:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}var yf=E(()=>{});function Ja({fn:e,id:t,shouldSplitBatch:r,wait:n=0,sort:o}){let s=async()=>{let f=c();i();let m=f.map(({args:p})=>p);m.length!==0&&e(m).then(p=>{o&&Array.isArray(p)&&p.sort(o);for(let d=0;d<f.length;d++){let{resolve:y}=f[d];y?.([p[d],p])}}).catch(p=>{for(let d=0;d<f.length;d++){let{reject:y}=f[d];y?.(p)}})},i=()=>bf.delete(t),a=()=>c().map(({args:f})=>f),c=()=>bf.get(t)||[],u=f=>bf.set(t,[...c(),f]);return{flush:i,async schedule(f){let{promise:m,resolve:p,reject:d}=Ya();return r?.([...a(),f])&&s(),c().length>0?(u({args:f,resolve:p,reject:d}),m):(u({args:f,resolve:p,reject:d}),setTimeout(s,n),m)}}}var bf,gf=E(()=>{yf();bf=new Map});var Xa,Qa,ec,Ld=E(()=>{Ne();_();aa();Xa=class extends g{constructor({callbackSelector:t,cause:r,data:n,extraData:o,sender:s,urls:i}){super(r.shortMessage||"An error occurred while fetching for an offchain result.",{cause:r,metaMessages:[...r.metaMessages||[],r.metaMessages?.length?"":[],"Offchain Gateway Call:",i&&["  Gateway URL(s):",...i.map(a=>`    ${Zr(a)}`)],`  Sender: ${s}`,`  Data: ${n}`,`  Callback selector: ${t}`,`  Extra data: ${o}`].flat(),name:"OffchainLookupError"})}},Qa=class extends g{constructor({result:t,url:r}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Zr(r)}`,`Response: ${q(t)}`],name:"OffchainLookupResponseMalformedError"})}},ec=class extends g{constructor({sender:t,to:r}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${r}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}});var jd={};iu(jd,{ccipRequest:()=>Dd,offchainLookup:()=>ry,offchainLookupAbiItem:()=>_d,offchainLookupSignature:()=>ty});async function ry(e,{blockNumber:t,blockTag:r,data:n,to:o}){let{args:s}=Yi({data:n,abi:[_d]}),[i,a,c,u,f]=s,{ccipRead:m}=e,p=m&&typeof m?.request=="function"?m.request:Dd;try{if(!Nt(o,i))throw new ec({sender:i,to:o});let d=await p({data:c,sender:i,urls:a}),{data:y}=await zt(e,{blockNumber:t,blockTag:r,data:$e([u,Ie([{type:"bytes"},{type:"bytes"}],[d,f])]),to:o});return y}catch(d){throw new Xa({callbackSelector:u,cause:d,data:n,extraData:f,sender:i,urls:a})}}async function Dd({data:e,sender:t,urls:r}){let n=new Error("An unknown error occurred.");for(let o=0;o<r.length;o++){let s=r[o],i=s.includes("{data}")?"GET":"POST",a=i==="POST"?{data:e,sender:t}:void 0,c=i==="POST"?{"Content-Type":"application/json"}:{};try{let u=await fetch(s.replace("{sender}",t.toLowerCase()).replace("{data}",e),{body:JSON.stringify(a),headers:c,method:i}),f;if(u.headers.get("Content-Type")?.startsWith("application/json")?f=(await u.json()).data:f=await u.text(),!u.ok){n=new Xe({body:a,details:f?.error?q(f.error):u.statusText,headers:u.headers,status:u.status,url:s});continue}if(!Q(f)){n=new Qa({result:f,url:s});continue}return f}catch(u){n=new Xe({body:a,details:u.message,url:s})}}throw n}var ty,_d,qd=E(()=>{Bo();Ld();Yr();Cu();Vt();Eo();Ye();We();Ne();ty="0x556f1830",_d={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function zt(e,t){let{account:r=e.account,batch:n=!!e.batch?.multicall,blockNumber:o,blockTag:s="latest",accessList:i,blobs:a,code:c,data:u,factory:f,factoryData:m,gas:p,gasPrice:d,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:l,nonce:h,to:x,value:w,stateOverride:v,...I}=t,T=r?D(r):void 0;if(c&&(f||m))throw new g("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&x)throw new g("Cannot provide both `code` & `to` as parameters.");let A=c&&u,P=f&&m&&x&&u,B=A||P,O=A?sy({code:c,data:u}):P?iy({data:u,factory:f,factoryData:m,to:x}):u;try{He(t);let F=(o?C(o):void 0)||s,X=mo(v),S=e.chain?.formatters?.transactionRequest?.format,R=(S||rt)({...Br(I,{format:S}),from:T?.address,accessList:i,blobs:a,data:O,gas:p,gasPrice:d,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:l,nonce:h,to:B?void 0:x,value:w});if(n&&ny({request:R})&&!X)try{return await oy(e,{...R,blockNumber:o,blockTag:s})}catch(L){if(!(L instanceof js)&&!(L instanceof pn))throw L}let U=await e.request({method:"eth_call",params:X?[R,F,X]:[R,F]});return U==="0x"?{data:void 0}:{data:U}}catch(z){let F=ay(z),{offchainLookup:X,offchainLookupSignature:S}=await Promise.resolve().then(()=>(qd(),jd));if(e.ccipRead!==!1&&F?.slice(0,10)===S&&x)return{data:await X(e,{data:F,to:x})};throw B&&F?.slice(0,10)==="0x101bb98d"?new fa({factory:f}):Ka(z,{...t,account:T,chain:e.chain})}}function ny({request:e}){let{data:t,to:r,...n}=e;return!(!t||t.startsWith(Od)||!r||Object.values(n).filter(o=>typeof o<"u").length>0)}async function oy(e,t){let{batchSize:r=1024,wait:n=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:o,blockTag:s="latest",data:i,multicallAddress:a,to:c}=t,u=a;if(!u){if(!e.chain)throw new js;u=ot({blockNumber:o,chain:e.chain,contract:"multicall3"})}let m=(o?C(o):void 0)||s,{schedule:p}=Ja({id:`${e.uid}.${m}`,wait:n,shouldSplitBatch(b){return b.reduce((h,{data:x})=>h+(x.length-2),0)>r*2},fn:async b=>{let l=b.map(w=>({allowFailure:!0,callData:w.data,target:w.to})),h=oe({abi:Ds,args:[l],functionName:"aggregate3"}),x=await e.request({method:"eth_call",params:[{data:h,to:u},m]});return Ue({abi:Ds,args:[l],functionName:"aggregate3",data:x||"0x"})}}),[{returnData:d,success:y}]=await p({data:i,to:c});if(!y)throw new kt({data:d});return d==="0x"?{data:void 0}:{data:d}}function sy(e){let{code:t,data:r}=e;return dn({abi:Lr(["constructor(bytes, bytes)"]),bytecode:qa,args:[t,r]})}function iy(e){let{data:t,factory:r,factoryData:n,to:o}=e;return dn({abi:Lr(["constructor(address, bytes, address, bytes)"]),bytecode:Hd,args:[o,t,r,n]})}function ay(e){if(!(e instanceof g))return;let t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}var Bo=E(()=>{ms();he();fn();Fd();Ga();_();qs();dr();Cr();Za();Je();ln();H();xf();Us();cn();gf();Ra();Pr()});var rp="https://emulator.rives.io",An="721f735bbca3",np="721f735bbca3721f735bbca396345ea884a19e7d0a37ff849a6573525f741813",au="721f735bbca3721f735bbca3cfee7c08a98f4b56",op="https://app.rives.io/data/cartridges",sp="https://app.rives.io/tapes-data",ip="https://app.rives.io/rules-params",ap="0x2105";ms();function k(e,t,r){let n=e[t.name];if(typeof n=="function")return n;let o=e[r];return typeof o=="function"?o:s=>t(e,s)}de();_();var Bi=class extends g{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};le();dt();Ts();Vt();_r();Nn();var bm="/docs/contract/encodeEventTopics";function Pt(e){let{abi:t,eventName:r,args:n}=e,o=t[0];if(r){let c=Bt({abi:t,name:r});if(!c)throw new hs(r,{docsPath:bm});o=c}if(o.type!=="event")throw new hs(void 0,{docsPath:bm});let s=Re(o),i=pr(s),a=[];if(n&&"inputs"in o){let c=o.inputs?.filter(f=>"indexed"in f&&f.indexed),u=Array.isArray(n)?n:Object.values(n).length>0?c?.map(f=>n[f.name])??[]:[];u.length>0&&(a=c?.map((f,m)=>Array.isArray(u[m])?u[m].map((p,d)=>gm({param:f,value:u[m][d]})):typeof u[m]<"u"&&u[m]!==null?gm({param:f,value:u[m]}):null)??[])}return[i,...a]}function gm({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return K(Ke(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Bi(e.type);return Ie([e],[t])}H();function mr(e,{method:t}){let r={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:n,response:o,status:s,transport:i})=>{s==="success"&&t===n&&(r[o]=i.request)}),n=>r[n]||e.request}async function qi(e,t){let{address:r,abi:n,args:o,eventName:s,fromBlock:i,strict:a,toBlock:c}=t,u=mr(e,{method:"eth_newFilter"}),f=s?Pt({abi:n,args:o,eventName:s}):void 0,m=await e.request({method:"eth_newFilter",params:[{address:r,fromBlock:typeof i=="bigint"?C(i):i,toBlock:typeof c=="bigint"?C(c):c,topics:f}]});return{abi:n,args:o,eventName:s,id:m,request:u(m),strict:!!a,type:"event"}}he();Je();de();_();dr();Yr();Cs();var ox=3;function Ge(e,{abi:t,address:r,args:n,docsPath:o,functionName:s,sender:i}){let a=e instanceof kt?e:e instanceof g?e.walk(y=>"data"in y)||e.walk():{},{code:c,data:u,details:f,message:m,shortMessage:p}=a,d=e instanceof Ze?new ua({functionName:s}):[ox,Wt.code].includes(c)&&(u||f||m||p)?new Kr({abi:t,data:typeof u=="object"?u.data:u,functionName:s,message:a instanceof lr?f:p??m}):e;return new ca(d,{abi:t,args:n,contractAddress:r,docsPath:o,functionName:s,sender:i})}he();_();qr();dt();function Om(e){let t=K(`0x${e.substring(4)}`).substring(26);return qt(`0x${t}`)}We();ve();H();async function gd({hash:e,signature:t}){let r=Q(e)?e:N(e),{secp256k1:n}=await Promise.resolve().then(()=>(sf(),yd));return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){let{r:u,s:f,v:m,yParity:p}=t,d=Number(p??m),y=bd(d);return new n.Signature(re(u),re(f)).addRecoveryBit(y)}let i=Q(t)?t:N(t),a=se(`0x${i.slice(130)}`),c=bd(a);return n.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function bd(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Pa({hash:e,signature:t}){return Om(await gd({hash:e,signature:t}))}Ye();le();H();_();Zi();le();H();function bt(e,t="hex"){let r=wd(e),n=On(new Uint8Array(r.length));return r.encode(n),t==="hex"?j(n.bytes):n.bytes}function wd(e){return Array.isArray(e)?Gx(e.map(t=>wd(t))):Vx(e)}function Gx(e){let t=e.reduce((o,s)=>o+s.length,0),r=vd(t);return{length:t<=55?1+t:1+r+t,encode(o){t<=55?o.pushByte(192+t):(o.pushByte(247+r),r===1?o.pushUint8(t):r===2?o.pushUint16(t):r===3?o.pushUint24(t):o.pushUint32(t));for(let{encode:s}of e)s(o)}}}function Vx(e){let t=typeof e=="string"?ie(e):e,r=vd(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(o){t.length===1&&t[0]<128?o.pushBytes(t):t.length<=55?(o.pushByte(128+t.length),o.pushBytes(t)):(o.pushByte(183+r),r===1?o.pushUint8(t.length):r===2?o.pushUint16(t.length):r===3?o.pushUint24(t.length):o.pushUint32(t.length),o.pushBytes(t))}}}function vd(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new g("Length is too large.")}dt();function Ed(e){let{chainId:t,nonce:r,to:n}=e,o=e.contractAddress??e.address,s=K(Te(["0x05",bt([t?C(t):"0x",o,r?C(r):"0x"])]));return n==="bytes"?ie(s):s}async function Sa(e){let{authorization:t,signature:r}=e;return Pa({hash:Ed(t),signature:r??t})}H();Xi();Un();_();ht();var ka=class extends g{constructor(t,{account:r,docsPath:n,chain:o,data:s,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:m,value:p}){let d=Wr({from:r?.address,to:m,value:typeof p<"u"&&`${Hn(p)} ${o?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:typeof a<"u"&&`${xe(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${xe(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${xe(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:n,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}};Tr();Hs();function Ad(e,{docsPath:t,...r}){let n=(()=>{let o=Ir(e,r);return o instanceof tt?e:o})();return new ka(n,{docsPath:t,...r})}Us();cn();Ra();Pr();he();Un();_();var Ma=class extends g{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},Sr=class extends g{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},$a=class extends g{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${xe(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};ve();_();var ho=class extends g{constructor({blockHash:t,blockNumber:r}){let n="Block";t&&(n=`Block at hash "${t}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}};H();Ca();ve();Ca();var cf={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function un(e){let t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?se(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?se(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?cf[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=Yx(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}var Id=po("transaction",un);function Yx(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function Ls(e){let t=(e.transactions??[]).map(r=>typeof r=="string"?r:un(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}var Bd=po("block",Ls);async function Se(e,{blockHash:t,blockNumber:r,blockTag:n,includeTransactions:o}={}){let s=n??"latest",i=o??!1,a=r!==void 0?C(r):void 0,c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[a||s,i]},{dedupe:!!a}),!c)throw new ho({blockHash:t,blockNumber:r});return(e.chain?.formatters?.block?.format||Ls)(c)}async function xo(e){let t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Pd(e,t){return uf(e,t)}async function uf(e,t){let{block:r,chain:n=e.chain,request:o}=t||{};try{let s=n?.fees?.maxPriorityFeePerGas??n?.fees?.defaultPriorityFee;if(typeof s=="function"){let a=r||await k(e,Se,"getBlock")({}),c=await s({block:a,client:e,request:o});if(c===null)throw new Error;return c}if(typeof s<"u")return s;let i=await e.request({method:"eth_maxPriorityFeePerGas"});return re(i)}catch{let[s,i]=await Promise.all([r?Promise.resolve(r):k(e,Se,"getBlock")({}),k(e,xo,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new Sr;let a=i-s.baseFeePerGas;return a<0n?0n:a}}async function Sd(e,t){return Na(e,t)}async function Na(e,t){let{block:r,chain:n=e.chain,request:o,type:s="eip1559"}=t||{},i=await(async()=>typeof n?.fees?.baseFeeMultiplier=="function"?n.fees.baseFeeMultiplier({block:r,client:e,request:o}):n?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new Ma;let c=10**(i.toString().split(".")[1]?.length??0),u=p=>p*BigInt(Math.ceil(i*c))/BigInt(c),f=r||await k(e,Se,"getBlock")({});if(typeof n?.fees?.estimateFeesPerGas=="function"){let p=await n.fees.estimateFeesPerGas({block:r,client:e,multiply:u,request:o,type:s});if(p!==null)return p}if(s==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new Sr;let p=typeof o?.maxPriorityFeePerGas=="bigint"?o.maxPriorityFeePerGas:await uf(e,{block:f,chain:n,request:o}),d=u(f.baseFeePerGas);return{maxFeePerGas:o?.maxFeePerGas??d+p,maxPriorityFeePerGas:p}}return{gasPrice:o?.gasPrice??u(await k(e,xo,"getGasPrice")({}))}}ve();H();async function yo(e,{address:t,blockTag:r="latest",blockNumber:n}){let o=await e.request({method:"eth_getTransactionCount",params:[t,n?C(n):r]},{dedupe:!!n});return se(o)}le();H();function bo(e){let{kzg:t}=e,r=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(s=>ie(s)):e.blobs,o=[];for(let s of n)o.push(Uint8Array.from(t.blobToKzgCommitment(s)));return r==="bytes"?o:o.map(s=>j(s))}le();H();function go(e){let{kzg:t}=e,r=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(i=>ie(i)):e.blobs,o=typeof e.commitments[0]=="string"?e.commitments.map(i=>ie(i)):e.commitments,s=[];for(let i=0;i<n.length;i++){let a=n[i],c=o[i];s.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return r==="bytes"?s:s.map(i=>j(i))}H();Ou();We();le();H();function _s(e,t){let r=t||"hex",n=Qr(Q(e,{strict:!1})?Ke(e):e);return r==="bytes"?n:N(n)}function kd(e){let{commitment:t,version:r=1}=e,n=e.to??(typeof t=="string"?"hex":"bytes"),o=_s(t,"bytes");return o.set([r],0),n==="bytes"?o:j(o)}function za(e){let{commitments:t,version:r}=e,n=e.to??(typeof t[0]=="string"?"hex":"bytes"),o=[];for(let s of t)o.push(kd({commitment:s,to:n,version:r}));return o}_();var Oa=class extends g{constructor({maxSize:t,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}},wo=class extends g{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},Fa=class extends g{constructor({hash:t,size:r}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}},Ha=class extends g{constructor({hash:t,version:r}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}};Zi();ct();le();H();function Cd(e){let t=e.to??(typeof e.data=="string"?"hex":"bytes"),r=typeof e.data=="string"?ie(e.data):e.data,n=W(r);if(!n)throw new wo;if(n>761855)throw new Oa({maxSize:761855,size:n});let o=[],s=!0,i=0;for(;s;){let a=On(new Uint8Array(131072)),c=0;for(;c<4096;){let u=r.slice(i,i+31);if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),s=!1;break}c++,i+=31}o.push(a)}return t==="bytes"?o.map(a=>a.bytes):o.map(a=>j(a.bytes))}function Ua(e){let{data:t,kzg:r,to:n}=e,o=e.blobs??Cd({data:t,to:n}),s=e.commitments??bo({blobs:o,kzg:r,to:n}),i=e.proofs??go({blobs:o,commitments:s,kzg:r,to:n}),a=[];for(let c=0;c<o.length;c++)a.push({blob:o[c],commitment:s[c],proof:i[c]});return a}Pr();ht();function La(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new na({transaction:e})}ve();async function nt(e){let t=await e.request({method:"eth_chainId"},{dedupe:!0});return se(t)}var ff=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Rd=new Map;async function kr(e,t){let{account:r=e.account,blobs:n,chain:o,gas:s,kzg:i,nonce:a,nonceManager:c,parameters:u=ff,type:f}=t,m=r&&D(r),p={...t,...m?{from:m?.address}:{}},d;async function y(){return d||(d=await k(e,Se,"getBlock")({blockTag:"latest"}),d)}let b;async function l(){return b||(o?o.id:typeof t.chainId<"u"?t.chainId:(b=await k(e,nt,"getChainId")({}),b))}if(u.includes("nonce")&&typeof a>"u"&&m)if(c){let h=await l();p.nonce=await c.consume({address:m.address,chainId:h,client:e})}else p.nonce=await k(e,yo,"getTransactionCount")({address:m.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&n&&i){let h=bo({blobs:n,kzg:i});if(u.includes("blobVersionedHashes")){let x=za({commitments:h,to:"hex"});p.blobVersionedHashes=x}if(u.includes("sidecars")){let x=go({blobs:n,commitments:h,kzg:i}),w=Ua({blobs:n,commitments:h,proofs:x,to:"hex"});p.sidecars=w}}if(u.includes("chainId")&&(p.chainId=await l()),(u.includes("fees")||u.includes("type"))&&typeof f>"u")try{p.type=La(p)}catch{let h=Rd.get(e.uid);typeof h>"u"&&(h=typeof(await y())?.baseFeePerGas=="bigint",Rd.set(e.uid,h)),p.type=h?"eip1559":"legacy"}if(u.includes("fees"))if(p.type!=="legacy"&&p.type!=="eip2930"){if(typeof p.maxFeePerGas>"u"||typeof p.maxPriorityFeePerGas>"u"){let h=await y(),{maxFeePerGas:x,maxPriorityFeePerGas:w}=await Na(e,{block:h,chain:o,request:p});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<w)throw new $a({maxPriorityFeePerGas:w});p.maxPriorityFeePerGas=w,p.maxFeePerGas=x}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Sr;if(typeof t.gasPrice>"u"){let h=await y(),{gasPrice:x}=await Na(e,{block:h,chain:o,request:p,type:"legacy"});p.gasPrice=x}}return u.includes("gas")&&typeof s>"u"&&(p.gas=await k(e,vo,"estimateGas")({...p,account:m&&{address:m.address,type:"json-rpc"}})),He(p),delete p.parameters,p}H();async function _a(e,{address:t,blockNumber:r,blockTag:n="latest"}){let o=r?C(r):void 0,s=await e.request({method:"eth_getBalance",params:[t,o||n]});return BigInt(s)}async function vo(e,t){let{account:r=e.account}=t,n=r?D(r):void 0;try{let z=function(X){let{block:S,request:M,rpcStateOverride:R}=X;return e.request({method:"eth_estimateGas",params:R?[M,S??"latest",R]:S?[M,S]:[M]})},{accessList:o,authorizationList:s,blobs:i,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:f,gas:m,gasPrice:p,maxFeePerBlobGas:d,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:l,value:h,stateOverride:x,...w}=await kr(e,{...t,parameters:n?.type==="local"?void 0:["blobVersionedHashes"]}),I=(c?C(c):void 0)||u,T=mo(x),A=await(async()=>{if(w.to)return w.to;if(s&&s.length>0)return await Sa({authorization:s[0]}).catch(()=>{throw new g("`to` is required. Could not infer from `authorizationList`")})})();He(t);let P=e.chain?.formatters?.transactionRequest?.format,O=(P||rt)({...Br(w,{format:P}),from:n?.address,accessList:o,authorizationList:s,blobs:i,blobVersionedHashes:a,data:f,gas:m,gasPrice:p,maxFeePerBlobGas:d,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:l,to:A,value:h}),F=BigInt(await z({block:I,request:O,rpcStateOverride:T}));if(s){let X=await _a(e,{address:O.from}),S=await Promise.all(s.map(async M=>{let{address:R}=M,U=await z({block:I,request:{authorizationList:void 0,data:f,from:n?.address,to:R,value:C(X)},rpcStateOverride:T}).catch(()=>100000n);return 2n*BigInt(U)}));F+=S.reduce((M,R)=>M+R,0n)}return F}catch(o){throw Ad(o,{...t,account:n,chain:e.chain})}}async function Md(e,t){let{abi:r,address:n,args:o,functionName:s,dataSuffix:i,...a}=t,c=oe({abi:r,args:o,functionName:s});try{return await k(e,vo,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:n,...a})}catch(u){let f=a.account?D(a.account):void 0;throw Ge(u,{abi:r,address:n,args:o,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:f?.address})}}Nn();de();Eo();le();dt();Ts();de();ct();Ts();Su();Ki();_r();var $d="/docs/contract/decodeEventLog";function Ao(e){let{abi:t,data:r,strict:n,topics:o}=e,s=n??!0,[i,...a]=o;if(!i)throw new gi({docsPath:$d});let c=t.length===1?t[0]:t.find(b=>b.type==="event"&&i===pr(Re(b)));if(!(c&&"name"in c)||c.type!=="event")throw new Rn(i,{docsPath:$d});let{name:u,inputs:f}=c,m=f?.some(b=>!("name"in b&&b.name)),p=m?[]:{},d=f.filter(b=>"indexed"in b&&b.indexed);for(let b=0;b<d.length;b++){let l=d[b],h=a[b];if(!h)throw new Et({abiItem:c,param:l});p[m?b:l.name||b]=Qx({param:l,value:h})}let y=f.filter(b=>!("indexed"in b&&b.indexed));if(y.length>0){if(r&&r!=="0x")try{let b=Vr(y,r);if(b)if(m)p=[...p,...b];else for(let l=0;l<y.length;l++)p[y[l].name]=b[l]}catch(b){if(s)throw b instanceof kn||b instanceof zn?new ut({abiItem:c,data:r,params:y,size:W(r)}):b}else if(s)throw new ut({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(p).length>0?p:void 0}}function Qx({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Vr([e],t)||[])[0]}function To(e){let{abi:t,args:r,logs:n,strict:o=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return n.map(i=>{try{let a=t.find(u=>u.type==="event"&&i.topics[0]===pr(u));if(!a)return null;let c=Ao({...i,abi:[a],strict:o});return s&&!s.includes(c.eventName)||!ey({args:c.args,inputs:a.inputs,matchArgs:r})?null:{...c,...i}}catch(a){let c,u;if(a instanceof Rn)return null;if(a instanceof ut||a instanceof Et){if(o)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(f=>!("name"in f&&f.name))}return{...i,args:u?[]:{},eventName:c}}}).filter(Boolean)}function ey(e){let{args:t,inputs:r,matchArgs:n}=e;if(!n)return!0;if(!t)return!1;function o(s,i,a){try{return s.type==="address"?Nt(i,a):s.type==="string"||s.type==="bytes"?K(Ke(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(n)?n.every((s,i)=>{if(s==null)return!0;let a=r[i];return a?(Array.isArray(s)?s:[s]).some(u=>o(a,u,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof n=="object"&&!Array.isArray(n)?Object.entries(n).every(([s,i])=>{if(i==null)return!0;let a=r.find(u=>u.name===s);return a?(Array.isArray(i)?i:[i]).some(u=>o(a,u,t[s])):!1}):!1}H();function ke(e,{args:t,eventName:r}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...r?{args:t,eventName:r}:{}}}async function Io(e,{address:t,blockHash:r,fromBlock:n,toBlock:o,event:s,events:i,args:a,strict:c}={}){let u=c??!1,f=i??(s?[s]:void 0),m=[];f&&(m=[f.flatMap(b=>Pt({abi:[b],eventName:b.name,args:i?void 0:a}))],s&&(m=m[0]));let p;r?p=await e.request({method:"eth_getLogs",params:[{address:t,topics:m,blockHash:r}]}):p=await e.request({method:"eth_getLogs",params:[{address:t,topics:m,fromBlock:typeof n=="bigint"?C(n):n,toBlock:typeof o=="bigint"?C(o):o}]});let d=p.map(y=>ke(y));return f?To({abi:f,args:a,logs:d,strict:u}):d}async function Da(e,t){let{abi:r,address:n,args:o,blockHash:s,eventName:i,fromBlock:a,toBlock:c,strict:u}=t,f=i?Bt({abi:r,name:i}):void 0,m=f?void 0:r.filter(p=>p.type==="event");return k(e,Io,"getLogs")({address:n,args:o,blockHash:s,event:f,events:m,fromBlock:a,toBlock:c,strict:u})}Cr();Je();Bo();async function Ee(e,t){let{abi:r,address:n,args:o,functionName:s,...i}=t,a=oe({abi:r,args:o,functionName:s});try{let{data:c}=await k(e,zt,"call")({...i,data:a,to:n});return Ue({abi:r,args:o,functionName:s,data:c||"0x"})}catch(c){throw Ge(c,{abi:r,address:n,args:o,docsPath:"/docs/contract/readContract",functionName:s})}}he();Cr();Je();Bo();async function Gd(e,t){let{abi:r,address:n,args:o,dataSuffix:s,functionName:i,...a}=t,c=a.account?D(a.account):e.account,u=oe({abi:r,args:o,functionName:i});try{let{data:f}=await k(e,zt,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:n,...a,account:c}),m=Ue({abi:r,args:o,functionName:i,data:f||"0x"}),p=r.filter(d=>"name"in d&&d.name===t.functionName);return{result:m,request:{abi:p,address:n,args:o,dataSuffix:s,functionName:i,...a,account:c}}}catch(f){throw Ge(f,{abi:r,address:n,args:o,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c?.address})}}de();Cs();var wf=new Map,Vd=new Map,cy=0;function Le(e,t,r){let n=++cy,o=()=>wf.get(e)||[],s=()=>{let f=o();wf.set(e,f.filter(m=>m.id!==n))},i=()=>{let f=o();if(!f.some(p=>p.id===n))return;let m=Vd.get(e);f.length===1&&m&&m(),s()},a=o();if(wf.set(e,[...a,{id:n,fns:t}]),a&&a.length>0)return i;let c={};for(let f in t)c[f]=(...m)=>{let p=o();if(p.length!==0)for(let d of p)d.fns[f]?.(...m)};let u=r(c);return typeof u=="function"&&Vd.set(e,u),i}async function Gs(e){return new Promise(t=>setTimeout(t,e))}function Ot(e,{emitOnBegin:t,initialWaitTime:r,interval:n}){let o=!0,s=()=>o=!1;return(async()=>{let a;t&&(a=await e({unpoll:s}));let c=await r?.(a)??n;await Gs(c);let u=async()=>{o&&(await e({unpoll:s}),await Gs(n),u())};u()})(),s}Ne();var uy=new Map,fy=new Map;function Wd(e){let t=(o,s)=>({clear:()=>s.delete(o),get:()=>s.get(o),set:i=>s.set(o,i)}),r=t(e,uy),n=t(e,fy);return{clear:()=>{r.clear(),n.clear()},promise:r,response:n}}async function Zd(e,{cacheKey:t,cacheTime:r=Number.POSITIVE_INFINITY}){let n=Wd(t),o=n.response.get();if(o&&r>0&&new Date().getTime()-o.created.getTime()<r)return o.data;let s=n.promise.get();s||(s=e(),n.promise.set(s));try{let i=await s;return n.response.set({created:new Date,data:i}),i}finally{n.promise.clear()}}var py=e=>`blockNumber.${e}`;async function Ft(e,{cacheTime:t=e.cacheTime}={}){let r=await Zd(()=>e.request({method:"eth_blockNumber"}),{cacheKey:py(e.uid),cacheTime:t});return BigInt(r)}async function Rr(e,{filter:t}){let r="strict"in t&&t.strict,n=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof n[0]=="string")return n;let o=n.map(s=>ke(s));return!("abi"in t)||!t.abi?o:To({abi:t.abi,logs:o,strict:r})}async function Mr(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function Kd(e,t){let{abi:r,address:n,args:o,batch:s=!0,eventName:i,fromBlock:a,onError:c,onLogs:u,poll:f,pollingInterval:m=e.pollingInterval,strict:p}=t;return(typeof f<"u"?f:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))?(()=>{let l=p??!1,h=q(["watchContractEvent",n,o,s,e.uid,i,m,l,a]);return Le(h,{onLogs:u,onError:c},x=>{let w;a!==void 0&&(w=a-1n);let v,I=!1,T=Ot(async()=>{if(!I){try{v=await k(e,qi,"createContractEventFilter")({abi:r,address:n,args:o,eventName:i,strict:l,fromBlock:a})}catch{}I=!0;return}try{let A;if(v)A=await k(e,Rr,"getFilterChanges")({filter:v});else{let P=await k(e,Ft,"getBlockNumber")({});w&&w<P?A=await k(e,Da,"getContractEvents")({abi:r,address:n,args:o,eventName:i,fromBlock:w+1n,toBlock:P,strict:l}):A=[],w=P}if(A.length===0)return;if(s)x.onLogs(A);else for(let P of A)x.onLogs([P])}catch(A){v&&A instanceof Ct&&(I=!1),x.onError?.(A)}},{emitOnBegin:!0,interval:m});return async()=>{v&&await k(e,Mr,"uninstallFilter")({filter:v}),T()}})})():(()=>{let l=p??!1,h=q(["watchContractEvent",n,o,s,e.uid,i,m,l]),x=!0,w=()=>x=!1;return Le(h,{onLogs:u,onError:c},v=>((async()=>{try{let I=(()=>{if(e.transport.type==="fallback"){let P=e.transport.transports.find(B=>B.config.type==="webSocket");return P?P.value:e.transport}return e.transport})(),T=i?Pt({abi:r,eventName:i,args:o}):[],{unsubscribe:A}=await I.subscribe({params:["logs",{address:n,topics:T}],onData(P){if(!x)return;let B=P.result;try{let{eventName:O,args:z}=Ao({abi:r,data:B.data,topics:B.topics,strict:p}),F=ke(B,{args:z,eventName:O});v.onLogs([F])}catch(O){let z,F;if(O instanceof ut||O instanceof Et){if(p)return;z=O.abiItem.name,F=O.abiItem.inputs?.some(S=>!("name"in S&&S.name))}let X=ke(B,{args:F?[]:{},eventName:z});v.onLogs([X])}},onError(P){v.onError?.(P)}});w=A,x||w()}catch(I){c?.(I)}})(),()=>w()))})()}he();_();var Ce=class extends g{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}},$r=class extends g{constructor({docsPath:t,metaMessages:r,type:n}){super(`Account type "${n}" is not supported.`,{docsPath:t,metaMessages:r,name:"AccountTypeNotSupportedError"})}};Je();he();_();qs();function tc({chain:e,currentChainId:t}){if(!e)throw new Wa;if(t!==e.id)throw new Va({chain:e,currentChainId:t})}Tr();ht();Hs();function Yd(e,{docsPath:t,...r}){let n=(()=>{let o=Ir(e,r);return o instanceof tt?e:o})();return new sa(n,{docsPath:t,...r})}Us();cn();Is();Pr();async function Po(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}var vf=new Tt(128);async function So(e,t){let{account:r=e.account,chain:n=e.chain,accessList:o,authorizationList:s,blobs:i,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,value:y,...b}=t;if(typeof r>"u")throw new Ce({docsPath:"/docs/actions/wallet/sendTransaction"});let l=r?D(r):null;try{He(t);let h=await(async()=>{if(t.to)return t.to;if(t.to!==null&&s&&s.length>0)return await Sa({authorization:s[0]}).catch(()=>{throw new g("`to` is required. Could not infer from `authorizationList`.")})})();if(l?.type==="json-rpc"||l===null){let x;n!==null&&(x=await k(e,nt,"getChainId")({}),tc({currentChainId:x,chain:n}));let w=e.chain?.formatters?.transactionRequest?.format,I=(w||rt)({...Br(b,{format:w}),accessList:o,authorizationList:s,blobs:i,chainId:x,data:a,from:l?.address,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,to:h,value:y}),T=vf.get(e.uid),A=T?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:A,params:[I]},{retryCount:0})}catch(P){if(T===!1)throw P;let B=P;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[I]},{retryCount:0}).then(O=>(vf.set(e.uid,!0),O)).catch(O=>{let z=O;throw z.name==="MethodNotFoundRpcError"||z.name==="MethodNotSupportedRpcError"?(vf.set(e.uid,!1),B):z});throw B}}if(l?.type==="local"){let x=await k(e,kr,"prepareTransactionRequest")({account:l,accessList:o,authorizationList:s,blobs:i,chain:n,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:d,nonceManager:l.nonceManager,parameters:[...ff,"sidecars"],value:y,...b,to:h}),w=n?.serializers?.transaction,v=await l.signTransaction(x,{serializer:w});return await k(e,Po,"sendRawTransaction")({serializedTransaction:v})}throw l?.type==="smart"?new $r({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new $r({docsPath:"/docs/actions/wallet/sendTransaction",type:l?.type})}catch(h){throw h instanceof $r?h:Yd(h,{...t,account:l,chain:t.chain||void 0})}}async function Jd(e,t){let{abi:r,account:n=e.account,address:o,args:s,dataSuffix:i,functionName:a,...c}=t;if(typeof n>"u")throw new Ce({docsPath:"/docs/contract/writeContract"});let u=n?D(n):null,f=oe({abi:r,args:s,functionName:a});try{return await k(e,So,"sendTransaction")({data:`${f}${i?i.replace("0x",""):""}`,to:o,account:u,...c})}catch(m){throw Ge(m,{abi:r,address:o,args:s,docsPath:"/docs/contract/writeContract",functionName:a,sender:u?.address})}}_();var rc=class extends g{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function Xd(e,t){let{address:r,factory:n,factoryData:o}=t;try{let[s,i,a,c,u,f,m]=await k(e,Ee,"readContract")({abi:my,address:r,functionName:"eip712Domain",factory:n,factoryData:o});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:u,salt:f},extensions:m,fields:s}}catch(s){let i=s;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new rc({address:r}):i}}var my=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];H();async function Qd(e,{chain:t}){let{id:r,name:n,nativeCurrency:o,rpcUrls:s,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:C(r),chainName:n,nativeCurrency:o,rpcUrls:s.default.http,blockExplorerUrls:i?Object.values(i).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}he();var nc=256,oc;function sc(e=11){if(!oc||nc+e>256*2){oc="",nc=0;for(let t=0;t<256;t++)oc+=(256+Math.random()*256|0).toString(16).substring(1)}return oc.substring(nc,nc+++e)}function ic(e){let{batch:t,cacheTime:r=e.pollingInterval??4e3,ccipRead:n,key:o="base",name:s="Base Client",pollingInterval:i=4e3,type:a="base"}=e,c=e.chain,u=e.account?D(e.account):void 0,{config:f,request:m,value:p}=e.transport({chain:c,pollingInterval:i}),d={...f,...p},y={account:u,batch:t,cacheTime:r,ccipRead:n,chain:c,key:o,name:s,pollingInterval:i,request:m,transport:d,type:a,uid:sc()};function b(l){return h=>{let x=h(l);for(let v in y)delete x[v];let w={...l,...x};return Object.assign(w,{extend:b(w)})}}return Object.assign(y,{extend:b(y)})}_();Yr();Cs();H();Is();var ac=new Tt(8192);function el(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(ac.get(r))return ac.get(r);let n=e().finally(()=>ac.delete(r));return ac.set(r,n),n}function Vs(e,{delay:t=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((o,s)=>{let i=async({count:a=0}={})=>{let c=async({error:u})=>{let f=typeof t=="function"?t({count:a,error:u}):t;f&&await Gs(f),i({count:a+1})};try{let u=await e();o(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});s(u)}};i()})}Ne();function tl(e,t={}){return async(r,n={})=>{let{dedupe:o=!1,methods:s,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...n},{method:u}=r;if(s?.exclude?.includes(u))throw new xr(new Error("method not supported"),{method:u});if(s?.include&&!s.include.includes(u))throw new xr(new Error("method not supported"),{method:u});let f=o?ft(`${c}.${q(r)}`):void 0;return el(()=>Vs(async()=>{try{return await e(r)}catch(m){let p=m;switch(p.code){case jn.code:throw new jn(p);case qn.code:throw new qn(p);case Gn.code:throw new Gn(p,{method:r.method});case Vn.code:throw new Vn(p);case Wt.code:throw new Wt(p);case Ct.code:throw new Ct(p);case Wn.code:throw new Wn(p);case Zn.code:throw new Zn(p);case Kn.code:throw new Kn(p);case xr.code:throw new xr(p,{method:r.method});case Jr.code:throw new Jr(p);case Yn.code:throw new Yn(p);case Xr.code:throw new Xr(p);case Jn.code:throw new Jn(p);case Xn.code:throw new Xn(p);case Qn.code:throw new Qn(p);case eo.code:throw new eo(p);case to.code:throw new to(p);case 5e3:throw new Xr(p);default:throw m instanceof g?m:new pa(p)}}},{delay:({count:m,error:p})=>{if(p&&p instanceof Xe){let d=p?.headers?.get("Retry-After");if(d?.match(/\d/))return Number.parseInt(d)*1e3}return~~(1<<m)*i},retryCount:a,shouldRetry:({error:m})=>dy(m)}),{enabled:o,id:f})}}function dy(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===Jr.code||e.code===Wt.code:e instanceof Xe&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function cc({key:e,methods:t,name:r,request:n,retryCount:o=3,retryDelay:s=150,timeout:i,type:a},c){let u=sc();return{config:{key:e,methods:t,name:r,request:n,retryCount:o,retryDelay:s,timeout:i,type:a},request:tl(n,{methods:t,retryCount:o,retryDelay:s,uid:u}),value:c}}function Ef(e,t={}){let{key:r="custom",methods:n,name:o="Custom Provider",retryDelay:s}=t;return({retryCount:i})=>cc({key:r,methods:n,name:o,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:s,type:"custom"})}Yr();_();var uc=class extends g{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};gf();Yr();function rl(e,{errorInstance:t=new Error("timed out"),timeout:r,signal:n}){return new Promise((o,s)=>{(async()=>{let i;try{let a=new AbortController;r>0&&(i=setTimeout(()=>{n?a.abort():s(t)},r)),o(await e({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&s(t),s(a)}finally{clearTimeout(i)}})()})}Ne();function ly(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var Af=ly();function nl(e,t={}){return{async request(r){let{body:n,onRequest:o=t.onRequest,onResponse:s=t.onResponse,timeout:i=t.timeout??1e4}=r,a={...t.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:u,signal:f}=a;try{let m=await rl(async({signal:d})=>{let y={...a,body:Array.isArray(n)?q(n.map(x=>({jsonrpc:"2.0",id:x.id??Af.take(),...x}))):q({jsonrpc:"2.0",id:n.id??Af.take(),...n}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:f||(i>0?d:null)},b=new Request(e,y),l=await o?.(b,y)??{...y,url:e};return await fetch(l.url??e,l)},{errorInstance:new ks({body:n,url:e}),timeout:i,signal:!0});s&&await s(m);let p;if(m.headers.get("Content-Type")?.startsWith("application/json"))p=await m.json();else{p=await m.text();try{p=JSON.parse(p||"{}")}catch(d){if(m.ok)throw d;p={error:p}}}if(!m.ok)throw new Xe({body:n,details:q(p.error)||m.statusText,headers:m.headers,status:m.status,url:e});return p}catch(m){throw m instanceof Xe||m instanceof ks?m:new Xe({body:n,cause:m,url:e})}}}}function Tf(e,t={}){let{batch:r,fetchOptions:n,key:o="http",methods:s,name:i="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:u,raw:f}=t;return({chain:m,retryCount:p,timeout:d})=>{let{batchSize:y=1e3,wait:b=0}=typeof r=="object"?r:{},l=t.retryCount??p,h=d??t.timeout??1e4,x=e||m?.rpcUrls.default.http[0];if(!x)throw new uc;let w=nl(x,{fetchOptions:n,onRequest:a,onResponse:c,timeout:h});return cc({key:o,methods:s,name:i,async request({method:v,params:I}){let T={method:v,params:I},{schedule:A}=Ja({id:x,wait:b,shouldSplitBatch(z){return z.length>y},fn:z=>w.request({body:z}),sort:(z,F)=>z.id-F.id}),P=async z=>r?A(z):[await w.request({body:z})],[{error:B,result:O}]=await P(T);if(f)return{error:B,result:O};if(B)throw new lr({body:T,error:B,url:x});return O},retryCount:l,retryDelay:u,timeout:h,type:"http"},{fetchOptions:n,url:x})}}fn();Cr();Je();ln();$n();H();Vi();_();dr();function ko(e,t){if(!(e instanceof g))return!1;let r=e.walk(n=>n instanceof Kr);return r instanceof Kr?!!(r.data?.errorName==="ResolverNotFound"||r.data?.errorName==="ResolverWildcardNotSupported"||r.data?.errorName==="ResolverNotContract"||r.data?.errorName==="ResolverError"||r.data?.errorName==="HttpError"||r.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&r.reason===Gi[50]):!1}Ye();le();H();dt();We();function fc(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;let t=`0x${e.slice(1,65)}`;return Q(t)?t:null}function Co(e){let t=new Uint8Array(32).fill(0);if(!e)return j(t);let r=e.split(".");for(let n=r.length-1;n>=0;n-=1){let o=fc(r[n]),s=o?Ke(o):K(pt(r[n]),"bytes");t=K($e([t,s]),"bytes")}return j(t)}le();function ol(e){return`[${e.slice(2)}]`}le();H();dt();function sl(e){let t=new Uint8Array(32).fill(0);return e?fc(e)||K(pt(e)):j(t)}function Nr(e){let t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);let r=new Uint8Array(pt(t).byteLength+2),n=0,o=t.split(".");for(let s=0;s<o.length;s++){let i=pt(o[s]);i.byteLength>255&&(i=pt(ol(sl(o[s])))),r[n]=i.length,r.set(i,n+1),n+=i.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}async function il(e,{blockNumber:t,blockTag:r,coinType:n,name:o,gatewayUrls:s,strict:i,universalResolverAddress:a}){let c=a;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=ot({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{let u=oe({abi:df,functionName:"addr",...n!=null?{args:[Co(o),BigInt(n)]}:{args:[Co(o)]}}),f={address:c,abi:ja,functionName:"resolve",args:[N(Nr(o)),u],blockNumber:t,blockTag:r},m=k(e,Ee,"readContract"),p=s?await m({...f,args:[...f.args,s]}):await m(f);if(p[0]==="0x")return null;let d=Ue({abi:df,args:n!=null?[Co(o),BigInt(n)]:void 0,functionName:"addr",data:p[0]});return d==="0x"||we(d)==="0x00"?null:d}catch(u){if(i)throw u;if(ko(u,"resolve"))return null;throw u}}_();var pc=class extends g{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}},zr=class extends g{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}},Ro=class extends g{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},mc=class extends g{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var hy=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,xy=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,yy=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,by=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function gy(e){try{let t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(r=>{let n=new Image;n.onload=()=>{r(!0)},n.onerror=()=>{r(!1)},n.src=e})}}function al(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function If({uri:e,gatewayUrls:t}){let r=yy.test(e);if(r)return{uri:e,isOnChain:!0,isEncoded:r};let n=al(t?.ipfs,"https://ipfs.io"),o=al(t?.arweave,"https://arweave.net"),s=e.match(hy),{protocol:i,subpath:a,target:c,subtarget:u=""}=s?.groups||{},f=i==="ipns:/"||a==="ipns/",m=i==="ipfs:/"||a==="ipfs/"||xy.test(e);if(e.startsWith("http")&&!f&&!m){let d=e;return t?.arweave&&(d=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:d,isOnChain:!1,isEncoded:!1}}if((f||m)&&c)return{uri:`${n}/${f?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${o}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let p=e.replace(by,"");if(p.startsWith("<svg")&&(p=`data:image/svg+xml;base64,${btoa(p)}`),p.startsWith("data:")||p.startsWith("{"))return{uri:p,isOnChain:!0,isEncoded:!1};throw new Ro({uri:e})}function Bf(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new pc({data:e});return e.image||e.image_url||e.image_data}async function cl({gatewayUrls:e,uri:t}){try{let r=await fetch(t).then(o=>o.json());return await dc({gatewayUrls:e,uri:Bf(r)})}catch{throw new Ro({uri:t})}}async function dc({gatewayUrls:e,uri:t}){let{uri:r,isOnChain:n}=If({uri:t,gatewayUrls:e});if(n||await gy(r))return r;throw new Ro({uri:t})}function ul(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[r,n,o]=t.split("/"),[s,i]=r.split(":"),[a,c]=n.split(":");if(!s||s.toLowerCase()!=="eip155")throw new zr({reason:"Only EIP-155 supported"});if(!i)throw new zr({reason:"Chain ID not found"});if(!c)throw new zr({reason:"Contract address not found"});if(!o)throw new zr({reason:"Token ID not found"});if(!a)throw new zr({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i),namespace:a.toLowerCase(),contractAddress:c,tokenID:o}}async function fl(e,{nft:t}){if(t.namespace==="erc721")return Ee(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Ee(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new mc({namespace:t.namespace})}async function pl(e,{gatewayUrls:t,record:r}){return/eip155:/i.test(r)?wy(e,{gatewayUrls:t,record:r}):dc({uri:r,gatewayUrls:t})}async function wy(e,{gatewayUrls:t,record:r}){let n=ul(r),o=await fl(e,{nft:n}),{uri:s,isOnChain:i,isEncoded:a}=If({uri:o,gatewayUrls:t});if(i&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){let u=a?atob(s.replace("data:application/json;base64,","")):s,f=JSON.parse(u);return dc({uri:Bf(f),gatewayUrls:t})}let c=n.tokenID;return n.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),cl({gatewayUrls:t,uri:s.replace(/(?:0x)?{id}/,c)})}fn();Cr();Je();ln();H();async function lc(e,{blockNumber:t,blockTag:r,name:n,key:o,gatewayUrls:s,strict:i,universalResolverAddress:a}){let c=a;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=ot({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{let u={address:c,abi:ja,functionName:"resolve",args:[N(Nr(n)),oe({abi:mf,functionName:"text",args:[Co(n),o]})],blockNumber:t,blockTag:r},f=k(e,Ee,"readContract"),m=s?await f({...u,args:[...u.args,s]}):await f(u);if(m[0]==="0x")return null;let p=Ue({abi:mf,functionName:"text",data:m[0]});return p===""?null:p}catch(u){if(i)throw u;if(ko(u,"resolve"))return null;throw u}}async function ml(e,{blockNumber:t,blockTag:r,assetGatewayUrls:n,name:o,gatewayUrls:s,strict:i,universalResolverAddress:a}){let c=await k(e,lc,"getEnsText")({blockNumber:t,blockTag:r,key:"avatar",name:o,universalResolverAddress:a,gatewayUrls:s,strict:i});if(!c)return null;try{return await pl(e,{record:c,gatewayUrls:n})}catch{return null}}fn();ln();H();async function dl(e,{address:t,blockNumber:r,blockTag:n,gatewayUrls:o,strict:s,universalResolverAddress:i}){let a=i;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=ot({blockNumber:r,chain:e.chain,contract:"ensUniversalResolver"})}let c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{let u={address:a,abi:zd,functionName:"reverse",args:[N(Nr(c))],blockNumber:r,blockTag:n},f=k(e,Ee,"readContract"),[m,p]=o?await f({...u,args:[...u.args,o]}):await f(u);return t.toLowerCase()!==p.toLowerCase()?null:m}catch(u){if(s)throw u;if(ko(u,"reverse"))return null;throw u}}ln();H();async function ll(e,{blockNumber:t,blockTag:r,name:n,universalResolverAddress:o}){let s=o;if(!s){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");s=ot({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}let[i]=await k(e,Ee,"readContract")({address:s,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[N(Nr(n))],blockNumber:t,blockTag:r});return i}Bo();he();H();xf();Us();cn();Pr();async function hc(e,t){let{account:r=e.account,blockNumber:n,blockTag:o="latest",blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:m,to:p,value:d,...y}=t,b=r?D(r):void 0;try{He(t);let h=(n?C(n):void 0)||o,x=e.chain?.formatters?.transactionRequest?.format,v=(x||rt)({...Br(y,{format:x}),from:b?.address,blobs:s,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:m,to:p,value:d}),I=await e.request({method:"eth_createAccessList",params:[v,h]});return{accessList:I.accessList,gasUsed:BigInt(I.gasUsed)}}catch(l){throw Ka(l,{...t,account:b,chain:e.chain})}}async function hl(e){let t=mr(e,{method:"eth_newBlockFilter"}),r=await e.request({method:"eth_newBlockFilter"});return{id:r,request:t(r),type:"block"}}H();async function xc(e,{address:t,args:r,event:n,events:o,fromBlock:s,strict:i,toBlock:a}={}){let c=o??(n?[n]:void 0),u=mr(e,{method:"eth_newFilter"}),f=[];c&&(f=[c.flatMap(d=>Pt({abi:[d],eventName:d.name,args:r}))],n&&(f=f[0]));let m=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof s=="bigint"?C(s):s,toBlock:typeof a=="bigint"?C(a):a,...f.length?{topics:f}:{}}]});return{abi:c,args:r,eventName:n?n.name:void 0,fromBlock:s,id:m,request:u(m),strict:!!i,toBlock:a,type:"event"}}async function yc(e){let t=mr(e,{method:"eth_newPendingTransactionFilter"}),r=await e.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:t(r),type:"transaction"}}async function xl(e){let t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}ve();H();async function yl(e,{blockHash:t,blockNumber:r,blockTag:n="latest"}={}){let o=r!==void 0?C(r):void 0,s;return t?s=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):s=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[o||n]},{dedupe:!!o}),se(s)}H();async function Pf(e,{address:t,blockNumber:r,blockTag:n="latest"}){let o=r!==void 0?C(r):void 0,s=await e.request({method:"eth_getCode",params:[t,o||n]},{dedupe:!!o});if(s!=="0x")return s}H();function bl(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(r=>BigInt(r)))}}async function gl(e,{blockCount:t,blockNumber:r,blockTag:n="latest",rewardPercentiles:o}){let s=r?C(r):void 0,i=await e.request({method:"eth_feeHistory",params:[C(t),s||n,o]},{dedupe:!!s});return bl(i)}async function wl(e,{filter:t}){let r=t.strict??!1,o=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(s=>ke(s));return t.abi?To({abi:t.abi,logs:o,strict:r}):o}H();function Mo(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}de();At();Ne();_();var bc=class extends g{constructor({domain:t}){super(`Invalid domain "${q(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},gc=class extends g{constructor({primaryType:t,types:r}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},wc=class extends g{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};lt();ct();H();Tu();Vt();Ye();H();dt();function vl(e){let{domain:t={},message:r,primaryType:n}=e,o={EIP712Domain:Ec({domain:t}),...e.types};vc({domain:t,message:r,primaryType:n,types:o});let s=["0x1901"];return t&&s.push(vy({domain:t,types:o})),n!=="EIP712Domain"&&s.push(El({data:r,primaryType:n,types:o})),K($e(s))}function vy({domain:e,types:t}){return El({data:e,primaryType:"EIP712Domain",types:t})}function El({data:e,primaryType:t,types:r}){let n=Al({data:e,primaryType:t,types:r});return K(n)}function Al({data:e,primaryType:t,types:r}){let n=[{type:"bytes32"}],o=[Ey({primaryType:t,types:r})];for(let s of r[t]){let[i,a]=Il({types:r,name:s.name,type:s.type,value:e[s.name]});n.push(i),o.push(a)}return Ie(n,o)}function Ey({primaryType:e,types:t}){let r=N(Ay({primaryType:e,types:t}));return K(r)}function Ay({primaryType:e,types:t}){let r="",n=Tl({primaryType:e,types:t});n.delete(e);let o=[e,...Array.from(n).sort()];for(let s of o)r+=`${s}(${t[s].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return r}function Tl({primaryType:e,types:t},r=new Set){let o=e.match(/^\w*/u)?.[0];if(r.has(o)||t[o]===void 0)return r;r.add(o);for(let s of t[o])Tl({primaryType:s.type,types:t},r);return r}function Il({types:e,name:t,type:r,value:n}){if(e[r]!==void 0)return[{type:"bytes32"},K(Al({data:n,primaryType:r,types:e}))];if(r==="bytes")return n=`0x${(n.length%2?"0":"")+n.slice(2)}`,[{type:"bytes32"},K(n)];if(r==="string")return[{type:"bytes32"},K(N(n))];if(r.lastIndexOf("]")===r.length-1){let o=r.slice(0,r.lastIndexOf("[")),s=n.map(i=>Il({name:t,type:o,types:e,value:i}));return[{type:"bytes32"},K(Ie(s.map(([i])=>i),s.map(([,i])=>i)))]}return[{type:r},n]}Ne();function Bl(e){let{domain:t,message:r,primaryType:n,types:o}=e,s=(c,u)=>{let f={...u};for(let m of c){let{name:p,type:d}=m;d==="address"&&(f[p]=f[p].toLowerCase())}return f},i=o.EIP712Domain?t?s(o.EIP712Domain,t):{}:{},a=(()=>{if(n!=="EIP712Domain")return s(o[n],r)})();return q({domain:i,message:a,primaryType:n,types:o})}function vc(e){let{domain:t,message:r,primaryType:n,types:o}=e,s=(i,a)=>{for(let c of i){let{name:u,type:f}=c,m=a[u],p=f.match(Di);if(p&&(typeof m=="number"||typeof m=="bigint")){let[b,l,h]=p;C(m,{signed:l==="int",size:Number.parseInt(h)/8})}if(f==="address"&&typeof m=="string"&&!Y(m))throw new ee({address:m});let d=f.match(xm);if(d){let[b,l]=d;if(l&&W(m)!==Number.parseInt(l))throw new Ei({expectedSize:Number.parseInt(l),givenSize:W(m)})}let y=o[f];y&&(Ty(f),s(y,m))}};if(o.EIP712Domain&&t){if(typeof t!="object")throw new bc({domain:t});s(o.EIP712Domain,t)}if(n!=="EIP712Domain")if(o[n])s(o[n],r);else throw new gc({primaryType:n,types:o})}function Ec({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Ty(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new wc({type:e})}Je();H();ht();Ye();$n();H();af();At();_();qs();Tr();lt();ct();Gr();ve();function Pl(e){let{authorizationList:t}=e;if(t)for(let r of t){let{chainId:n}=r,o=r.address;if(!Y(o))throw new ee({address:o});if(n<0)throw new mn({chainId:n})}Ac(e)}function Sl(e){let{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new wo;for(let r of t){let n=W(r),o=se(Gt(r,0,1));if(n!==32)throw new Fa({hash:r,size:n});if(o!==1)throw new Ha({hash:r,version:o})}}Ac(e)}function Ac(e){let{chainId:t,maxPriorityFeePerGas:r,maxFeePerGas:n,to:o}=e;if(t<=0)throw new mn({chainId:t});if(o&&!Y(o))throw new ee({address:o});if(n&&n>lo)throw new et({maxFeePerGas:n});if(r&&n&&r>n)throw new $t({maxFeePerGas:n,maxPriorityFeePerGas:r})}function kl(e){let{chainId:t,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:o,to:s}=e;if(t<=0)throw new mn({chainId:t});if(s&&!Y(s))throw new ee({address:s});if(r||o)throw new g("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>lo)throw new et({maxFeePerGas:n})}function Cl(e){let{chainId:t,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:o,to:s}=e;if(s&&!Y(s))throw new ee({address:s});if(typeof t<"u"&&t<=0)throw new mn({chainId:t});if(r||o)throw new g("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>lo)throw new et({maxFeePerGas:n})}At();ht();lt();function Ws(e){if(!e||e.length===0)return[];let t=[];for(let r=0;r<e.length;r++){let{address:n,storageKeys:o}=e[r];for(let s=0;s<o.length;s++)if(o[s].length-2!==64)throw new oa({storageKey:o[s]});if(!Y(n,{strict:!1}))throw new ee({address:n});t.push([n,o])}return t}function Rl(e,t){let r=La(e);return r==="eip1559"?Py(e,t):r==="eip2930"?Sy(e,t):r==="eip4844"?By(e,t):r==="eip7702"?Iy(e,t):ky(e,t)}function Iy(e,t){let{authorizationList:r,chainId:n,gas:o,nonce:s,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:f,data:m}=e;Pl(e);let p=Ws(f),d=Ml(r);return Te(["0x04",bt([N(n),s?N(s):"0x",u?N(u):"0x",c?N(c):"0x",o?N(o):"0x",i??"0x",a?N(a):"0x",m??"0x",p,d,...$o(e,t)])])}function By(e,t){let{chainId:r,gas:n,nonce:o,to:s,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:f,data:m}=e;Sl(e);let p=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof p>"u"||typeof d>"u")){let w=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(T=>j(T)),v=e.kzg,I=bo({blobs:w,kzg:v});if(typeof p>"u"&&(p=za({commitments:I})),typeof d>"u"){let T=go({blobs:w,commitments:I,kzg:v});d=Ua({blobs:w,commitments:I,proofs:T})}}let y=Ws(f),b=[N(r),o?N(o):"0x",u?N(u):"0x",c?N(c):"0x",n?N(n):"0x",s??"0x",i?N(i):"0x",m??"0x",y,a?N(a):"0x",p??[],...$o(e,t)],l=[],h=[],x=[];if(d)for(let w=0;w<d.length;w++){let{blob:v,commitment:I,proof:T}=d[w];l.push(v),h.push(I),x.push(T)}return Te(["0x03",d?bt([b,l,h,x]):bt(b)])}function Py(e,t){let{chainId:r,gas:n,nonce:o,to:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:f}=e;Ac(e);let m=Ws(u),p=[N(r),o?N(o):"0x",c?N(c):"0x",a?N(a):"0x",n?N(n):"0x",s??"0x",i?N(i):"0x",f??"0x",m,...$o(e,t)];return Te(["0x02",bt(p)])}function Sy(e,t){let{chainId:r,gas:n,data:o,nonce:s,to:i,value:a,accessList:c,gasPrice:u}=e;kl(e);let f=Ws(c),m=[N(r),s?N(s):"0x",u?N(u):"0x",n?N(n):"0x",i??"0x",a?N(a):"0x",o??"0x",f,...$o(e,t)];return Te(["0x01",bt(m)])}function ky(e,t){let{chainId:r=0,gas:n,data:o,nonce:s,to:i,value:a,gasPrice:c}=e;Cl(e);let u=[s?N(s):"0x",c?N(c):"0x",n?N(n):"0x",i??"0x",a?N(a):"0x",o??"0x"];if(t){let f=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+t.v-27n);let d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new ra({v:t.v});return d})(),m=we(t.r),p=we(t.s);u=[...u,N(f),m==="0x00"?"0x":m,p==="0x00"?"0x":p]}else r>0&&(u=[...u,N(r),"0x","0x"]);return bt(u)}function $o(e,t){let r=t??e,{v:n,yParity:o}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof n>"u"&&typeof o>"u")return[];let s=we(r.r),i=we(r.s);return[typeof o=="number"?o?N(1):"0x":n===0n?"0x":n===1n?N(1):n===27n?"0x":N(1),s==="0x00"?"0x":s,i==="0x00"?"0x":i]}function Ml(e){if(!e||e.length===0)return[];let t=[];for(let r of e){let{chainId:n,nonce:o,...s}=r,i=r.address;t.push([n?N(n):"0x",i,o?N(o):"0x",...$o({},s)])}return t}ve();Ca();var Cy={"0x0":"reverted","0x1":"success"};function Sf(e){let t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>ke(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?se(e.transactionIndex):null,status:e.status?Cy[e.status]:null,type:e.type?cf[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}var $l=po("transactionReceipt",Sf);ve();dt();var Nl=`Ethereum Signed Message:
`;Ye();ct();H();function zl(e){let t=typeof e=="string"?ft(e):typeof e.raw=="string"?e.raw:j(e.raw),r=ft(`${Nl}${W(t)}`);return $e([r,t])}function Tc(e,t){return K(zl(e),t)}var Ic="0x6492649264926492649264926492649264926492649264926492649264926492";Gr();function Ol(e){return Au(e,-32)===Ic}Vt();Ye();le();function Fl(e){let{address:t,data:r,signature:n,to:o="hex"}=e,s=Te([Ie([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,r,n]),Ic]);return o==="hex"?s:ie(s)}function Ry(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function Hl(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?se(e.nonce):void 0,storageProof:e.storageProof?Ry(e.storageProof):void 0}}async function Ul(e,{address:t,blockNumber:r,blockTag:n,storageKeys:o}){let s=n??"latest",i=r!==void 0?C(r):void 0,a=await e.request({method:"eth_getProof",params:[t,o,i||s]});return Hl(a)}H();async function Ll(e,{address:t,blockNumber:r,blockTag:n="latest",slot:o}){let s=r!==void 0?C(r):void 0;return await e.request({method:"eth_getStorageAt",params:[t,o,s||n]})}ht();H();async function No(e,{blockHash:t,blockNumber:r,blockTag:n,hash:o,index:s}){let i=n||"latest",a=r!==void 0?C(r):void 0,c=null;if(o?c=await e.request({method:"eth_getTransactionByHash",params:[o]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,C(s)]},{dedupe:!0}):(a||i)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||i,C(s)]},{dedupe:!!a})),!c)throw new Ln({blockHash:t,blockNumber:r,blockTag:i,hash:o,index:s});return(e.chain?.formatters?.transaction?.format||un)(c)}async function _l(e,{hash:t,transactionReceipt:r}){let[n,o]=await Promise.all([k(e,Ft,"getBlockNumber")({}),t?k(e,No,"getTransaction")({hash:t}):void 0]),s=r?.blockNumber||o?.blockNumber;return s?n-s+1n:0n}ht();async function Zs(e,{hash:t}){let r=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!r)throw new _n({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Sf)(r)}fn();de();_();dr();Cr();Je();ln();async function Dl(e,t){let{allowFailure:r=!0,batchSize:n,blockNumber:o,blockTag:s,multicallAddress:i,stateOverride:a}=t,c=t.contracts,u=n??(typeof e.batch?.multicall=="object"&&e.batch.multicall.batchSize||1024),f=i;if(!f){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");f=ot({blockNumber:o,chain:e.chain,contract:"multicall3"})}let m=[[]],p=0,d=0;for(let l=0;l<c.length;l++){let{abi:h,address:x,args:w,functionName:v}=c[l];try{let I=oe({abi:h,args:w,functionName:v});d+=(I.length-2)/2,u>0&&d>u&&m[p].length>0&&(p++,d=(I.length-2)/2,m[p]=[]),m[p]=[...m[p],{allowFailure:!0,callData:I,target:x}]}catch(I){let T=Ge(I,{abi:h,address:x,args:w,docsPath:"/docs/contract/multicall",functionName:v});if(!r)throw T;m[p]=[...m[p],{allowFailure:!0,callData:"0x",target:x}]}}let y=await Promise.allSettled(m.map(l=>k(e,Ee,"readContract")({abi:Ds,address:f,args:[l],blockNumber:o,blockTag:s,functionName:"aggregate3",stateOverride:a}))),b=[];for(let l=0;l<y.length;l++){let h=y[l];if(h.status==="rejected"){if(!r)throw h.reason;for(let w=0;w<m[l].length;w++)b.push({status:"failure",error:h.reason,result:void 0});continue}let x=h.value;for(let w=0;w<x.length;w++){let{returnData:v,success:I}=x[w],{callData:T}=m[l][w],{abi:A,address:P,functionName:B,args:O}=c[b.length];try{if(T==="0x")throw new Ze;if(!I)throw new kt({data:v});let z=Ue({abi:A,args:O,data:v,functionName:B});b.push(r?{result:z,status:"success"}:z)}catch(z){let F=Ge(z,{abi:A,address:P,args:O,docsPath:"/docs/contract/multicall",functionName:B});if(!r)throw F;b.push({error:F,result:void 0,status:"failure"})}}}if(b.length!==c.length)throw new g("multicall results mismatch");return b}var jl="0.1.1";function ql(){return jl}var Z=class e extends Error{constructor(t,r={}){let n=(()=>{if(r.cause instanceof e){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),o=r.cause instanceof e&&r.cause.docsPath||r.docsPath,i=`https://oxlib.sh${o??""}`,a=[t||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||o?["",n?`Details: ${n}`:void 0,o?`See: ${i}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ql()}`}),this.cause=r.cause,this.details=n,this.docs=i,this.docsPath=o,this.shortMessage=t}walk(t){return Gl(this,t)}};function Gl(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Gl(e.cause,t):t?null:e}var My="#__bigint";function Vl(e,t,r){return JSON.stringify(e,(n,o)=>typeof t=="function"?t(n,o):typeof o=="bigint"?o.toString()+My:o,r)}function Wl(e,t){if(kf(e)>t)throw new Bc({givenSize:kf(e),maxSize:t})}var Jt={zero:48,nine:57,A:65,F:70,a:97,f:102};function Cf(e){if(e>=Jt.zero&&e<=Jt.nine)return e-Jt.zero;if(e>=Jt.A&&e<=Jt.F)return e-(Jt.A-10);if(e>=Jt.a&&e<=Jt.f)return e-(Jt.a-10)}function Zl(e,t={}){let{dir:r,size:n=32}=t;if(n===0)return e;if(e.length>n)throw new Pc({size:e.length,targetSize:n,type:"Bytes"});let o=new Uint8Array(n);for(let s=0;s<n;s++){let i=r==="right";o[i?s:n-s-1]=e[i?s:e.length-s-1]}return o}function Ks(e,t){if(ge(e)>t)throw new Sc({givenSize:ge(e),maxSize:t})}function Kl(e,t){if(typeof t=="number"&&t>0&&t>ge(e)-1)throw new Ys({offset:t,position:"start",size:ge(e)})}function Yl(e,t,r){if(typeof t=="number"&&typeof r=="number"&&ge(e)!==r-t)throw new Ys({offset:r,position:"end",size:ge(e)})}function Mf(e,t={}){let{dir:r,size:n=32}=t;if(n===0)return e;let o=e.replace("0x","");if(o.length>n*2)throw new kc({size:Math.ceil(o.length/2),targetSize:n,type:"Hex"});return`0x${o[r==="right"?"padEnd":"padStart"](n*2,"0")}`}var zy=new TextEncoder;function Xl(e){return e instanceof Uint8Array?e:typeof e=="string"?Fy(e):Oy(e)}function Oy(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Fy(e,t={}){let{size:r}=t,n=e;r&&(Ks(e,r),n=Ut(e,r));let o=n.slice(2);o.length%2&&(o=`0${o}`);let s=o.length/2,i=new Uint8Array(s);for(let a=0,c=0;a<s;a++){let u=Cf(o.charCodeAt(c++)),f=Cf(o.charCodeAt(c++));if(u===void 0||f===void 0)throw new Z(`Invalid byte sequence ("${o[c-2]}${o[c-1]}" in "${o}").`);i[a]=u*16+f}return i}function Ql(e,t={}){let{size:r}=t,n=zy.encode(e);return typeof r=="number"?(Wl(n,r),Hy(n,r)):n}function Hy(e,t){return Zl(e,{dir:"right",size:t})}function kf(e){return e.length}var Bc=class extends Z{constructor({givenSize:t,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}};var Pc=class extends Z{constructor({size:t,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var Uy=new TextEncoder,Ly=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function _y(e,t={}){let{strict:r=!1}=t;if(!e)throw new Cc(e);if(typeof e!="string")throw new Cc(e);if(r&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Rc(e);if(!e.startsWith("0x"))throw new Rc(e)}function _e(...e){return`0x${e.reduce((t,r)=>t+r.replace("0x",""),"")}`}function Mc(e,t={}){let r=`0x${Number(e)}`;return typeof t.size=="number"?(Ks(r,t.size),Xt(r,t.size)):r}function zo(e,t={}){let r="";for(let o=0;o<e.length;o++)r+=Ly[e[o]];let n=`0x${r}`;return typeof t.size=="number"?(Ks(n,t.size),Ut(n,t.size)):n}function me(e,t={}){let{signed:r,size:n}=t,o=BigInt(e),s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let i=typeof s=="bigint"&&r?-s-1n:0;if(s&&o>s||o<i){let u=typeof e=="bigint"?"n":"";throw new Js({max:s?`${s}${u}`:void 0,min:`${i}${u}`,signed:r,size:n,value:`${e}${u}`})}let c=`0x${(r&&o<0?(1n<<BigInt(n*8))+BigInt(o):o).toString(16)}`;return n?Xt(c,n):c}function Oo(e,t={}){return zo(Uy.encode(e),t)}function Xt(e,t){return Mf(e,{dir:"left",size:t})}function Ut(e,t){return Mf(e,{dir:"right",size:t})}function Fo(e,t,r,n={}){let{strict:o}=n;Kl(e,t);let s=`0x${e.replace("0x","").slice((t??0)*2,(r??e.length)*2)}`;return o&&Yl(s,t,r),s}function ge(e){return Math.ceil((e.length-2)/2)}function $f(e,t={}){let{strict:r=!1}=t;try{return _y(e,{strict:r}),!0}catch{return!1}}var Js=class extends Z{constructor({max:t,min:r,signed:n,size:o,value:s}){super(`Number \`${s}\` is not in safe${o?` ${o*8}-bit`:""}${n?" signed":" unsigned"} integer range ${t?`(\`${r}\` to \`${t}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};var Cc=class extends Z{constructor(t){super(`Value \`${typeof t=="object"?Vl(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Rc=class extends Z{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};var Sc=class extends Z{constructor({givenSize:t,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},Ys=class extends Z{constructor({offset:t,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},kc=class extends Z{constructor({size:t,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function eh(e){return{address:e.address,amount:me(e.amount),index:me(e.index),validatorIndex:me(e.validatorIndex)}}function th(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:me(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:me(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:me(e.gasLimit)},...typeof e.number=="bigint"&&{number:me(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:me(e.prevRandao)},...typeof e.time=="bigint"&&{time:me(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(eh)}}}he();de();dr();Tr();Cr();Je();H();Hs();cn();Ra();Pr();async function Xs(e,t){let{blockNumber:r,blockTag:n="latest",blocks:o,returnFullTransactions:s,traceTransfers:i,validation:a}=t;try{let c=[];for(let p of o){let d=p.blockOverrides?th(p.blockOverrides):void 0,y=p.calls.map(l=>{let h=l,x=h.account?D(h.account):void 0,w={...h,data:h.abi?oe(h):h.data,from:h.from??x?.address};return He(w),rt(w)}),b=p.stateOverrides?mo(p.stateOverrides):void 0;c.push({blockOverrides:d,calls:y,stateOverrides:b})}let f=(r?C(r):void 0)||n;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:s,traceTransfers:i,validation:a},f]})).map((p,d)=>({...Ls(p),calls:p.calls.map((y,b)=>{let{abi:l,args:h,functionName:x,to:w}=o[d].calls[b],v=y.error?.data??y.returnData,I=BigInt(y.gasUsed),T=y.logs?.map(O=>ke(O)),A=y.status==="0x1"?"success":"failure",P=l&&A==="success"&&v!=="0x"?Ue({abi:l,data:v,functionName:x}):null,B=(()=>{if(A==="success")return;let O;if(y.error?.data==="0x"?O=new Ze:y.error&&(O=new kt(y.error)),!!O)return Ge(O,{abi:l??[],address:w,args:h,functionName:x??"<unknown>"})})();return{data:v,gasUsed:I,logs:T,status:A,...A==="success"?{result:P}:{error:B}}})}))}catch(c){let u=c,f=Ir(u,{});throw f instanceof tt?u:f}}ms();bu();function $c(e,t={}){let{as:r=typeof e=="string"?"Hex":"Bytes"}=t,n=Ui(Xl(e));return r==="Bytes"?n:zo(n)}var Nc=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let r=super.get(t);return super.has(t)&&r!==void 0&&(this.delete(t),super.set(t,r)),r}set(t,r){if(super.set(t,r),this.maxSize&&this.size>this.maxSize){let n=this.keys().next().value;n&&this.delete(n)}return this}};var qy={checksum:new Nc(8192)},zc=qy.checksum;var Vy=/^0x[a-fA-F0-9]{40}$/;function Ho(e,t={}){let{strict:r=!0}=t;if(!Vy.test(e))throw new Oc({address:e,cause:new Nf});if(r){if(e.toLowerCase()===e)return;if(nh(e)!==e)throw new Oc({address:e,cause:new zf})}}function nh(e){if(zc.has(e))return zc.get(e);Ho(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=$c(Ql(t),{as:"Bytes"}),n=t.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());let o=`0x${n.join("")}`;return zc.set(e,o),o}function Fc(e,t={}){let{strict:r=!0}=t??{};try{return Ho(e,{strict:r}),!0}catch{return!1}}var Oc=class extends Z{constructor({address:t,cause:r}){super(`Address "${t}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},Nf=class extends Z{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},zf=class extends Z{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};function Uc(e){let t=!0,r="",n=0,o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&n++,a===")"&&n--,!!t){if(n===0){if(a===" "&&["event","function","error",""].includes(o))o="";else if(o+=a,a===")"){s=!0;break}continue}if(a===" "){e[i-1]!==","&&r!==","&&r!==",("&&(r="",t=!1);continue}o+=a,r+=a}}if(!s)throw new Z("Unable to normalize signature.");return o}function Hc(e,t){let r=typeof e,n=t.type;switch(n){case"address":return Fc(e,{strict:!1});case"bool":return r==="boolean";case"function":return r==="string";case"string":return r==="string";default:return n==="tuple"&&"components"in t?Object.values(t.components).every((o,s)=>Hc(Object.values(e)[s],o)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?r==="number"||r==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?r==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)?Array.isArray(e)&&e.every(o=>Hc(o,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Ff(e,t,r){for(let n in e){let o=e[n],s=t[n];if(o.type==="tuple"&&s.type==="tuple"&&"components"in o&&"components"in s)return Ff(o.components,s.components,r[n]);let i=[o.type,s.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?Fc(r[n],{strict:!1}):i.includes("address")&&i.includes("bytes")?Fc(r[n],{strict:!1}):!1)return i}}function Lc(e,t={}){let{prepare:r=!0}=t,n=Array.isArray(e)?ps(e):typeof e=="string"?ps(e):e;return{...n,...r?{hash:Uo(n)}:{}}}function oh(e,t,r){let{args:n=[],prepare:o=!0}=r??{},s=$f(t,{strict:!1}),i=e.filter(u=>s?u.type==="function"||u.type==="error"?Uf(u)===Fo(t,0,4):u.type==="event"?Uo(u)===t:!1:"name"in u&&u.name===t);if(i.length===0)throw new xn({name:t});if(i.length===1)return{...i[0],...o?{hash:Uo(i[0])}:{}};let a;for(let u of i){if(!("inputs"in u))continue;if(!n||n.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...o?{hash:Uo(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==n.length)continue;if(n.every((m,p)=>{let d="inputs"in u&&u.inputs[p];return d?Hc(m,d):!1})){if(a&&"inputs"in a&&a.inputs){let m=Ff(u.inputs,a.inputs,n);if(m)throw new Hf({abiItem:u,type:m[0]},{abiItem:a,type:m[1]})}a=u}}let c=(()=>{if(a)return a;let[u,...f]=i;return{...u,overloads:f}})();if(!c)throw new xn({name:t});return{...c,...o?{hash:Uo(c)}:{}}}function Uf(e){return Fo(Uo(e),0,4)}function Zy(e){let t=typeof e=="string"?e:Ur(e);return Uc(t)}function Uo(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:$c(Oo(Zy(e)))}var Hf=class extends Z{constructor(t,r){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${Uc(Ur(t.abiItem))}\`, and`,`\`${r.type}\` in \`${Uc(Ur(r.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},xn=class extends Z{constructor({name:t,data:r,type:n="item"}){let o=t?` with name "${t}"`:r?` with data "${r}"`:"";super(`ABI ${n}${o} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};var ih=/^(.*)\[([0-9]*)\]$/,ah=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_c=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,zC=2n**(8n-1n)-1n,OC=2n**(16n-1n)-1n,FC=2n**(24n-1n)-1n,HC=2n**(32n-1n)-1n,UC=2n**(40n-1n)-1n,LC=2n**(48n-1n)-1n,_C=2n**(56n-1n)-1n,DC=2n**(64n-1n)-1n,jC=2n**(72n-1n)-1n,qC=2n**(80n-1n)-1n,GC=2n**(88n-1n)-1n,VC=2n**(96n-1n)-1n,WC=2n**(104n-1n)-1n,ZC=2n**(112n-1n)-1n,KC=2n**(120n-1n)-1n,YC=2n**(128n-1n)-1n,JC=2n**(136n-1n)-1n,XC=2n**(144n-1n)-1n,QC=2n**(152n-1n)-1n,e9=2n**(160n-1n)-1n,t9=2n**(168n-1n)-1n,r9=2n**(176n-1n)-1n,n9=2n**(184n-1n)-1n,o9=2n**(192n-1n)-1n,s9=2n**(200n-1n)-1n,i9=2n**(208n-1n)-1n,a9=2n**(216n-1n)-1n,c9=2n**(224n-1n)-1n,u9=2n**(232n-1n)-1n,f9=2n**(240n-1n)-1n,p9=2n**(248n-1n)-1n,m9=2n**(256n-1n)-1n,d9=-(2n**(8n-1n)),l9=-(2n**(16n-1n)),h9=-(2n**(24n-1n)),x9=-(2n**(32n-1n)),y9=-(2n**(40n-1n)),b9=-(2n**(48n-1n)),g9=-(2n**(56n-1n)),w9=-(2n**(64n-1n)),v9=-(2n**(72n-1n)),E9=-(2n**(80n-1n)),A9=-(2n**(88n-1n)),T9=-(2n**(96n-1n)),I9=-(2n**(104n-1n)),B9=-(2n**(112n-1n)),P9=-(2n**(120n-1n)),S9=-(2n**(128n-1n)),k9=-(2n**(136n-1n)),C9=-(2n**(144n-1n)),R9=-(2n**(152n-1n)),M9=-(2n**(160n-1n)),$9=-(2n**(168n-1n)),N9=-(2n**(176n-1n)),z9=-(2n**(184n-1n)),O9=-(2n**(192n-1n)),F9=-(2n**(200n-1n)),H9=-(2n**(208n-1n)),U9=-(2n**(216n-1n)),L9=-(2n**(224n-1n)),_9=-(2n**(232n-1n)),D9=-(2n**(240n-1n)),j9=-(2n**(248n-1n)),q9=-(2n**(256n-1n)),G9=2n**8n-1n,V9=2n**16n-1n,W9=2n**24n-1n,Z9=2n**32n-1n,K9=2n**40n-1n,Y9=2n**48n-1n,J9=2n**56n-1n,X9=2n**64n-1n,Q9=2n**72n-1n,eR=2n**80n-1n,tR=2n**88n-1n,rR=2n**96n-1n,nR=2n**104n-1n,oR=2n**112n-1n,sR=2n**120n-1n,iR=2n**128n-1n,aR=2n**136n-1n,cR=2n**144n-1n,uR=2n**152n-1n,fR=2n**160n-1n,pR=2n**168n-1n,mR=2n**176n-1n,dR=2n**184n-1n,lR=2n**192n-1n,hR=2n**200n-1n,xR=2n**208n-1n,yR=2n**216n-1n,bR=2n**224n-1n,gR=2n**232n-1n,wR=2n**240n-1n,vR=2n**248n-1n,ER=2n**256n-1n;function ch({checksumAddress:e,parameters:t,values:r}){let n=[];for(let o=0;o<t.length;o++)n.push(Lf({checksumAddress:e,parameter:t[o],value:r[o]}));return n}function Lf({checksumAddress:e=!1,parameter:t,value:r}){let n=t,o=nb(n.type);if(o){let[s,i]=o;return Jy(r,{checksumAddress:e,length:s,parameter:{...n,type:i}})}if(n.type==="tuple")return rb(r,{checksumAddress:e,parameter:n});if(n.type==="address")return Yy(r,{checksum:e});if(n.type==="bool")return Qy(r);if(n.type.startsWith("uint")||n.type.startsWith("int")){let s=n.type.startsWith("int"),[,,i="256"]=_c.exec(n.type)??[];return eb(r,{signed:s,size:Number(i)})}if(n.type.startsWith("bytes"))return Xy(r,{type:n.type});if(n.type==="string")return tb(r);throw new ei(n.type)}function Dc(e){let t=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?t+=32:t+=ge(a)}let r=[],n=[],o=0;for(let s=0;s<e.length;s++){let{dynamic:i,encoded:a}=e[s];i?(r.push(me(t+o,{size:32})),n.push(a),o+=ge(a)):r.push(a)}return _e(...r,...n)}function Yy(e,t){let{checksum:r=!1}=t;return Ho(e,{strict:r}),{dynamic:!1,encoded:Xt(e.toLowerCase())}}function Jy(e,t){let{checksumAddress:r,length:n,parameter:o}=t,s=n===null;if(!Array.isArray(e))throw new qc(e);if(!s&&e.length!==n)throw new jc({expectedLength:n,givenLength:e.length,type:`${o.type}[${n}]`});let i=!1,a=[];for(let c=0;c<e.length;c++){let u=Lf({checksumAddress:r,parameter:o,value:e[c]});u.dynamic&&(i=!0),a.push(u)}if(s||i){let c=Dc(a);if(s){let u=me(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?_e(u,c):u}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:_e(...a.map(({encoded:c})=>c))}}function Xy(e,{type:t}){let[,r]=t.split("bytes"),n=ge(e);if(!r){let o=e;return n%32!==0&&(o=Ut(o,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:_e(Xt(me(n,{size:32})),o)}}if(n!==Number.parseInt(r))throw new Qs({expectedSize:Number.parseInt(r),value:e});return{dynamic:!1,encoded:Ut(e)}}function Qy(e){if(typeof e!="boolean")throw new Z(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Xt(Mc(e))}}function eb(e,{signed:t,size:r}){if(typeof r=="number"){let n=2n**(BigInt(r)-(t?1n:0n))-1n,o=t?-n-1n:0n;if(e>n||e<o)throw new Js({max:n.toString(),min:o.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:me(e,{size:32,signed:t})}}function tb(e){let t=Oo(e),r=Math.ceil(ge(t)/32),n=[];for(let o=0;o<r;o++)n.push(Ut(Fo(t,o*32,(o+1)*32)));return{dynamic:!0,encoded:_e(Ut(me(ge(t),{size:32})),...n)}}function rb(e,t){let{checksumAddress:r,parameter:n}=t,o=!1,s=[];for(let i=0;i<n.components.length;i++){let a=n.components[i],c=Array.isArray(e)?i:a.name,u=Lf({checksumAddress:r,parameter:a,value:e[c]});s.push(u),u.dynamic&&(o=!0)}return{dynamic:o,encoded:o?Dc(s):_e(...s.map(({encoded:i})=>i))}}function nb(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Vc(e,t,r){let{checksumAddress:n=!1}=r??{};if(e.length!==t.length)throw new Gc({expectedLength:e.length,givenLength:t.length});let o=ch({checksumAddress:n,parameters:e,values:t}),s=Dc(o);return s.length===0?"0x":s}function Df(e,t){if(e.length!==t.length)throw new Gc({expectedLength:e.length,givenLength:t.length});let r=[];for(let n=0;n<e.length;n++){let o=e[n],s=t[n];r.push(Df.encode(o,s))}return _e(...r)}(function(e){function t(r,n,o=!1){if(r==="address"){let c=n;return Ho(c),Xt(c.toLowerCase(),o?32:0)}if(r==="string")return Oo(n);if(r==="bytes")return n;if(r==="bool")return Xt(Mc(n),o?32:1);let s=r.match(_c);if(s){let[c,u,f="256"]=s,m=Number.parseInt(f)/8;return me(n,{size:o?32:m,signed:u==="int"})}let i=r.match(ah);if(i){let[c,u]=i;if(Number.parseInt(u)!==(n.length-2)/2)throw new Qs({expectedSize:Number.parseInt(u),value:n});return Ut(n,o?32:0)}let a=r.match(ih);if(a&&Array.isArray(n)){let[c,u]=a,f=[];for(let m=0;m<n.length;m++)f.push(t(u,n[m],!0));return f.length===0?"0x":_e(...f)}throw new ei(r)}e.encode=t})(Df||(Df={}));var jc=class extends Z{constructor({expectedLength:t,givenLength:r,type:n}){super(`Array length mismatch for type \`${n}\`. Expected: \`${t}\`. Given: \`${r}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},Qs=class extends Z{constructor({expectedSize:t,value:r}){super(`Size of bytes "${r}" (bytes${ge(r)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},Gc=class extends Z{constructor({expectedLength:t,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},qc=class extends Z{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},ei=class extends Z{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function uh(e,t){let{bytecode:r,args:n}=t;return _e(r,e.inputs?.length&&n?.length?Vc(e.inputs,n):"0x")}function fh(e){return Lc(e)}function ph(e,...t){let{overloads:r}=e,n=r?ab([e,...r],e.name,{args:t[0]}):e,o=cb(n),s=t.length>0?Vc(n.inputs,t[0]):void 0;return s?_e(o,s):o}function yn(e,t={}){return Lc(e,t)}function ab(e,t,r){let n=oh(e,t,r);if(n.type!=="function")throw new xn({name:t,type:"function"});return n}function cb(e){return Uf(e)}he();var mh="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",gt="0x0000000000000000000000000000000000000000";Ga();_();Je();var fb="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function dh(e,t){let{blockNumber:r,blockTag:n,calls:o,stateOverrides:s,traceAssetChanges:i,traceTransfers:a,validation:c}=t,u=t.account?D(t.account):void 0;if(i&&!u)throw new g("`account` is required when `traceAssetChanges` is true");let f=u?uh(fh("constructor(bytes, bytes)"),{bytecode:qa,args:[fb,ph(yn("function getBalance(address)"),[u.address])]}):void 0,m=i?await Promise.all(t.calls.map(async $=>{if(!$.data&&!$.abi)return;let{accessList:V}=await hc(e,{account:u.address,...$,data:$.abi?oe($):$.data});return V.map(({address:ue,storageKeys:ze})=>ze.length>0?ue:null)})).then($=>$.flat().filter(Boolean)):[],p=s?.map($=>$.address===u?.address?{...$,nonce:0}:$),d=await Xs(e,{blockNumber:r,blockTag:n,blocks:[...i?[{calls:[{data:f}],stateOverrides:s},{calls:m.map(($,V)=>({abi:[yn("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:gt,nonce:V})),stateOverrides:[{address:gt,nonce:0}]}]:[],{calls:[...o,{}].map(($,V)=>({...$,from:u?.address,nonce:V})),stateOverrides:p},...i?[{calls:[{data:f}]},{calls:m.map(($,V)=>({abi:[yn("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:$,from:gt,nonce:V})),stateOverrides:[{address:gt,nonce:0}]},{calls:m.map(($,V)=>({to:$,abi:[yn("function decimals() returns (uint256)")],functionName:"decimals",from:gt,nonce:V})),stateOverrides:[{address:gt,nonce:0}]},{calls:m.map(($,V)=>({to:$,abi:[yn("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:gt,nonce:V})),stateOverrides:[{address:gt,nonce:0}]},{calls:m.map(($,V)=>({to:$,abi:[yn("function symbol() returns (string)")],functionName:"symbol",from:gt,nonce:V})),stateOverrides:[{address:gt,nonce:0}]}]:[]],traceTransfers:a,validation:c}),y=i?d[2]:d[0],[b,l,,h,x,w,v,I]=i?d:[],{calls:T,...A}=y,P=T.slice(0,-1)??[],B=b?.calls??[],O=l?.calls??[],z=[...B,...O].map($=>$.status==="success"?re($.data):null),F=h?.calls??[],X=x?.calls??[],S=[...F,...X].map($=>$.status==="success"?re($.data):null),M=(w?.calls??[]).map($=>$.status==="success"?$.result:null),R=(I?.calls??[]).map($=>$.status==="success"?$.result:null),U=(v?.calls??[]).map($=>$.status==="success"?$.result:null),L=[];for(let[$,V]of S.entries()){let ue=z[$];if(typeof V!="bigint"||typeof ue!="bigint")continue;let ze=M[$-1],je=R[$-1],Ae=U[$-1],Lt=$===0?{address:mh,decimals:18,symbol:"ETH"}:{address:m[$-1],decimals:Ae||ze?Number(ze??1):void 0,symbol:je??void 0};L.some(vt=>vt.token.address===Lt.address)||L.push({token:Lt,value:{pre:ue,post:V,diff:V-ue}})}return{assetChanges:L,block:A,results:P}}fn();Ga();dr();Za();qr();Eo();We();H();sf();ve();le();function lh({r:e,s:t,to:r="hex",v:n,yParity:o}){let s=(()=>{if(o===0||o===1)return o;if(n&&(n===27n||n===28n||n>=35n))return n%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new an.Signature(re(e),re(t)).toCompactHex()}${s===0?"1b":"1c"}`;return r==="hex"?i:ie(i)}Bo();async function Lo(e,t){let{address:r,factory:n,factoryData:o,hash:s,signature:i,universalSignatureVerifierAddress:a=e.chain?.contracts?.universalSignatureVerifier?.address,...c}=t,u=Q(i)?i:typeof i=="object"&&"r"in i&&"s"in i?lh(i):j(i),f=await(async()=>!n&&!o||Ol(u)?u:Fl({address:n,data:o,signature:u}))();try{let m=a?{to:a,data:oe({abi:lf,functionName:"isValidSig",args:[r,s,f]}),...c}:{data:dn({abi:lf,args:[r,s,f],bytecode:Ud}),...c},{data:p}=await k(e,zt,"call")(m);return ws(p??"0x0")}catch(m){try{if(Nt(_i(r),await Pa({hash:s,signature:i})))return!0}catch{}if(m instanceof Dn)return!1;throw m}}async function hh(e,{address:t,message:r,factory:n,factoryData:o,signature:s,...i}){let a=Tc(r);return Lo(e,{address:t,factory:n,factoryData:o,hash:a,signature:s,...i})}async function xh(e,t){let{address:r,factory:n,factoryData:o,signature:s,message:i,primaryType:a,types:c,domain:u,...f}=t,m=vl({message:i,primaryType:a,types:c,domain:u});return Lo(e,{address:r,factory:n,factoryData:o,hash:m,signature:s,...f})}ht();yf();Ne();ve();Ne();function Wc(e,{emitOnBegin:t=!1,emitMissed:r=!1,onBlockNumber:n,onError:o,poll:s,pollingInterval:i=e.pollingInterval}){let a=typeof s<"u"?s:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),c;return a?(()=>{let m=q(["watchBlockNumber",e.uid,t,r,i]);return Le(m,{onBlockNumber:n,onError:o},p=>Ot(async()=>{try{let d=await k(e,Ft,"getBlockNumber")({cacheTime:0});if(c){if(d===c)return;if(d-c>1&&r)for(let y=c+1n;y<d;y++)p.onBlockNumber(y,c),c=y}(!c||d>c)&&(p.onBlockNumber(d,c),c=d)}catch(d){p.onError?.(d)}},{emitOnBegin:t,interval:i}))})():(()=>{let m=q(["watchBlockNumber",e.uid,t,r]);return Le(m,{onBlockNumber:n,onError:o},p=>{let d=!0,y=()=>d=!1;return(async()=>{try{let b=(()=>{if(e.transport.type==="fallback"){let h=e.transport.transports.find(x=>x.config.type==="webSocket");return h?h.value:e.transport}return e.transport})(),{unsubscribe:l}=await b.subscribe({params:["newHeads"],onData(h){if(!d)return;let x=re(h.result?.number);p.onBlockNumber(x,c),c=x},onError(h){p.onError?.(h)}});y=l,d||y()}catch(b){o?.(b)}})(),()=>y()})})()}async function yh(e,{confirmations:t=1,hash:r,onReplaced:n,pollingInterval:o=e.pollingInterval,retryCount:s=6,retryDelay:i=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){let c=q(["waitForTransactionReceipt",e.uid,r]),u,f,m,p=!1,{promise:d,resolve:y,reject:b}=Ya(),l=a?setTimeout(()=>b(new ia({hash:r})),a):void 0,h=Le(c,{onReplaced:n,resolve:y,reject:b},x=>{let w=k(e,Wc,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:o,async onBlockNumber(v){let I=A=>{clearTimeout(l),w(),A(),h()},T=v;if(!p)try{if(m){if(t>1&&(!m.blockNumber||T-m.blockNumber+1n<t))return;I(()=>x.resolve(m));return}if(u||(p=!0,await Vs(async()=>{u=await k(e,No,"getTransaction")({hash:r}),u.blockNumber&&(T=u.blockNumber)},{delay:i,retryCount:s}),p=!1),m=await k(e,Zs,"getTransactionReceipt")({hash:r}),t>1&&(!m.blockNumber||T-m.blockNumber+1n<t))return;I(()=>x.resolve(m))}catch(A){if(A instanceof Ln||A instanceof _n){if(!u){p=!1;return}try{f=u,p=!0;let P=await Vs(()=>k(e,Se,"getBlock")({blockNumber:T,includeTransactions:!0}),{delay:i,retryCount:s,shouldRetry:({error:z})=>z instanceof ho});p=!1;let B=P.transactions.find(({from:z,nonce:F})=>z===f.from&&F===f.nonce);if(!B||(m=await k(e,Zs,"getTransactionReceipt")({hash:B.hash}),t>1&&(!m.blockNumber||T-m.blockNumber+1n<t)))return;let O="replaced";B.to===f.to&&B.value===f.value&&B.input===f.input?O="repriced":B.from===B.to&&B.value===0n&&(O="cancelled"),I(()=>{x.onReplaced?.({reason:O,replacedTransaction:f,transaction:B,transactionReceipt:m}),x.resolve(m)})}catch(P){I(()=>x.reject(P))}}else I(()=>x.reject(A))}}})});return d}Ne();function bh(e,{blockTag:t="latest",emitMissed:r=!1,emitOnBegin:n=!1,onBlock:o,onError:s,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){let u=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),f=i??!1,m;return u?(()=>{let y=q(["watchBlocks",e.uid,t,r,n,f,c]);return Le(y,{onBlock:o,onError:s},b=>Ot(async()=>{try{let l=await k(e,Se,"getBlock")({blockTag:t,includeTransactions:f});if(l.number&&m?.number){if(l.number===m.number)return;if(l.number-m.number>1&&r)for(let h=m?.number+1n;h<l.number;h++){let x=await k(e,Se,"getBlock")({blockNumber:h,includeTransactions:f});b.onBlock(x,m),m=x}}(!m?.number||t==="pending"&&!l?.number||l.number&&l.number>m.number)&&(b.onBlock(l,m),m=l)}catch(l){b.onError?.(l)}},{emitOnBegin:n,interval:c}))})():(()=>{let y=!0,b=!0,l=()=>y=!1;return(async()=>{try{n&&k(e,Se,"getBlock")({blockTag:t,includeTransactions:f}).then(w=>{y&&b&&(o(w,void 0),b=!1)});let h=(()=>{if(e.transport.type==="fallback"){let w=e.transport.transports.find(v=>v.config.type==="webSocket");return w?w.value:e.transport}return e.transport})(),{unsubscribe:x}=await h.subscribe({params:["newHeads"],async onData(w){if(!y)return;let v=await k(e,Se,"getBlock")({blockNumber:w.blockNumber,includeTransactions:f}).catch(()=>{});y&&(o(v,m),b=!1,m=v)},onError(w){s?.(w)}});l=x,y||l()}catch(h){s?.(h)}})(),()=>l()})()}Ne();de();Cs();function gh(e,{address:t,args:r,batch:n=!0,event:o,events:s,fromBlock:i,onError:a,onLogs:c,poll:u,pollingInterval:f=e.pollingInterval,strict:m}){let p=typeof u<"u"?u:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),d=m??!1;return p?(()=>{let l=q(["watchEvent",t,r,n,e.uid,o,f,i]);return Le(l,{onLogs:c,onError:a},h=>{let x;i!==void 0&&(x=i-1n);let w,v=!1,I=Ot(async()=>{if(!v){try{w=await k(e,xc,"createEventFilter")({address:t,args:r,event:o,events:s,strict:d,fromBlock:i})}catch{}v=!0;return}try{let T;if(w)T=await k(e,Rr,"getFilterChanges")({filter:w});else{let A=await k(e,Ft,"getBlockNumber")({});x&&x!==A?T=await k(e,Io,"getLogs")({address:t,args:r,event:o,events:s,fromBlock:x+1n,toBlock:A}):T=[],x=A}if(T.length===0)return;if(n)h.onLogs(T);else for(let A of T)h.onLogs([A])}catch(T){w&&T instanceof Ct&&(v=!1),h.onError?.(T)}},{emitOnBegin:!0,interval:f});return async()=>{w&&await k(e,Mr,"uninstallFilter")({filter:w}),I()}})})():(()=>{let l=!0,h=()=>l=!1;return(async()=>{try{let x=(()=>{if(e.transport.type==="fallback"){let T=e.transport.transports.find(A=>A.config.type==="webSocket");return T?T.value:e.transport}return e.transport})(),w=s??(o?[o]:void 0),v=[];w&&(v=[w.flatMap(A=>Pt({abi:[A],eventName:A.name,args:r}))],o&&(v=v[0]));let{unsubscribe:I}=await x.subscribe({params:["logs",{address:t,topics:v}],onData(T){if(!l)return;let A=T.result;try{let{eventName:P,args:B}=Ao({abi:w??[],data:A.data,topics:A.topics,strict:d}),O=ke(A,{args:B,eventName:P});c([O])}catch(P){let B,O;if(P instanceof ut||P instanceof Et){if(m)return;B=P.abiItem.name,O=P.abiItem.inputs?.some(F=>!("name"in F&&F.name))}let z=ke(A,{args:O?[]:{},eventName:B});c([z])}},onError(T){a?.(T)}});h=I,l||h()}catch(x){a?.(x)}})(),()=>h()})()}Ne();function wh(e,{batch:t=!0,onError:r,onTransactions:n,poll:o,pollingInterval:s=e.pollingInterval}){return(typeof o<"u"?o:e.transport.type!=="webSocket")?(()=>{let u=q(["watchPendingTransactions",e.uid,t,s]);return Le(u,{onTransactions:n,onError:r},f=>{let m,p=Ot(async()=>{try{if(!m)try{m=await k(e,yc,"createPendingTransactionFilter")({});return}catch(y){throw p(),y}let d=await k(e,Rr,"getFilterChanges")({filter:m});if(d.length===0)return;if(t)f.onTransactions(d);else for(let y of d)f.onTransactions([y])}catch(d){f.onError?.(d)}},{emitOnBegin:!0,interval:s});return async()=>{m&&await k(e,Mr,"uninstallFilter")({filter:m}),p()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{let{unsubscribe:m}=await e.transport.subscribe({params:["newPendingTransactions"],onData(p){if(!u)return;let d=p.result;n([d])},onError(p){r?.(p)}});f=m,u||f()}catch(m){r?.(m)}})(),()=>f()})()}function vh(e){let{scheme:t,statement:r,...n}=e.match(pb)?.groups??{},{chainId:o,expirationTime:s,issuedAt:i,notBefore:a,requestId:c,...u}=e.match(mb)?.groups??{},f=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...n,...u,...o?{chainId:Number(o)}:{},...s?{expirationTime:new Date(s)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}var pb=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,mb=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;Eo();function Eh(e){let{address:t,domain:r,message:n,nonce:o,scheme:s,time:i=new Date}=e;if(r&&n.domain!==r||o&&n.nonce!==o||s&&n.scheme!==s||n.expirationTime&&i>=n.expirationTime||n.notBefore&&i<n.notBefore)return!1;try{if(!n.address||t&&!Nt(n.address,t))return!1}catch{return!1}return!0}async function Ah(e,t){let{address:r,domain:n,message:o,nonce:s,scheme:i,signature:a,time:c=new Date,...u}=t,f=vh(o);if(!f.address||!Eh({address:r,domain:n,message:f,nonce:s,scheme:i,time:c}))return!1;let p=Tc(o);return Lo(e,{address:f.address,hash:p,signature:a,...u})}function Th(e){return{call:t=>zt(e,t),createAccessList:t=>hc(e,t),createBlockFilter:()=>hl(e),createContractEventFilter:t=>qi(e,t),createEventFilter:t=>xc(e,t),createPendingTransactionFilter:()=>yc(e),estimateContractGas:t=>Md(e,t),estimateGas:t=>vo(e,t),getBalance:t=>_a(e,t),getBlobBaseFee:()=>xl(e),getBlock:t=>Se(e,t),getBlockNumber:t=>Ft(e,t),getBlockTransactionCount:t=>yl(e,t),getBytecode:t=>Pf(e,t),getChainId:()=>nt(e),getCode:t=>Pf(e,t),getContractEvents:t=>Da(e,t),getEip712Domain:t=>Xd(e,t),getEnsAddress:t=>il(e,t),getEnsAvatar:t=>ml(e,t),getEnsName:t=>dl(e,t),getEnsResolver:t=>ll(e,t),getEnsText:t=>lc(e,t),getFeeHistory:t=>gl(e,t),estimateFeesPerGas:t=>Sd(e,t),getFilterChanges:t=>Rr(e,t),getFilterLogs:t=>wl(e,t),getGasPrice:()=>xo(e),getLogs:t=>Io(e,t),getProof:t=>Ul(e,t),estimateMaxPriorityFeePerGas:t=>Pd(e,t),getStorageAt:t=>Ll(e,t),getTransaction:t=>No(e,t),getTransactionConfirmations:t=>_l(e,t),getTransactionCount:t=>yo(e,t),getTransactionReceipt:t=>Zs(e,t),multicall:t=>Dl(e,t),prepareTransactionRequest:t=>kr(e,t),readContract:t=>Ee(e,t),sendRawTransaction:t=>Po(e,t),simulate:t=>Xs(e,t),simulateBlocks:t=>Xs(e,t),simulateCalls:t=>dh(e,t),simulateContract:t=>Gd(e,t),verifyMessage:t=>hh(e,t),verifySiweMessage:t=>Ah(e,t),verifyTypedData:t=>xh(e,t),uninstallFilter:t=>Mr(e,t),waitForTransactionReceipt:t=>yh(e,t),watchBlocks:t=>bh(e,t),watchBlockNumber:t=>Wc(e,t),watchContractEvent:t=>Kd(e,t),watchEvent:t=>gh(e,t),watchPendingTransactions:t=>wh(e,t)}}function jf(e){let{key:t="public",name:r="Public Client"}=e;return ic({...e,key:t,name:r,type:"publicClient"}).extend(Th)}Za();function Ih(e,t){let{abi:r,args:n,bytecode:o,...s}=t,i=dn({abi:r,args:n,bytecode:o});return So(e,{...s,...s.authorizationList?{to:null}:{},data:i})}qr();async function Bh(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(r=>qt(r))}async function Ph(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}he();Eo();async function Zc(e,t){let{account:r=e.account,chainId:n,nonce:o}=t;if(!r)throw new Ce({docsPath:"/docs/eip7702/prepareAuthorization"});let s=D(r),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:D(t.executor)})(),a={address:t.contractAddress??t.address,chainId:n,nonce:o};return typeof a.chainId>"u"&&(a.chainId=e.chain?.id??await k(e,nt,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await k(e,yo,"getTransactionCount")({address:s.address,blockTag:"pending"}),(i==="self"||i?.address&&Nt(i.address,s.address))&&(a.nonce+=1)),a}qr();async function Sh(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(r=>_i(r))}async function kh(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}he();async function Ch(e,t){let{account:r=e.account}=t;if(!r)throw new Ce({docsPath:"/docs/eip7702/signAuthorization"});let n=D(r);if(!n.signAuthorization)throw new $r({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:n.type});let o=await Zc(e,t);return n.signAuthorization(o)}he();H();async function Rh(e,{account:t=e.account,message:r}){if(!t)throw new Ce({docsPath:"/docs/actions/wallet/signMessage"});let n=D(t);if(n.signMessage)return n.signMessage({message:r});let o=typeof r=="string"?ft(r):r.raw instanceof Uint8Array?N(r.raw):r.raw;return e.request({method:"personal_sign",params:[o,n.address]},{retryCount:0})}he();H();cn();Pr();async function Mh(e,t){let{account:r=e.account,chain:n=e.chain,...o}=t;if(!r)throw new Ce({docsPath:"/docs/actions/wallet/signTransaction"});let s=D(r);He({account:s,...t});let i=await k(e,nt,"getChainId")({});n!==null&&tc({currentChainId:i,chain:n});let c=(n?.formatters||e.chain?.formatters)?.transactionRequest?.format||rt;return s.signTransaction?s.signTransaction({...o,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(o),chainId:C(i),from:s.address}]},{retryCount:0})}he();async function $h(e,t){let{account:r=e.account,domain:n,message:o,primaryType:s}=t;if(!r)throw new Ce({docsPath:"/docs/actions/wallet/signTypedData"});let i=D(r),a={EIP712Domain:Ec({domain:n}),...t.types};if(vc({domain:n,message:o,primaryType:s,types:a}),i.signTypedData)return i.signTypedData({domain:n,message:o,primaryType:s,types:a});let c=Bl({domain:n,message:o,primaryType:s,types:a});return e.request({method:"eth_signTypedData_v4",params:[i.address,c]},{retryCount:0})}H();async function Nh(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:C(t)}]},{retryCount:0})}async function zh(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function Oh(e){return{addChain:t=>Qd(e,t),deployContract:t=>Ih(e,t),getAddresses:()=>Bh(e),getChainId:()=>nt(e),getPermissions:()=>Ph(e),prepareAuthorization:t=>Zc(e,t),prepareTransactionRequest:t=>kr(e,t),requestAddresses:()=>Sh(e),requestPermissions:t=>kh(e,t),sendRawTransaction:t=>Po(e,t),sendTransaction:t=>So(e,t),signAuthorization:t=>Ch(e,t),signMessage:t=>Rh(e,t),signTransaction:t=>Mh(e,t),signTypedData:t=>$h(e,t),switchChain:t=>Nh(e,t),watchAsset:t=>zh(e,t),writeContract:t=>Jd(e,t)}}function qf(e){let{key:t="wallet",name:r="Wallet Client",transport:n}=e;return ic({...e,key:t,name:r,transport:n,type:"walletClient"}).extend(Oh)}Vt();H();ve();Bs();We();var Fh={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};ve();var Hh={block:Bd({format(e){return{transactions:e.transactions?.map(r=>{if(typeof r=="string")return r;let n=un(r);return n.typeHex==="0x7e"&&(n.isSystemTx=r.isSystemTx,n.mint=r.mint?re(r.mint):void 0,n.sourceHash=r.sourceHash,n.type="deposit"),n}),stateRoot:e.stateRoot}}}),transaction:Id({format(e){let t={};return e.type==="0x7e"&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?re(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:$l({format(e){return{l1GasPrice:e.l1GasPrice?re(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?re(e.l1GasUsed):null,l1Fee:e.l1Fee?re(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null}}})};At();lt();Ye();H();function db(e,t){return hb(e)?lb(e):Rl(e,t)}var Uh={transaction:db};function lb(e){xb(e);let{sourceHash:t,data:r,from:n,gas:o,isSystemTx:s,mint:i,to:a,value:c}=e,u=[t,n,a??"0x",i?N(i):"0x",c?N(c):"0x",o?N(o):"0x",s?"0x1":"0x",r??"0x"];return Te(["0x7e",bt(u)])}function hb(e){return e.type==="deposit"||typeof e.sourceHash<"u"}function xb(e){let{from:t,to:r}=e;if(t&&!Y(t))throw new ee({address:t});if(r&&!Y(r))throw new ee({address:r})}var _o={contracts:Fh,formatters:Hh,serializers:Uh};var Kc=Mo({id:31337,name:"Anvil",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["http://127.0.0.1:8545"],webSocket:["ws://127.0.0.1:8545"]}}});var ti=1,Yc=Mo({..._o,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{..._o.contracts,disputeGameFactory:{[ti]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[ti]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[ti]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[ti]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:ti});var ri=11155111,Jc=Mo({..._o,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{..._o.contracts,disputeGameFactory:{[ri]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[ri]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[ri]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[ri]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:ri});var yb="0x04969e1d36d43515cc6493a286021b44b0fce6f2",bb="0xECB28678045a94F8b96EdE1c8203aDEa81F8AAe3",gb=["function addInput(address _app, bytes payload) payable"],wb=Lr(gb),Xc={};Xc[Jc.id]=Jc;Xc[Yc.id]=Yc;Xc[Kc.id]=Kc;function vb(e){if(typeof e=="string"){if(!Q(e))throw new Error("Chain not found");e=ir(e,"number")}let t=Xc[e];if(!t)throw new Error("Chain not found");return t}async function Lh(e){let t=window.ethereum;if(!t){let o="MetaMask or another web3 wallet is not installed. Please install one to proceed.";throw new Error(o)}let r=Ef(t),n=qf({chain:vb(e),transport:r});if(!t.chainId||ir(t.chainId,"number")!=n.chain.id)throw new Error("Wallet on wrong chain");return n}async function _h(e,t){if(!e||!e.chain)throw new Error("No connected wallet");let r=window.ethereum;if(!r.chainId||ir(r.chainId,"number")!=e.chain.id)throw new Error("Wallet on wrong chain");let n=jf({chain:e.chain,transport:Tf()}),[o]=await e.requestAddresses(),{request:s}=await n.simulateContract({account:o,address:yb,abi:wb,functionName:"addInput",args:[bb,t],value:BigInt(0)}),i=await e.writeContract(s);await n.waitForTransactionReceipt({hash:i})}var st="INUMBER",Vo="IOP1",Wo="IOP2",Zo="IOP3",er="IVAR",gn="IVARNAME",jo="IFUNCALL",Qc="IFUNDEF",De="IEXPR",Wf="IEXPREVAL",wn="IMEMBER",eu="IENDSTATEMENT",qo="IARRAY";function G(e,t){this.type=e,this.value=t??0}G.prototype.toString=function(){switch(this.type){case st:case Vo:case Wo:case Zo:case er:case gn:case eu:return this.value;case jo:return"CALL "+this.value;case Qc:return"DEF "+this.value;case qo:return"ARRAY "+this.value;case wn:return"."+this.value;default:return"Invalid Instruction"}};function tu(e){return new G(Vo,e)}function rr(e){return new G(Wo,e)}function Kh(e){return new G(Zo,e)}function Vf(e,t,r,n,o){for(var s=[],i=[],a,c,u,f,m=0;m<e.length;m++){var p=e[m],d=p.type;if(d===st||d===gn)Array.isArray(p.value)?s.push.apply(s,Vf(p.value.map(function(y){return new G(st,y)}).concat(new G(qo,p.value.length)),t,r,n,o)):s.push(p);else if(d===er&&o.hasOwnProperty(p.value))p=new G(st,o[p.value]),s.push(p);else if(d===Wo&&s.length>1)c=s.pop(),a=s.pop(),f=r[p.value],p=new G(st,f(a.value,c.value)),s.push(p);else if(d===Zo&&s.length>2)u=s.pop(),c=s.pop(),a=s.pop(),p.value==="?"?s.push(a.value?c.value:u.value):(f=n[p.value],p=new G(st,f(a.value,c.value,u.value)),s.push(p));else if(d===Vo&&s.length>0)a=s.pop(),f=t[p.value],p=new G(st,f(a.value)),s.push(p);else if(d===De){for(;s.length>0;)i.push(s.shift());i.push(new G(De,Vf(p.value,t,r,n,o)))}else if(d===wn&&s.length>0)a=s.pop(),s.push(new G(st,a.value[p.value]));else{for(;s.length>0;)i.push(s.shift());i.push(p)}}for(;s.length>0;)i.push(s.shift());return i}function Yh(e,t,r){for(var n=[],o=0;o<e.length;o++){var s=e[o],i=s.type;if(i===er&&s.value===t)for(var a=0;a<r.tokens.length;a++){var c=r.tokens[a],u;c.type===Vo?u=tu(c.value):c.type===Wo?u=rr(c.value):c.type===Zo?u=Kh(c.value):u=new G(c.type,c.value),n.push(u)}else i===De?n.push(new G(De,Yh(s.value,t,r))):n.push(s)}return n}function bn(e,t,r){var n=[],o,s,i,a,c,u;if(Zf(e))return Qt(e,r);for(var f=e.length,m=0;m<f;m++){var p=e[m],d=p.type;if(d===st||d===gn)n.push(p.value);else if(d===Wo)s=n.pop(),o=n.pop(),p.value==="and"?n.push(o?!!bn(s,t,r):!1):p.value==="or"?n.push(o?!0:!!bn(s,t,r)):p.value==="="?(a=t.binaryOps[p.value],n.push(a(o,bn(s,t,r),r))):(a=t.binaryOps[p.value],n.push(a(Qt(o,r),Qt(s,r))));else if(d===Zo)i=n.pop(),s=n.pop(),o=n.pop(),p.value==="?"?n.push(bn(o?s:i,t,r)):(a=t.ternaryOps[p.value],n.push(a(Qt(o,r),Qt(s,r),Qt(i,r))));else if(d===er)if(p.value in t.functions)n.push(t.functions[p.value]);else if(p.value in t.unaryOps&&t.parser.isOperatorEnabled(p.value))n.push(t.unaryOps[p.value]);else{var y=r[p.value];if(y!==void 0)n.push(y);else throw new Error("undefined variable: "+p.value)}else if(d===Vo)o=n.pop(),a=t.unaryOps[p.value],n.push(a(Qt(o,r)));else if(d===jo){for(u=p.value,c=[];u-- >0;)c.unshift(Qt(n.pop(),r));if(a=n.pop(),a.apply&&a.call)n.push(a.apply(void 0,c));else throw new Error(a+" is not a function")}else if(d===Qc)n.push(function(){for(var b=n.pop(),l=[],h=p.value;h-- >0;)l.unshift(n.pop());var x=n.pop(),w=function(){for(var v=Object.assign({},r),I=0,T=l.length;I<T;I++)v[l[I]]=arguments[I];return bn(b,t,v)};return Object.defineProperty(w,"name",{value:x,writable:!1}),r[x]=w,w}());else if(d===De)n.push(Eb(p,t));else if(d===Wf)n.push(p);else if(d===wn)o=n.pop(),n.push(o[p.value]);else if(d===eu)n.pop();else if(d===qo){for(u=p.value,c=[];u-- >0;)c.unshift(n.pop());n.push(c)}else throw new Error("invalid Expression")}if(n.length>1)throw new Error("invalid Expression (parity)");return n[0]===0?0:Qt(n[0],r)}function Eb(e,t,r){return Zf(e)?e:{type:Wf,value:function(n){return bn(e.value,t,n)}}}function Zf(e){return e&&e.type===Wf}function Qt(e,t){return Zf(e)?e.value(t):e}function Kf(e,t){for(var r=[],n,o,s,i,a,c,u=0;u<e.length;u++){var f=e[u],m=f.type;if(m===st)typeof f.value=="number"&&f.value<0?r.push("("+f.value+")"):Array.isArray(f.value)?r.push("["+f.value.map(Dh).join(", ")+"]"):r.push(Dh(f.value));else if(m===Wo)o=r.pop(),n=r.pop(),i=f.value,t?i==="^"?r.push("Math.pow("+n+", "+o+")"):i==="and"?r.push("(!!"+n+" && !!"+o+")"):i==="or"?r.push("(!!"+n+" || !!"+o+")"):i==="||"?r.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+o+")))"):i==="=="?r.push("("+n+" === "+o+")"):i==="!="?r.push("("+n+" !== "+o+")"):i==="["?r.push(n+"[("+o+") | 0]"):r.push("("+n+" "+i+" "+o+")"):i==="["?r.push(n+"["+o+"]"):r.push("("+n+" "+i+" "+o+")");else if(m===Zo)if(s=r.pop(),o=r.pop(),n=r.pop(),i=f.value,i==="?")r.push("("+n+" ? "+o+" : "+s+")");else throw new Error("invalid Expression");else if(m===er||m===gn)r.push(f.value);else if(m===Vo)n=r.pop(),i=f.value,i==="-"||i==="+"?r.push("("+i+n+")"):t?i==="not"?r.push("(!"+n+")"):i==="!"?r.push("fac("+n+")"):r.push(i+"("+n+")"):i==="!"?r.push("("+n+"!)"):r.push("("+i+" "+n+")");else if(m===jo){for(c=f.value,a=[];c-- >0;)a.unshift(r.pop());i=r.pop(),r.push(i+"("+a.join(", ")+")")}else if(m===Qc){for(o=r.pop(),c=f.value,a=[];c-- >0;)a.unshift(r.pop());n=r.pop(),t?r.push("("+n+" = function("+a.join(", ")+") { return "+o+" })"):r.push("("+n+"("+a.join(", ")+") = "+o+")")}else if(m===wn)n=r.pop(),r.push(n+"."+f.value);else if(m===qo){for(c=f.value,a=[];c-- >0;)a.unshift(r.pop());r.push("["+a.join(", ")+"]")}else if(m===De)r.push("("+Kf(f.value,t)+")");else if(m!==eu)throw new Error("invalid Expression")}return r.length>1&&(t?r=[r.join(",")]:r=[r.join(";")]),String(r[0])}function Dh(e){return typeof e=="string"?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function Do(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}function Yf(e,t,r){r=r||{};for(var n=!!r.withMembers,o=null,s=0;s<e.length;s++){var i=e[s];i.type===er||i.type===gn?!n&&!Do(t,i.value)?t.push(i.value):(o!==null&&(Do(t,o)||t.push(o)),o=i.value):i.type===wn&&n&&o!==null?o+="."+i.value:i.type===De?Yf(i.value,t,r):o!==null&&(Do(t,o)||t.push(o),o=null)}o!==null&&!Do(t,o)&&t.push(o)}function wt(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}wt.prototype.simplify=function(e){return e=e||{},new wt(Vf(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)};wt.prototype.substitute=function(e,t){return t instanceof wt||(t=this.parser.parse(String(t))),new wt(Yh(this.tokens,e,t),this.parser)};wt.prototype.evaluate=function(e){return e=e||{},bn(this.tokens,this,e)};wt.prototype.toString=function(){return Kf(this.tokens,!1)};wt.prototype.symbols=function(e){e=e||{};var t=[];return Yf(this.tokens,t,e),t};wt.prototype.variables=function(e){e=e||{};var t=[];Yf(this.tokens,t,e);var r=this.functions;return t.filter(function(n){return!(n in r)})};wt.prototype.toJSFunction=function(e,t){var r=this,n=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Kf(this.simplify(t).tokens,!0)+"; }");return function(){return n.apply(r,arguments)}};var ni="TEOF",te="TOP",ru="TNUMBER",Jh="TSTRING",tr="TPAREN",Go="TBRACKET",nu="TCOMMA",Jf="TNAME",Xf="TSEMICOLON";function Xh(e,t,r){this.type=e,this.value=t,this.index=r}Xh.prototype.toString=function(){return this.type+": "+this.value};function ce(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}ce.prototype.newToken=function(e,t,r){return new Xh(e,t,r??this.pos)};ce.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current};ce.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent};ce.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken(ni,"EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};ce.prototype.isString=function(){var e=!1,t=this.pos,r=this.expression.charAt(t);if(r==="'"||r==='"')for(var n=this.expression.indexOf(r,t+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,this.expression.charAt(n-1)!=="\\"){var o=this.expression.substring(t+1,n);this.current=this.newToken(Jh,this.unescape(o),t),e=!0;break}n=this.expression.indexOf(r,n+1)}return e};ce.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return e==="("||e===")"?(this.current=this.newToken(tr,e),this.pos++,!0):!1};ce.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return(e==="["||e==="]")&&this.isOperatorEnabled("[")?(this.current=this.newToken(Go,e),this.pos++,!0):!1};ce.prototype.isComma=function(){var e=this.expression.charAt(this.pos);return e===","?(this.current=this.newToken(nu,","),this.pos++,!0):!1};ce.prototype.isSemicolon=function(){var e=this.expression.charAt(this.pos);return e===";"?(this.current=this.newToken(Xf,";"),this.pos++,!0):!1};ce.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&r!=="."&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(n in this.consts)return this.current=this.newToken(ru,this.consts[n]),this.pos+=n.length,!0}return!1};ce.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(te,n),this.pos+=n.length,!0}return!1};ce.prototype.isName=function(){for(var e=this.pos,t=e,r=!1;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()){if(t===this.pos&&(n==="$"||n==="_")){n==="_"&&(r=!0);continue}else if(t===this.pos||!r||n!=="_"&&(n<"0"||n>"9"))break}else r=!0}if(r){var o=this.expression.substring(e,t);return this.current=this.newToken(Jf,o),this.pos+=o.length,!0}return!1};ce.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);(t===" "||t==="	"||t===`
`||t==="\r")&&(e=!0,this.pos++,!(this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var Ab=/^[0-9a-f]{4}$/i;ce.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var r=e.substring(0,t);t>=0;){var n=e.charAt(++t);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"u":var o=e.substring(t+1,t+5);Ab.test(o)||this.parseError("Illegal escape sequence: \\u"+o),r+=String.fromCharCode(parseInt(o,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++t;var s=e.indexOf("\\",t);r+=e.substring(t,s<0?e.length:s),t=s}return r};ce.prototype.isComment=function(){var e=this.expression.charAt(this.pos);return e==="/"&&this.expression.charAt(this.pos+1)==="*"?(this.pos=this.expression.indexOf("*/",this.pos)+2,this.pos===1&&(this.pos=this.expression.length),!0):!1};ce.prototype.isRadixInteger=function(){var e=this.pos;if(e>=this.expression.length-2||this.expression.charAt(e)!=="0")return!1;++e;var t,r;if(this.expression.charAt(e)==="x")t=16,r=/^[0-9a-f]$/i,++e;else if(this.expression.charAt(e)==="b")t=2,r=/^[01]$/i,++e;else return!1;for(var n=!1,o=e;e<this.expression.length;){var s=this.expression.charAt(e);if(r.test(s))e++,n=!0;else break}return n&&(this.current=this.newToken(ru,parseInt(this.expression.substring(o,e),t)),this.pos=e),n};ce.prototype.isNumber=function(){for(var e=!1,t=this.pos,r=t,n=t,o=!1,s=!1,i;t<this.expression.length&&(i=this.expression.charAt(t),i>="0"&&i<="9"||!o&&i===".");)i==="."?o=!0:s=!0,t++,e=s;if(e&&(n=t),i==="e"||i==="E"){t++;for(var a=!0,c=!1;t<this.expression.length;){if(i=this.expression.charAt(t),a&&(i==="+"||i==="-"))a=!1;else if(i>="0"&&i<="9")c=!0,a=!1;else break;t++}c||(t=n)}return e?(this.current=this.newToken(ru,parseFloat(this.expression.substring(r,t))),this.pos=t):this.pos=n,e};ce.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if(t==="+"||t==="-"||t==="*"||t==="/"||t==="%"||t==="^"||t==="?"||t===":"||t===".")this.current=this.newToken(te,t);else if(t==="\u2219"||t==="\u2022")this.current=this.newToken(te,"*");else if(t===">")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(te,">="),this.pos++):this.current=this.newToken(te,">");else if(t==="<")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(te,"<="),this.pos++):this.current=this.newToken(te,"<");else if(t==="|")if(this.expression.charAt(this.pos+1)==="|")this.current=this.newToken(te,"||"),this.pos++;else return!1;else if(t==="=")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(te,"=="),this.pos++):this.current=this.newToken(te,t);else if(t==="!")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(te,"!="),this.pos++):this.current=this.newToken(te,t);else return!1;return this.pos++,this.isOperatorEnabled(this.current.value)?!0:(this.pos=e,!1)};ce.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)};ce.prototype.getCoordinates=function(){var e=0,t,r=-1;do e++,t=this.pos-r,r=this.expression.indexOf(`
`,r+1);while(r>=0&&r<this.pos);return{line:e,column:t}};ce.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)};function ne(e,t,r){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=r.allowMemberAccess!==!1}ne.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()};ne.prototype.tokenMatches=function(e,t){return typeof t>"u"?!0:Array.isArray(t)?Do(t,e.value):typeof t=="function"?t(e):e.value===t};ne.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()};ne.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken};ne.prototype.accept=function(e,t){return this.nextToken.type===e&&this.tokenMatches(this.nextToken,t)?(this.next(),!0):!1};ne.prototype.expect=function(e,t){if(!this.accept(e,t)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(t||e))}};ne.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;function r(o){return o.value in t}if(this.accept(Jf)||this.accept(te,r))e.push(new G(er,this.current.value));else if(this.accept(ru))e.push(new G(st,this.current.value));else if(this.accept(Jh))e.push(new G(st,this.current.value));else if(this.accept(tr,"("))this.parseExpression(e),this.expect(tr,")");else if(this.accept(Go,"["))if(this.accept(Go,"]"))e.push(new G(qo,0));else{var n=this.parseArrayList(e);e.push(new G(qo,n))}else throw new Error("unexpected "+this.nextToken)};ne.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),!this.parseUntilEndStatement(e,t)&&this.pushExpression(e,t))};ne.prototype.pushExpression=function(e,t){for(var r=0,n=t.length;r<n;r++)e.push(t[r])};ne.prototype.parseUntilEndStatement=function(e,t){return this.accept(Xf)?(this.nextToken&&this.nextToken.type!==ni&&!(this.nextToken.type===tr&&this.nextToken.value===")")&&t.push(new G(eu)),this.nextToken.type!==ni&&this.parseExpression(t),e.push(new G(De,t)),!0):!1};ne.prototype.parseArrayList=function(e){for(var t=0;!this.accept(Go,"]");)for(this.parseExpression(e),++t;this.accept(nu);)this.parseExpression(e),++t;return t};ne.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(te,"=");){var t=e.pop(),r=[],n=e.length-1;if(t.type===jo){if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,s=t.value+1;o<s;o++){var i=n-o;e[i].type===er&&(e[i]=new G(gn,e[i].value))}this.parseVariableAssignmentExpression(r),e.push(new G(De,r)),e.push(new G(Qc,t.value));continue}if(t.type!==er&&t.type!==wn)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),e.push(new G(gn,t.value)),e.push(new G(De,r)),e.push(rr("="))}};ne.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(te,"?");){var t=[],r=[];this.parseConditionalExpression(t),this.expect(te,":"),this.parseConditionalExpression(r),e.push(new G(De,t)),e.push(new G(De,r)),e.push(Kh("?"))}};ne.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(te,"or");){var t=[];this.parseAndExpression(t),e.push(new G(De,t)),e.push(rr("or"))}};ne.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(te,"and");){var t=[];this.parseComparison(t),e.push(new G(De,t)),e.push(rr("and"))}};var Tb=["==","!=","<","<=",">=",">","in"];ne.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(te,Tb);){var t=this.current;this.parseAddSub(e),e.push(rr(t.value))}};var Ib=["+","-","||"];ne.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(te,Ib);){var t=this.current;this.parseTerm(e),e.push(rr(t.value))}};var Bb=["*","/","%"];ne.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(te,Bb);){var t=this.current;this.parseFactor(e),e.push(rr(t.value))}};ne.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;function r(o){return o.value in t}if(this.save(),this.accept(te,r)){if(this.current.value!=="-"&&this.current.value!=="+"){if(this.nextToken.type===tr&&this.nextToken.value==="("){this.restore(),this.parseExponential(e);return}else if(this.nextToken.type===Xf||this.nextToken.type===nu||this.nextToken.type===ni||this.nextToken.type===tr&&this.nextToken.value===")"){this.restore(),this.parseAtom(e);return}}var n=this.current;this.parseFactor(e),e.push(tu(n.value))}else this.parseExponential(e)};ne.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(te,"^");)this.parseFactor(e),e.push(rr("^"))};ne.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(te,"!");)e.push(tu("!"))};ne.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;function r(s){return s.value in t}if(this.accept(te,r)){var n=this.current;this.parseAtom(e),e.push(tu(n.value))}else for(this.parseMemberExpression(e);this.accept(tr,"(");)if(this.accept(tr,")"))e.push(new G(jo,0));else{var o=this.parseArgumentList(e);e.push(new G(jo,o))}};ne.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(tr,")");)for(this.parseExpression(e),++t;this.accept(nu);)this.parseExpression(e),++t;return t};ne.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(te,".")||this.accept(Go,"[");){var t=this.current;if(t.value==="."){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(Jf),e.push(new G(wn,this.current.value))}else if(t.value==="["){if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(Go,"]"),e.push(rr("["))}else throw new Error("unexpected symbol: "+t.value)}};function Pb(e,t){return Number(e)+Number(t)}function Sb(e,t){return e-t}function kb(e,t){return e*t}function Cb(e,t){return e/t}function Rb(e,t){return e%t}function Mb(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function $b(e,t){return e===t}function Nb(e,t){return e!==t}function zb(e,t){return e>t}function Ob(e,t){return e<t}function Fb(e,t){return e>=t}function Hb(e,t){return e<=t}function Ub(e,t){return!!(e&&t)}function Lb(e,t){return!!(e||t)}function _b(e,t){return Do(t,e)}function Db(e){return(Math.exp(e)-Math.exp(-e))/2}function jb(e){return(Math.exp(e)+Math.exp(-e))/2}function qb(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function Gb(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function Vb(e){return Math.log(e+Math.sqrt(e*e-1))}function Wb(e){return Math.log((1+e)/(1-e))/2}function jh(e){return Math.log(e)*Math.LOG10E}function Zb(e){return-e}function Kb(e){return!e}function Yb(e){return e<0?Math.ceil(e):Math.floor(e)}function Jb(e){return Math.random()*(e||1)}function qh(e){return Qf(e+1)}function Xb(e){return isFinite(e)&&e===Math.round(e)}var Qb=4.7421875,Gf=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Qf(e){var t,r;if(Xb(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var n=e-2,o=e-1;n>1;)o*=n,n--;return o===0&&(o=1),o}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Qf(1-e));if(e>=171.35)return 1/0;if(e>85){var s=e*e,i=s*e,a=i*e,c=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*s)-139/(51840*i)-571/(2488320*a)+163879/(209018880*c)+5246819/(75246796800*c*e))}--e,r=Gf[0];for(var u=1;u<Gf.length;++u)r+=Gf[u]/(e+u);return t=e+Qb+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*r}function eg(e){return Array.isArray(e)?e.length:String(e).length}function Gh(){for(var e=0,t=0,r=0;r<arguments.length;r++){var n=Math.abs(arguments[r]),o;t<n?(o=t/n,e=e*o*o+1,t=n):n>0?(o=n/t,e+=o*o):e+=n}return t===1/0?1/0:t*Math.sqrt(e)}function Vh(e,t,r){return e?t:r}function tg(e,t){return typeof t>"u"||+t==0?Math.round(e):(e=+e,t=-+t,isNaN(e)||!(typeof t=="number"&&t%1===0)?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function rg(e,t,r){return r&&(r[e]=t),t}function ng(e,t){return e[t|0]}function og(e){return arguments.length===1&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function sg(e){return arguments.length===1&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function ig(e,t){if(typeof e!="function")throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(r,n){return e(r,n)})}function ag(e,t,r){if(typeof e!="function")throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce(function(n,o,s){return e(n,o,s)},t)}function cg(e,t){if(typeof e!="function")throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(r,n){return e(r,n)})}function ug(e,t){if(!(Array.isArray(t)||typeof t=="string"))throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function fg(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function pg(e){return(e>0)-(e<0)||+e}var Wh=1/3;function mg(e){return e<0?-Math.pow(-e,Wh):Math.pow(e,Wh)}function dg(e){return Math.exp(e)-1}function lg(e){return Math.log(1+e)}function hg(e){return Math.log(e)/Math.LN2}function Or(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Db,cosh:Math.cosh||jb,tanh:Math.tanh||qb,asinh:Math.asinh||Gb,acosh:Math.acosh||Vb,atanh:Math.atanh||Wb,sqrt:Math.sqrt,cbrt:Math.cbrt||mg,log:Math.log,log2:Math.log2||hg,ln:Math.log,lg:Math.log10||jh,log10:Math.log10||jh,expm1:Math.expm1||dg,log1p:Math.log1p||lg,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||Yb,"-":Zb,"+":Number,exp:Math.exp,not:Kb,length:eg,"!":qh,sign:Math.sign||pg},this.binaryOps={"+":Pb,"-":Sb,"*":kb,"/":Cb,"%":Rb,"^":Math.pow,"||":Mb,"==":$b,"!=":Nb,">":zb,"<":Ob,">=":Fb,"<=":Hb,and:Ub,or:Lb,in:_b,"=":rg,"[":ng},this.ternaryOps={"?":Vh},this.functions={random:Jb,fac:qh,min:sg,max:og,hypot:Math.hypot||Gh,pyt:Math.hypot||Gh,pow:Math.pow,atan2:Math.atan2,if:Vh,gamma:Qf,roundTo:tg,map:ig,fold:ag,filter:cg,indexOf:ug,join:fg},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Or.prototype.parse=function(e){var t=[],r=new ne(this,new ce(this,e),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(t),r.expect(ni,"EOF"),new wt(t,this)};Or.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Qh=new Or;Or.parse=function(e){return Qh.parse(e)};Or.evaluate=function(e,t){return Qh.parse(e).evaluate(t)};var Zh={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function xg(e){return Zh.hasOwnProperty(e)?Zh[e]:e}Or.prototype.isOperatorEnabled=function(e){var t=xg(e),r=this.options.operators||{};return!(t in r)||!!r[t]};var yg="https://app.rives.io",ep=20;function bg(e){return e.startsWith("0x")?e.slice(2,2+2*ep):e.slice(0,2*ep)}function gg(e){return`0x${bg(e)}${"0".repeat(2*(32-ep))}`}function t0(e,t){return e.length!=42||!Q(e)||t.length!=40?"":_s(`${e}${t}`).slice(2)}function wg(e,t){let n=new Or().parse(e),o=new TextDecoder("utf-8");if(n&&o.decode(t.slice(0,4))=="JSON"){let s=o.decode(t),i=JSON.parse(s.substring(4));return n.evaluate(i)}return 0}var vg="core.register_external_verification",e0="bytes32,bytes32,bytes,int,bytes32[],bytes";function r0(e,t){if(!t.rivemuOnFinish||!e)return"0x";let r=wg(e.score_function,t.outcard),n=Ie(di(e0),[gg(e.id),`0x${t.outhash}`,N(t.tape),BigInt(r),[],"0x"]);return`0x${It(`${vg}(${e0})`).replace("0x","")}${n.replace("0x","")}`}async function n0(e){let r=await(await fetch(`${yg}/inspect/core/rules?id=${e}`)).json();return r.status!="Accepted"||r.reports.length==0?null:JSON.parse(ir(r.reports[0].payload,"string")).data[0]}function oi(e){let t=document.getElementById("emulator-iframe");if(t){let r=`${rp}/#cartridge=${op}/${e.cartridgeId}`;e.simple&&(r+=`&simple=${e.simple}`),e.autoplay&&(r+=`&autoplay=${e.autoplay}`),e.ruleId&&(r+=`&fullTape=${ip}/${e.ruleId}`),e.tapeId&&(r+=`&fullTape=${sp}/${e.tapeId}`),e.args&&(r+=`&args=${e.args}`),e.incardUrl&&(r+=`&incard=${e.incardUrl}`),e.entropy&&(r+=`&entropy=${e.entropy}`),t.src=r}}function E7(){oi({cartridgeId:An,ruleId:au,simple:!0})}function A7(){oi({cartridgeId:An,tapeId:np,autoplay:!0})}async function T7(){let e=await n0(au);if(!e){let i="Error loading rule";console.error(i);let a=document.getElementById("submit-msg");a&&(a.innerHTML="");let c=document.getElementById("connect-msg");c&&(c.innerHTML=`${i} (Demo Version)`),oi({cartridgeId:An,simple:!0});return}let t=async()=>{let i=document.getElementById("connect-msg"),a=document.getElementById("submit-msg");a&&(a.innerHTML="");try{let c=await Lh(ap);if(!c)throw new Error("Error connecting wallet");let[u]=await c.requestAddresses();return i&&(i.innerHTML=`Connected with ${u.substring(0,6)}...${u.substring(u.length-4,u.length)} on ${c.chain.name}`),{client:c,address:u}}catch(c){console.log(c);let u="Error connecting wallet";if(c instanceof Error){let f=c.message.indexOf(".");u=f>=0?c.message.substring(0,f):c.message}return i&&(i.innerHTML=`${u} (Demo Version)`),oi({cartridgeId:An,simple:!0,ruleId:e.id}),{client:null,address:null}}},r,n;window.ethereum&&(window.ethereum.on("chainChanged",async()=>{let i=await t();r=i.client,n=i.address}),window.ethereum.on("accountsChanged",async()=>{let i=await t();r=i.client,n=i.address}));let o=await t();if(r=o.client,n=o.address,!r||!n)return;window.addEventListener("message",i=>{if(!r||!n||!e)return;let a=i.data;if(a.rivemuOnFinish){let c=document.getElementById("submit-msg");c&&(c.innerHTML="");let u=r0(e,a);_h(r,u).then(()=>{c&&(c.innerHTML="Gameplay submitted;")}).catch(f=>{let m="Error submitting";if(f instanceof Error){let p=f.message.indexOf(".");m=p>=0?f.message.substring(0,p):f.message}console.log(f),c&&(c.innerHTML=m)})}},!1);let s=t0(n,e.id);oi({cartridgeId:An,simple:!0,ruleId:e.id,entropy:s})}export{E7 as setupPlay,A7 as setupReplay,T7 as setupSubmit};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

expr-eval/dist/index.mjs:
  (*!
   Based on ndef.parser, by Raphael Graf(r@undefined.ch)
   http://www.undefined.ch/mparser/index.html
  
   Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)
  
   You are free to use and modify this code in anyway you find useful. Please leave this comment in the code
   to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,
   but don't feel like you have to let me know or ask permission.
  *)
*/
